/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/util/now","sap/base/util/getObject","sap/base/util/getter","sap/base/Version","sap/base/util/extend","sap/base/assert","sap/base/Log","sap/ui/Configuration","sap/ui/dom/appendHead","sap/ui/dom/computedStylePolyfill","sap/ui/dom/activeElementFix","sap/ui/dom/includeScript","sap/ui/dom/includeStylesheet","sap/ui/initjQuerySupport","sap/ui/initSupportHooks","sap/ui/initjQueryBrowser","sap/ui/security/FrameOptions","sap/ui/performance/Measurement","sap/ui/performance/Interaction","sap/ui/performance/ResourceTimings","sap/ui/bootstrap/StoredConfig","sap/ui/SyncPoint","sap/ui/XHRProxy","sap/ui/Device","sap/ui/thirdparty/URI","sap/ui/thirdparty/jquery","sap/ui/thirdparty/jqueryui/jquery-ui-position","ui5loader-autoconfig","jquery.sap.stubs"],function(now,getObject,getter,Version,extend,assert,Log,Configuration,appendHead,computedStylePolyfill,activeElementFix,includeScript,includeStylesheet,initjQuerySupport,initSupportHooks,initjQueryBrowser,FrameOptions,Measurement,Interaction,ResourceTimings,StoredConfig,SyncPoint,XHRProxy,Device,URI,jQuery){"use strict";if(!jQuery){throw new Error("Loading of jQuery failed")}var ui5loader=sap.ui.loader;if(!ui5loader||!ui5loader._){throw new Error("The UI5 compatilbility module requires a UI5 specific AMD implementation")}var _ui5loader=ui5loader._;var _earlyLogs=[];function _earlyLog(e,r){_earlyLogs.push({level:e,message:r})}var oJQVersion=Version(jQuery.fn.jquery);if(Device.browser.msie){jQuery.support=jQuery.support||{};jQuery.support.cors=true;if(window.ActiveXObject!==undefined&&oJQVersion.inRange("1.11","2")){var fnCreateStandardXHR=function(){try{return new XMLHttpRequest}catch(e){}};var fnCreateActiveXHR=function(){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}};jQuery.ajaxSettings=jQuery.ajaxSettings||{};jQuery.ajaxSettings.xhr=function(){return!this.isLocal?fnCreateStandardXHR():fnCreateActiveXHR()}}}if(Device.browser.firefox){computedStylePolyfill()}if(Device.browser.msie||Device.browser.edge){activeElementFix()}if(Device.browser.firefox&&window.Proxy){XHRProxy()}var oCfgData=window["sap-ui-config"]=Configuration;var syncCallBehavior=0;if(oCfgData["xx-nosync"]==="warn"||/(?:\?|&)sap-ui-xx-nosync=(?:warn)/.exec(window.location.search)){syncCallBehavior=1}if(oCfgData["xx-nosync"]===true||oCfgData["xx-nosync"]==="true"||/(?:\?|&)sap-ui-xx-nosync=(?:x|X|true)/.exec(window.location.search)){syncCallBehavior=2}ui5loader.config({reportSyncCalls:syncCallBehavior});if(syncCallBehavior&&oCfgData.__loaded){_earlyLog(syncCallBehavior===1?"warning":"error","[nosync]: configuration loaded via sync XHR")}if(oCfgData.noconflict===true||oCfgData.noconflict==="true"||oCfgData.noconflict==="x"){jQuery.noConflict()}jQuery.sap=jQuery.sap||{};jQuery.sap.Version=Version;jQuery.sap.now=now;jQuery.sap.debug=StoredConfig.debug;jQuery.sap.setReboot=StoredConfig.setReboot;jQuery.sap.statistics=StoredConfig.statistics;jQuery.sap.log=extend(Log.getLogger(),{Level:Log.Level,getLogger:Log.getLogger,getLogEntries:Log.getLog,addLogListener:Log.addLogListener,removeLogListener:Log.removeLogListener,logSupportInfo:Log.logSupportInfo,LogLevel:Log.Level,getLog:Log.getLog});var sWindowName=typeof window==="undefined"||window.top==window?"":"["+window.location.pathname.split("/").slice(-1)[0]+"] ";jQuery.sap.assert=function(e,r){if(!e){var t=typeof r==="function"?r():r;assert(e,sWindowName+t)}};jQuery.sap.assert(Log.setLevel(Log.Level.DEBUG)||1,"will be removed in optimized version");oCfgData.loglevel=function(){var e=/(?:\?|&)sap-ui-log(?:L|-l)evel=([^&]*)/.exec(window.location.search);return e&&e[1]}()||oCfgData.loglevel;if(oCfgData.loglevel){Log.setLevel(Log.Level[oCfgData.loglevel.toUpperCase()]||parseInt(oCfgData.loglevel,10))}Log.info("SAP Logger started.");jQuery.each(_earlyLogs,function(e,r){Log[r.level](r.message)});_earlyLogs=null;jQuery.sap.factory=function e(r){jQuery.sap.assert(typeof r=="object","oPrototype must be an object (incl. null)");function t(){}t.prototype=r;return t};jQuery.sap.newObject=function e(r){jQuery.sap.assert(typeof r=="object","oPrototype must be an object (incl. null)");return Object.create(r||null)};jQuery.sap.getter=getter;jQuery.sap.getObject=function(e,r,t){var o=t||window,a=(e||"").split("."),n=a.length,i=isNaN(r)?0:n-r,s;if(syncCallBehavior&&t===window){Log.error("[nosync] getObject called to retrieve global name '"+e+"'")}for(s=0;o&&s<n;s++){if(!o[a[s]]&&s<i){o[a[s]]={}}o=o[a[s]]}return o};jQuery.sap.setObject=function(e,r,t){if(e!=undefined){var o=e.split(".");t=t||window;if(o.length>1){var a=o.pop();getObject(t,o.join("."),true)[a]=r}else if(o.length==1){t[e]=r}}};_ui5loader.measure=Measurement;jQuery.sap.measure=extend({},_ui5loader.measure);jQuery.sap.measure.clearInteractionMeasurements=Interaction.clear;jQuery.sap.measure.startInteraction=Interaction.start;jQuery.sap.measure.endInteraction=Interaction.end;jQuery.sap.measure.getPendingInteractionMeasurement=Interaction.getPending;jQuery.sap.measure.filterInteractionMeasurements=Interaction.filter;jQuery.sap.measure.getAllInteractionMeasurements=Interaction.getAll;jQuery.sap.measure.getRequestTimings=ResourceTimings.getRequestTimings;jQuery.sap.measure.clearRequestTimings=ResourceTimings.clearRequestTimings;jQuery.sap.measure.setRequestBufferSize=ResourceTimings.setRequestBufferSize;jQuery.sap.syncPoint=function(e,r,t){return new SyncPoint(e,r,t)};var getModuleSystemInfo=function(){var e=_ui5loader.logger=Log.getLogger("sap.ui.ModuleSystem",/sap-ui-xx-debug(M|-m)odule(L|-l)oading=(true|x|X)/.test(location.search)||oCfgData["xx-debugModuleLoading"]?Log.Level.DEBUG:Log.Level.INFO),r="fragment",t="view",o={js:[t,r,"controller","designtime"],xml:[t,r],json:[t,r],html:[t,r]},a,n;(function(){var r="",t="";for(var i in o){r=(r?r+"|":"")+i;t=(t?t+"|":"")+"(?:(?:"+o[i].join("\\.|")+"\\.)?"+i+")"}r="\\.("+r+")$";t="\\.(?:"+t+"|[^./]+)$";e.debug("constructed regexp for file types :"+r);e.debug("constructed regexp for file sub-types :"+t);a=new RegExp(r);n=new RegExp(t)})();function i(e){if(/^jquery\.sap\./.test(e)){return e}return e.replace(/\./g,"/")}jQuery.sap.getModulePath=function(e,r){return jQuery.sap.getResourcePath(i(e),r)};jQuery.sap.getResourcePath=function(e,r){if(arguments.length===1&&e!=""){var t=e.split(/\//);var o=n.exec(t[t.length-1]);if(o){r=o[0];t[t.length-1]=t[t.length-1].slice(0,o.index);e=t.join("/")}else{r=""}}return _ui5loader.getResourcePath(e,r)};jQuery.sap.registerModulePath=function e(r,t){jQuery.sap.assert(!/\//.test(r),"module name must not contain a slash.");r=r.replace(/\./g,"/");t=t||".";jQuery.sap.registerResourcePath(r,t)};jQuery.sap.registerResourcePath=function(r,t){if(!t){t={url:null}}if(!s[r]){var o;if(typeof t==="string"||t instanceof String){o=t}else{o=t.url;if(t.final){s[r]=t.final}}var a=_ui5loader.toUrl(r);var n;if(o!==a||t.final){n={paths:{}};n.paths[r]=o;ui5loader.config(n);e.info("jQuery.sap.registerResourcePath ('"+r+"', '"+o+"')"+(t["final"]?" (final)":""))}}else{e.warning("jQuery.sap.registerResourcePath with prefix "+r+" already set as final. This call is ignored.")}};var s=Object.create(null);jQuery.sap.registerModuleShims=function(e){jQuery.sap.assert(typeof e==="object","mShims must be an object");ui5loader.config({shim:e})};jQuery.sap.isDeclared=function e(r,t){var o=_ui5loader.getModuleState(i(r)+".js");return o&&(t||o>0)};jQuery.sap.isResourceLoaded=function e(r){return!!_ui5loader.getModuleState(r)};jQuery.sap.getAllDeclaredModules=function(){var e=[],r=_ui5loader.getAllModules(true),t;for(var o in r){t=r[o];if(t.ui5&&t.state!==-1){e.push(t.ui5)}}return e};if(oCfgData.resourceroots){for(var u in oCfgData.resourceroots){jQuery.sap.registerModulePath(u,oCfgData.resourceroots[u])}}var l=_ui5loader.getUrlPrefixes();e.info("URL prefixes set to:");for(var u in l){e.info("  "+(u?"'"+u+"'":"(default)")+" : "+l[u]+(s[u]?" (final)":""))}jQuery.sap.declare=function(e,r){var t=e;if(typeof e==="object"){t=e.modName;e=i(e.modName)+(e.type?"."+e.type:"")+".js"}else{e=i(e)+".js"}_ui5loader.declareModule(e);if(r!==false){jQuery.sap.getObject(t,1)}};jQuery.sap.require=function(e){if(arguments.length>1){for(var r=0;r<arguments.length;r++){jQuery.sap.require(arguments[r])}return this}if(typeof e==="object"){jQuery.sap.assert(!e.type||o.js.indexOf(e.type)>=0,"type must be empty or one of "+o.js.join(", "));e=i(e.modName)+(e.type?"."+e.type:"")}else{e=i(e)}sap.ui.requireSync(e)};Object.defineProperty(jQuery.sap.require,"_hook",{get:function(){return _ui5loader.translate},set:function(e){jQuery.sap.assert(false,"jquery.sap.global: legacy hook for code transformation should no longer be used");_ui5loader.translate=e}});jQuery.sap.preloadModules=function(e,r,t){Log.error("jQuery.sap.preloadModules was never a public API and has been removed. Migrate to Core.loadLibrary()!")};jQuery.sap.registerPreloadedModules=function(e){var r=e.modules;if(Version(e.version||"1.0").compareTo("2.0")<0){r={};for(var t in e.modules){r[i(t)+".js"]=e.modules[t]}}sap.ui.require.preload(r,e.name,e.url)};jQuery.sap.unloadResources=_ui5loader.unloadResources;jQuery.sap.getResourceName=function(e,r){return i(e)+(r==null?".js":r)};jQuery.sap.loadResource=function(r,t){var o,n,i,s,u;if(typeof r==="string"){t=t||{}}else{t=r||{};r=t.name}t=jQuery.extend({failOnError:true,async:false},t);o=t.dataType;if(o==null&&r){o=(o=a.exec(r||t.url))&&o[1]}jQuery.sap.assert(/^(xml|html|json|text)$/.test(o),"type must be one of xml, html, json or text");u=t.async?new jQuery.Deferred:null;function l(o,a){if(o==null&&t.failOnError){s=a||new Error("no data returned for "+r);if(t.async){u.reject(s);e.error(s)}return null}if(t.async){u.resolve(o)}return o}function c(e){var r=jQuery.ajaxSettings.converters["text "+o];if(typeof r==="function"){e=r(e)}return l(e)}n=_ui5loader.getModuleContent(r,t.url);if(n!=undefined){if(t.async){setTimeout(function(){c(n)},0)}else{n=c(n)}}else{if(!t.async&&syncCallBehavior){if(syncCallBehavior>=1){e.error("[nosync] loading resource '"+(r||t.url)+"' with sync XHR")}else{throw new Error("[nosync] loading resource '"+(r||t.url)+"' with sync XHR")}}jQuery.ajax({url:i=t.url||_ui5loader.getResourcePath(r),async:t.async,dataType:o,headers:t.headers,success:function(e,r,t){n=l(e)},error:function(e,t,o){s=new Error("resource "+r+" could not be loaded from "+i+". Check for 'file not found' or parse errors. Reason: "+o);s.status=t;s.error=o;s.statusCode=e.status;n=l(null,s)}})}if(t.async){return Promise.resolve(u)}if(s!=null&&t.failOnError){throw s}return n};jQuery.sap._loadJSResourceAsync=_ui5loader.loadJSResourceAsync;return function(){return{modules:_ui5loader.getAllModules(),prefixes:_ui5loader.getUrlPrefixes()}}}();jQuery.sap.includeScript=includeScript;jQuery.sap.includeStyleSheet=includeStylesheet;if(!(oCfgData.productive===true||oCfgData.productive==="true"||oCfgData.productive==="x")){initSupportHooks(getModuleSystemInfo,oCfgData)}if(oJQVersion.compareTo("2.2.3")!=0){Log.warning("SAPUI5's default jQuery version is 2.2.3; current version is "+jQuery.fn.jquery+". Please note that we only support version 2.2.3.")}initjQueryBrowser();initjQuerySupport();jQuery.sap.FrameOptions=FrameOptions;jQuery.sap.globalEval=function(){eval(arguments[0])};return jQuery});