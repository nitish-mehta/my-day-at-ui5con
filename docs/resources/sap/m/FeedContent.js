/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","./library","sap/ui/core/Control","sap/m/Text","sap/ui/Device","./FeedContentRenderer","jquery.sap.keycodes"],function(t,e,i,n,o,s){"use strict";var r=e.Size;var a=i.extend("sap.m.FeedContent",{metadata:{library:"sap.m",properties:{size:{type:"sap.m.Size",group:"Misc",defaultValue:r.Auto},contentText:{type:"string",group:"Misc",defaultValue:null},subheader:{type:"string",group:"Misc",defaultValue:null},value:{type:"string",group:"Misc",defaultValue:null},valueColor:{type:"sap.m.ValueColor",group:"Misc",defaultValue:null},truncateValueTo:{type:"int",group:"Misc",defaultValue:4}},defaultAggregation:"_contentTextAgr",aggregations:{_contentTextAgr:{type:"sap.m.Text",multiple:false,visibility:"hidden"}},events:{press:{}}}});a.prototype.init=function(){this._oContentText=new n(this.getId()+"-content-text",{maxLines:2});this._oContentText.cacheLineHeight=false;this.setAggregation("_contentTextAgr",this._oContentText,true);this.setTooltip("{AltText}")};a.prototype.onBeforeRendering=function(){this.$().unbind("mouseenter",this._addTooltip);this.$().unbind("mouseleave",this._removeTooltip)};a.prototype.onAfterRendering=function(){this.$().bind("mouseenter",this._addTooltip.bind(this));this.$().bind("mouseleave",this._removeTooltip.bind(this))};a.prototype.exit=function(){this._oContentText=null};a.prototype._addTooltip=function(){this.$().attr("title",this.getTooltip_AsString())};a.prototype._removeTooltip=function(){this.$().attr("title",null)};a.prototype.getAltText=function(){var t="";var e=true;if(this.getAggregation("_contentTextAgr").getText()){t+=this.getAggregation("_contentTextAgr").getText();e=false}if(this.getSubheader()){if(e){t+=""+this.getSubheader()}else{t+="\n"+this.getSubheader()}e=false}if(this.getValue()){if(e){t+=""+this.getValue()}else{t+="\n"+this.getValue()}}return t};a.prototype.getTooltip_AsString=function(){var t=this.getTooltip();var e=this.getAltText();if(typeof t==="string"||t instanceof String){e=t.split("{AltText}").join(e).split("((AltText))").join(e);return e}if(t){return t}else{return""}};a.prototype.setContentText=function(t){this._oContentText.setText(t);return this};a.prototype.ontap=function(t){if(o.browser.msie){this.$().focus()}this.firePress()};a.prototype.onkeydown=function(e){if(e.which===t.sap.KeyCodes.ENTER||e.which===t.sap.KeyCodes.SPACE){this.firePress();e.preventDefault()}};a.prototype.attachEvent=function(t,e,n,o){i.prototype.attachEvent.call(this,t,e,n,o);if(this.hasListeners("press")){this.$().attr("tabindex",0).addClass("sapMPointer")}return this};a.prototype.detachEvent=function(t,e,n){i.prototype.detachEvent.call(this,t,e,n);if(!this.hasListeners("press")){this.$().removeAttr("tabindex").removeClass("sapMPointer")}return this};return a});