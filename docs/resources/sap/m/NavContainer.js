/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","./library","sap/ui/core/Control","sap/ui/core/RenderManager","sap/ui/Device","./NavContainerRenderer","jquery.sap.events"],function(e,t,a,i,n,s){"use strict";var o=a.extend("sap.m.NavContainer",{metadata:{library:"sap.m",properties:{autoFocus:{type:"boolean",group:"Behavior",defaultValue:true},height:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"100%"},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"100%"},visible:{type:"boolean",group:"Appearance",defaultValue:true},defaultTransitionName:{type:"string",group:"Appearance",defaultValue:"slide"}},defaultAggregation:"pages",aggregations:{pages:{type:"sap.ui.core.Control",multiple:true,singularName:"page"}},associations:{initialPage:{type:"sap.ui.core.Control",multiple:false}},events:{navigate:{allowPreventDefault:true,parameters:{from:{type:"sap.ui.core.Control"},fromId:{type:"string"},to:{type:"sap.ui.core.Control"},toId:{type:"string"},firstTime:{type:"boolean"},isTo:{type:"boolean"},isBack:{type:"boolean"},isBackToTop:{type:"boolean"},isBackToPage:{type:"boolean"},direction:{type:"string"}}},afterNavigate:{parameters:{from:{type:"sap.ui.core.Control"},fromId:{type:"string"},to:{type:"sap.ui.core.Control"},toId:{type:"string"},firstTime:{type:"boolean"},isTo:{type:"boolean"},isBack:{type:"boolean"},isBackToTop:{type:"boolean"},isBackToPage:{type:"boolean"},direction:{type:"string"}}}}}});var r=sap.ui.getCore().getConfiguration().getAnimation(),l=function(e){return r?e:0},d=function(e){return!!(e&&e.getParent())};o.prototype.init=function(){this._pageStack=[];this._aQueue=[];this._mVisitedPages={};this._mFocusObject={};this._iTransitionsCompleted=0;this._bNeverRendered=true;this._bNavigating=false;this._bRenderingInProgress=false};o.prototype.exit=function(){this._mFocusObject=null};o.prototype.onBeforeRendering=function(){var t=this.getCurrentPage();if(this._bNeverRendered&&t){var a=t.getId();if(!this._mVisitedPages[a]){this._mVisitedPages[a]=true;var i={from:null,fromId:null,to:t,toId:a,firstTime:true,isTo:false,isBack:false,isBackToPage:false,isBackToTop:false,direction:"initial"};var n=e.Event("BeforeFirstShow",i);n.srcControl=this;n.data=this._oToDataBeforeRendering||{};n.backData={};t._handleEvent(n);n=e.Event("BeforeShow",i);n.srcControl=this;n.data=this._oToDataBeforeRendering||{};n.backData={};t._handleEvent(n)}}};o.prototype.onAfterRendering=function(){var t=this.getCurrentPage(),a,i,n,s;if(this._bNeverRendered&&t){this._bNeverRendered=false;delete this._bNeverRendered;n=t.getId();if(!this._isInsideAPopup()&&this.getAutoFocus()){a=o._applyAutoFocusTo(n);if(a){this._mFocusObject[n]=a}}i={from:null,fromId:null,to:t,toId:n,firstTime:true,isTo:false,isBack:false,isBackToTop:false,isBackToPage:false,direction:"initial"};s=e.Event("AfterShow",i);s.srcControl=this;s.data=this._oToDataBeforeRendering||{};s.backData={};t._handleEvent(s)}};o.prototype._getActualInitialPage=function(){var t=this.getInitialPage();if(t){var a=sap.ui.getCore().byId(t);if(a){return a}else{e.sap.log.error("NavContainer: control with ID '"+t+"' was set as 'initialPage' but was not found as a DIRECT child of this NavContainer (number of current children: "+this.getPages().length+").")}}var i=this.getPages();return i.length>0?i[0]:null};o.prototype.getPage=function(e){var t=this.getPages();for(var a=0;a<t.length;a++){if(t[a]&&t[a].getId()==e){return t[a]}}return null};o.prototype._ensurePageStackInitialized=function(e){if(this._pageStack.length===0){var t=this._getActualInitialPage();if(t){this._pageStack.push({id:t.getId(),isInitial:true,data:e||{}})}}return this._pageStack};o.prototype.getCurrentPage=function(){var t=this._ensurePageStackInitialized();if(t.length>=1){return this.getPage(t[t.length-1].id)}else{e.sap.log.warning(this+": page stack is empty but should have been initialized - application failed to provide a page to display");return undefined}};o.prototype.getPreviousPage=function(){var t=this._ensurePageStackInitialized();if(t.length>1){return this.getPage(t[t.length-2].id)}else if(t.length==1){return undefined}else{e.sap.log.warning(this+": page stack is empty but should have been initialized - application failed to provide a page to display")}};o.prototype.currentPageIsTopPage=function(){var e=this._ensurePageStackInitialized();return e.length===1};o.prototype.insertPreviousPage=function(t,a,i){var n=this._ensurePageStackInitialized();if(this._pageStack.length>0){var s=n.length-1;var o={id:t,transition:a,data:i};if(s===0){o.isInitial=true;delete n[n.length-1].isInitial}n.splice(s,0,o)}else{e.sap.log.warning(this+": insertPreviousPage called with empty page stack; ignoring")}return this};o._applyAutoFocusTo=function(t){var a=e.sap.byId(t).firstFocusableDomRef();if(a){e.sap.focus(a)}return a};o.prototype._applyAutoFocus=function(t){var a=t.toId,i,n=this.getAutoFocus(),s=t.isBack||t.isBackToPage||t.isBackToTop;if(!t.bFocusInsideFromPage){return}if(s){i=this._mFocusObject!=null?this._mFocusObject[a]:null;if(i){e.sap.focus(i)}else if(n){o._applyAutoFocusTo(a)}}else if(t.isTo&&n){o._applyAutoFocusTo(a)}};o.prototype._afterTransitionCallback=function(t,a,i){var n=e.Event("AfterShow",t);n.data=a||{};n.backData=i||{};n.srcControl=this;t.to._handleEvent(n);n=e.Event("AfterHide",t);n.srcControl=this;t.from._handleEvent(n);this._iTransitionsCompleted++;this._bNavigating=false;this._applyAutoFocus(t);this.fireAfterNavigate(t);e.sap.log.info(this+": _afterTransitionCallback called, to: "+t.toId);if(t.to.hasStyleClass("sapMNavItemHidden")){e.sap.log.warning(this.toString()+": target page '"+t.toId+"' still has CSS class 'sapMNavItemHidden' after transition. This should not be the case, please check the preceding log statements.");t.to.removeStyleClass("sapMNavItemHidden")}this._dequeueNavigation()};o.prototype._dequeueNavigation=function(){var e=this._aQueue.shift();if(typeof e==="function"){e()}};o.prototype._isInPageStack=function(e){return this._pageStack.some(function(t){return t.id===e})};o.prototype._safeBackToPage=function(e,t,a,i){var n;if(!this.getPage(e)){return this}n=this.getCurrentPage();if(n&&n.getId()===e){return this}if(this._isInPageStack(e)){return this.backToPage(e,a,i)}else{a=a||{};a.safeBackToPage=true;return this.to(e,t,a,i)}};o.prototype._isFocusInControl=function(t){return e(document.activeElement).closest(t.$()).length>0};o.prototype.to=function(n,s,r,d,p){if(n instanceof a){n=n.getId()}if(typeof s!=="string"){d=r;r=s}s=s||this.getDefaultTransitionName();d=d||{};r=r||{};var g={id:n,transition:s,data:r};this._ensurePageStackInitialized(r);if(this._bNavigating){e.sap.log.info(this.toString()+": Cannot navigate to page "+n+" because another navigation is already in progress. - navigation will be executed after the previous one");this._aQueue.push(e.proxy(function(){this.to(n,s,r,d,true)},this));return this}if(this._bNeverRendered){this._oToDataBeforeRendering=r}var u=this.getCurrentPage();if(u&&u.getId()===n){e.sap.log.warning(this.toString()+": Cannot navigate to page "+n+" because this is the current page.");if(p){this._dequeueNavigation()}if(this._pageStack.length===1){this._pageStack[0].transition=g.transition}return this}var v=this.getPage(n);if(v){if(!u){e.sap.log.warning("Navigation triggered to page with ID '"+n+"', but the current page is not known/aggregated by "+this);return this}var f={from:u,fromId:u.getId(),to:v,toId:n,firstTime:!this._mVisitedPages[n],isTo:true,isBack:false,isBackToTop:false,isBackToPage:false,direction:"to",bFocusInsideFromPage:this._isFocusInControl(u)};if(f.bFocusInsideFromPage){this._mFocusObject[u.getId()]=document.activeElement}var h=this.fireNavigate(f);if(h){t.closeKeyboard();var c=e.Event("BeforeHide",f);c.srcControl=this;u._handleEvent(c);if(!this._mVisitedPages[n]){c=e.Event("BeforeFirstShow",f);c.srcControl=this;c.data=r||{};c.backData={};v._handleEvent(c)}c=e.Event("BeforeShow",f);c.srcControl=this;c.data=r||{};c.backData={};v._handleEvent(c);this._pageStack.push(g);e.sap.log.info(this.toString()+": navigating to page '"+n+"': "+v.toString());this._mVisitedPages[n]=true;if(!this.getDomRef()){e.sap.log.info("'Hidden' 'to' navigation in not-rendered NavContainer "+this.toString());if(this._bRenderingInProgress){e.sap.delayedCall(0,this,this.invalidate)}return this}var m;if(!(m=v.getDomRef())||m.parentNode!=this.getDomRef()||i.isPreservedContent(m)){v.addStyleClass("sapMNavItemRendering");e.sap.log.debug("Rendering 'to' page '"+v.toString()+"' for 'to' navigation");var y=sap.ui.getCore().createRenderManager();y.render(v,this.getDomRef());y.destroy();v.addStyleClass("sapMNavItemHidden").removeStyleClass("sapMNavItemRendering")}var C=o.transitions[s]||o.transitions["slide"];var b=this._iTransitionsCompleted;var I=this;window.setTimeout(function(){if(I&&I._iTransitionsCompleted<b+1){e.sap.log.warning("Transition '"+s+"' 'to' was triggered five seconds ago, but has not yet invoked the end-of-transition callback.")}},l(5e3));this._bNavigating=true;var S=r.safeBackToPage||d.safeBackToPage?"back":"to";C[S].call(this,u,v,e.proxy(function(){this._afterTransitionCallback(f,r)},this),d)}else{e.sap.log.info("Navigation to page with ID '"+n+"' has been aborted by the application")}}else{e.sap.log.warning("Navigation triggered to page with ID '"+n+"', but this page is not known/aggregated by "+this)}return this};o.prototype.back=function(e,t){this._backTo("back",e,t);return this};o.prototype.backToPage=function(e,t,a){this._backTo("backToPage",t,a,e);return this};o.prototype.backToTop=function(e,t){this._backTo("backToTop",e,t);return this};o.prototype._backTo=function(n,s,r,d){if(this._bNavigating){e.sap.log.warning(this.toString()+": Cannot navigate back because another navigation is already in progress. - navigation will be executed after the previous one");this._aQueue.push(e.proxy(function(){this._backTo(n,s,r,d)},this));return this}if(this._pageStack.length<=1){if(this._pageStack.length===1&&!this._pageStack[0].isInitial){throw new Error("Initial page not found on the stack. How did this happen?")}return this}else{if(d instanceof a){d=d.getId()}var p=this._pageStack[this._pageStack.length-1];var g=p.transition;var u=this.getPage(p.id);var v;var f;if(n==="backToTop"){v=this._getActualInitialPage();f=null}else if(n==="backToPage"){var h=this._findClosestPreviousPageInfo(d);if(!h){e.sap.log.error(this.toString()+": Cannot navigate backToPage('"+d+"') because target page was not found among the previous pages.");return this}v=sap.ui.getCore().byId(h.id);if(!v){e.sap.log.error(this.toString()+": Cannot navigate backToPage('"+d+"') because target page does not exist anymore.");return this}f=h.data}else{v=this.getPreviousPage();f=this._pageStack[this._pageStack.length-2].data}if(!v){e.sap.log.error("NavContainer back navigation: target page is not defined or not aggregated by this NavContainer. Aborting navigation.");return}var c=v.getId();s=s||{};r=r||{};var m={from:u,fromId:u.getId(),to:v,toId:c,firstTime:!this._mVisitedPages[c],isTo:false,isBack:n==="back",isBackToPage:n==="backToPage",isBackToTop:n==="backToTop",direction:n,bFocusInsideFromPage:this._isFocusInControl(u)};var y=this.fireNavigate(m);if(y){t.closeKeyboard();var C=e.Event("BeforeHide",m);C.srcControl=this;u._handleEvent(C);if(!this._mVisitedPages[c]){C=e.Event("BeforeFirstShow",m);C.srcControl=this;C.backData=s||{};C.data={};v._handleEvent(C)}C=e.Event("BeforeShow",m);C.srcControl=this;C.backData=s||{};C.data=f||{};v._handleEvent(C);this._pageStack.pop();e.sap.log.info(this.toString()+": navigating back to page "+v.toString());this._mVisitedPages[c]=true;if(n==="backToTop"){this._pageStack=[];e.sap.log.info(this.toString()+": navigating back to top");this.getCurrentPage()}else if(n==="backToPage"){var b=[],I;while(this._pageStack[this._pageStack.length-1].id!==d){I=this._pageStack.pop();b.push(I.id)}e.sap.log.info(this.toString()+": navigating back to specific page "+v.toString()+" across the pages: "+b.join(", "))}if(!this.getDomRef()){e.sap.log.info("'Hidden' back navigation in not-rendered NavContainer "+this.toString());return this}var S=o.transitions[g]||o.transitions["slide"];var N=this._iTransitionsCompleted;var k=this;window.setTimeout(function(){if(k&&k._iTransitionsCompleted<N+1){e.sap.log.warning("Transition '"+g+"' 'back' was triggered five seconds ago, but has not yet invoked the end-of-transition callback.")}},l(5e3));this._bNavigating=true;var T;if(!(T=v.getDomRef())||T.parentNode!=this.getDomRef()||i.isPreservedContent(T)){v.addStyleClass("sapMNavItemRendering");e.sap.log.debug("Rendering 'to' page '"+v.toString()+"' for back navigation");var _=sap.ui.getCore().createRenderManager();var w=this.$().children().index(u.getDomRef());_.renderControl(v);_.flush(this.getDomRef(),false,w);_.destroy();v.addStyleClass("sapMNavItemHidden").removeStyleClass("sapMNavItemRendering")}if(u.getId()===v.getId()){e.sap.log.info("Transition is skipped when navigating back to the same page instance"+v.toString());this._afterTransitionCallback(m,f,s);return this}S.back.call(this,u,v,e.proxy(function(){this._afterTransitionCallback(m,f,s)},this),r)}}return this};o.prototype._findClosestPreviousPageInfo=function(e){for(var t=this._pageStack.length-2;t>=0;t--){var a=this._pageStack[t];if(a.id===e){return a}}return null};o.transitions=o.transitions||{};o.transitions["show"]={to:function(e,t,a){t.removeStyleClass("sapMNavItemHidden");e&&e.addStyleClass("sapMNavItemHidden");a()},back:function(e,t,a){t.removeStyleClass("sapMNavItemHidden");e&&e.addStyleClass("sapMNavItemHidden");a()}};o.transitions["slide"]={to:function(t,a,i){t.addStyleClass("sapMNavItemCenter");window.setTimeout(function(){a.addStyleClass("sapMNavItemRight");a.removeStyleClass("sapMNavItemHidden");window.setTimeout(function(){var n=false;var s=true;var o=null;o=function(){e(this).unbind("webkitTransitionEnd transitionend");if(!n){n=true}else{s=false;if(d(a)){a.removeStyleClass("sapMNavItemSliding").removeStyleClass("sapMNavItemCenter")}if(d(t)){t.removeStyleClass("sapMNavItemSliding").addStyleClass("sapMNavItemHidden").removeStyleClass("sapMNavItemLeft")}i()}};t.$().bind("webkitTransitionEnd transitionend",o);a.$().bind("webkitTransitionEnd transitionend",o);a.addStyleClass("sapMNavItemSliding").addStyleClass("sapMNavItemCenter").removeStyleClass("sapMNavItemRight");t.addStyleClass("sapMNavItemSliding").removeStyleClass("sapMNavItemCenter").addStyleClass("sapMNavItemLeft");window.setTimeout(function(){if(s){n=true;o.apply(t.$().add(a.$()))}},l(400))},l(60))},0)},back:function(t,a,i){a.addStyleClass("sapMNavItemLeft");a.removeStyleClass("sapMNavItemHidden");t.addStyleClass("sapMNavItemCenter");window.setTimeout(function(){var s=false;var o=true;var r=null;r=function(){e(this).unbind("webkitTransitionEnd transitionend");if(!s){s=true}else{o=false;if(d(a)){a.removeStyleClass("sapMNavItemSliding").removeStyleClass("sapMNavItemCenter")}if(d(t)){t.removeStyleClass("sapMNavItemSliding").addStyleClass("sapMNavItemHidden").removeStyleClass("sapMNavItemRight")}i()}};t.$().bind("webkitTransitionEnd transitionend",r);a.$().bind("webkitTransitionEnd transitionend",r);if(n.browser.webkit){window.setTimeout(function(){a.$().css("box-shadow","0em 1px 0em rgba(128, 128, 1280, 0.1)");window.setTimeout(function(){a.$().css("box-shadow","")},l(50))},0)}a.addStyleClass("sapMNavItemSliding").addStyleClass("sapMNavItemCenter").removeStyleClass("sapMNavItemLeft");t.addStyleClass("sapMNavItemSliding").removeStyleClass("sapMNavItemCenter").addStyleClass("sapMNavItemRight");window.setTimeout(function(){if(o){s=true;r.apply(t.$().add(a.$()))}},l(400))},l(100))}};o.transitions["fade"]={to:function(t,a,i){a.addStyleClass("sapMNavItemTransparent");a.removeStyleClass("sapMNavItemHidden");window.setTimeout(function(){var n=null;var s=true;n=function(){e(this).unbind("webkitTransitionEnd transitionend");s=false;if(d(t)){t.addStyleClass("sapMNavItemHidden")}if(d(a)){a.removeStyleClass("sapMNavItemFading").removeStyleClass("sapMNavItemOpaque")}i()};a.$().bind("webkitTransitionEnd transitionend",n);a.addStyleClass("sapMNavItemFading").removeStyleClass("sapMNavItemTransparent").addStyleClass("sapMNavItemOpaque");window.setTimeout(function(){if(s){n.apply(a.$())}},l(600))},l(10))},back:function(t,a,i){t.addStyleClass("sapMNavItemOpaque");a.removeStyleClass("sapMNavItemHidden");window.setTimeout(function(){var n=null;var s=true;n=function(){e(this).unbind("webkitTransitionEnd transitionend");s=false;if(d(t)){t.removeStyleClass("sapMNavItemFading").addStyleClass("sapMNavItemHidden");t.removeStyleClass("sapMNavItemTransparent")}i()};t.$().bind("webkitTransitionEnd transitionend",n);t.addStyleClass("sapMNavItemFading").removeStyleClass("sapMNavItemOpaque");t.addStyleClass("sapMNavItemTransparent");window.setTimeout(function(){if(s){n.apply(a.$())}},l(600))},l(10))}};o.transitions["flip"]={to:function(t,a,i){var n=this;window.setTimeout(function(){n.$().addClass("sapMNavFlip");a.addStyleClass("sapMNavItemFlipNext");a.removeStyleClass("sapMNavItemHidden");window.setTimeout(function(){var s=false;var o=true;var r=null;r=function(){e(this).unbind("webkitTransitionEnd transitionend");if(!s){s=true}else{o=false;if(d(a)){a.removeStyleClass("sapMNavItemFlipping")}if(d(t)){t.removeStyleClass("sapMNavItemFlipping").addStyleClass("sapMNavItemHidden").removeStyleClass("sapMNavItemFlipPrevious")}n.$().removeClass("sapMNavFlip");i()}};t.$().bind("webkitTransitionEnd transitionend",r);a.$().bind("webkitTransitionEnd transitionend",r);a.addStyleClass("sapMNavItemFlipping").removeStyleClass("sapMNavItemFlipNext");t.addStyleClass("sapMNavItemFlipping").addStyleClass("sapMNavItemFlipPrevious");window.setTimeout(function(){if(o){s=true;r.apply(t.$().add(a.$()))}},l(600))},l(60))},0)},back:function(t,a,i){var n=this;n.$().addClass("sapMNavFlip");a.addStyleClass("sapMNavItemFlipPrevious");a.removeStyleClass("sapMNavItemHidden");window.setTimeout(function(){var s=false;var o=true;var r=null;r=function(){e(this).unbind("webkitTransitionEnd transitionend");if(!s){s=true}else{o=false;if(d(a)){a.removeStyleClass("sapMNavItemFlipping")}if(d(t)){t.removeStyleClass("sapMNavItemFlipping").addStyleClass("sapMNavItemHidden").removeStyleClass("sapMNavItemFlipNext")}n.$().removeClass("sapMNavFlip");i()}};t.$().bind("webkitTransitionEnd transitionend",r);a.$().bind("webkitTransitionEnd transitionend",r);a.addStyleClass("sapMNavItemFlipping").removeStyleClass("sapMNavItemFlipPrevious");t.addStyleClass("sapMNavItemFlipping").addStyleClass("sapMNavItemFlipNext");window.setTimeout(function(){if(o){s=true;r.apply(t.$().add(a.$()))}},l(600))},l(60))}};o.transitions["door"]={to:function(t,a,i){var n=this;window.setTimeout(function(){n.$().addClass("sapMNavDoor");a.addStyleClass("sapMNavItemDoorInNext");a.removeStyleClass("sapMNavItemHidden");window.setTimeout(function(){var s=false;var o=true;var r=null;r=function(){e(this).unbind("webkitAnimationEnd animationend");if(!s){s=true}else{o=false;if(d(a)){a.removeStyleClass("sapMNavItemDooring").removeStyleClass("sapMNavItemDoorInNext")}if(d(t)){t.removeStyleClass("sapMNavItemDooring").addStyleClass("sapMNavItemHidden").removeStyleClass("sapMNavItemDoorInPrevious")}n.$().removeClass("sapMNavDoor");i()}};t.$().bind("webkitAnimationEnd animationend",r);a.$().bind("webkitAnimationEnd animationend",r);a.addStyleClass("sapMNavItemDooring");t.addStyleClass("sapMNavItemDooring").addStyleClass("sapMNavItemDoorInPrevious");window.setTimeout(function(){if(o){s=true;r.apply(t.$().add(a.$()))}},l(1e3))},l(60))},0)},back:function(t,a,i){var n=this;n.$().addClass("sapMNavDoor");a.addStyleClass("sapMNavItemDoorOutNext");a.removeStyleClass("sapMNavItemHidden");window.setTimeout(function(){var s=false;var o=true;var r=null;r=function(){e(this).unbind("webkitAnimationEnd animationend");if(!s){s=true}else{o=false;if(d(a)){a.removeStyleClass("sapMNavItemDooring").removeStyleClass("sapMNavItemDoorOutNext")}if(d(t)){t.removeStyleClass("sapMNavItemDooring").addStyleClass("sapMNavItemHidden").removeStyleClass("sapMNavItemDoorOutPrevious")}n.$().removeClass("sapMNavDoor");i()}};t.$().bind("webkitAnimationEnd animationend",r);a.$().bind("webkitAnimationEnd animationend",r);a.addStyleClass("sapMNavItemDooring");t.addStyleClass("sapMNavItemDooring").addStyleClass("sapMNavItemDoorOutPrevious");window.setTimeout(function(){if(o){s=true;r.apply(t.$().add(a.$()))}},l(1e3))},l(60))}};o.prototype.addCustomTransition=function(t,a,i){if(o.transitions[t]){e.sap.log.warning("Transition with name "+t+" already exists in "+this+". It is now being replaced by custom transition.")}o.transitions[t]={to:a,back:i};return this};o.addCustomTransition=o.prototype.addCustomTransition;o.prototype.forceInvalidation=o.prototype.invalidate;o.prototype.invalidate=function(e){if(e==this){}else if(!e){this.forceInvalidation()}else if(e instanceof a){var t=false,i=this.getPages(),n=i.length;for(var s=0;s<n;s++){if(i[s]===e){t=true;break}}if((!t||e===this.getCurrentPage())&&!this._isInsideAPopup()){this.forceInvalidation()}}else{this.forceInvalidation()}};o.prototype._isInsideAPopup=function(){var e;e=function(t){if(!t){return false}if(t.getMetadata().isInstanceOf("sap.ui.core.PopupInterface")){return true}return e(t.getParent())};return e(this)};o.prototype.removePage=function(e){e=this.removeAggregation("pages",e,e!==this.getCurrentPage());this._onPageRemoved(e);return e};o.prototype._onPageRemoved=function(e){if(!e){return}e.$().remove();e.removeStyleClass("sapMNavItemHidden");e.removeStyleClass("sapMNavItem");var t=this._ensurePageStackInitialized();this._pageStack=t.filter(function(t){return e.getId()!==t.id})};o.prototype.removeAllPages=function(){var e=this.getPages();if(!e){return[]}for(var t=0;t<e.length;t++){this._onPageRemoved(e[t])}return this.removeAllAggregation("pages")};o.prototype.addPage=function(t){var a=this.getPages();if(e.inArray(t,a)>-1){return this}this.addAggregation("pages",t,true);t.addStyleClass("sapMNavItem");var i=a.length;if(i===0&&this.getPages().length===1&&this.getDomRef()){this._ensurePageStackInitialized();this.rerender();this._fireAdaptableContentChange(t)}return this};o.prototype.insertPage=function(e,t){var a=this.getPages().length;this.insertAggregation("pages",e,t,true);e.addStyleClass("sapMNavItem");if(a===0&&this.getPages().length===1&&this.getDomRef()){this._ensurePageStackInitialized();this.rerender();this._fireAdaptableContentChange(e)}return this};o.prototype._getAdaptableContent=function(){return this.getCurrentPage()};o.prototype._fireAdaptableContentChange=function(e){if(e&&this.mEventRegistry["_adaptableContentChange"]){this.fireEvent("_adaptableContentChange",{parent:this,adaptableContent:e})}};return o});