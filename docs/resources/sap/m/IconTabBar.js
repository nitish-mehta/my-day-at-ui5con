/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","./library","sap/ui/core/Control","sap/ui/base/ManagedObject","./IconTabBarRenderer"],function(e,t,n,r,a){"use strict";var o=t.IconTabHeaderMode;var i=t.BackgroundDesign;var s=t.IconTabDensityMode;var p=n.extend("sap.m.IconTabBar",{metadata:{interfaces:["sap.m.ObjectHeaderContainer"],library:"sap.m",properties:{showSelection:{type:"boolean",group:"Misc",defaultValue:true,deprecated:true},expandable:{type:"boolean",group:"Misc",defaultValue:true},expanded:{type:"boolean",group:"Misc",defaultValue:true},selectedKey:{type:"string",group:"Data",defaultValue:null},upperCase:{type:"boolean",group:"Appearance",defaultValue:false},stretchContentHeight:{type:"boolean",group:"Appearance",defaultValue:false},applyContentPadding:{type:"boolean",group:"Appearance",defaultValue:true},backgroundDesign:{type:"sap.m.BackgroundDesign",group:"Appearance",defaultValue:i.Solid},headerMode:{type:"sap.m.IconTabHeaderMode",group:"Appearance",defaultValue:o.Standard},showOverflowSelectList:{type:"boolean",group:"Appearance",defaultValue:false},headerBackgroundDesign:{type:"sap.m.BackgroundDesign",group:"Appearance",defaultValue:i.Solid},enableTabReordering:{type:"boolean",group:"Behavior",defaultValue:false},tabDensityMode:{type:"sap.m.IconTabDensityMode",group:"Appearance",defaultValue:s.Cozy}},aggregations:{items:{type:"sap.m.IconTab",multiple:true,singularName:"item",forwarding:{getter:"_getIconTabHeader",aggregation:"items",forwardBinding:true}},content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"},_header:{type:"sap.m.IconTabHeader",multiple:false,visibility:"hidden"}},events:{select:{parameters:{item:{type:"sap.m.IconTabFilter"},key:{type:"string"},selectedItem:{type:"sap.m.IconTabFilter"},selectedKey:{type:"string"}}},expand:{parameters:{expand:{type:"boolean"},collapse:{type:"boolean"}}}},designtime:"sap/m/designtime/IconTabBar.designtime"}});p.prototype.clone=function(){var e=n.prototype.clone.apply(this,arguments);var t=this._getIconTabHeader();e.setAggregation("_header",t.clone(),true);return e};p.prototype.setExpanded=function(e){this.setProperty("expanded",e,true);if(this.$().length){this._toggleExpandCollapse(e)}return this};p.prototype.setExpandable=function(e){this.setProperty("expandable",e,true);return this};p.prototype.setHeaderMode=function(e){this.setProperty("headerMode",e,true);this._getIconTabHeader().setMode(e);return this};p.prototype.setTabDensityMode=function(e){this.setProperty("tabDensityMode",e);this._getIconTabHeader().setTabDensityMode(e);return this};p.prototype.setHeaderBackgroundDesign=function(e){this.setProperty("headerBackgroundDesign",e,true);this._getIconTabHeader().setBackgroundDesign(e);return this};p.prototype.setShowOverflowSelectList=function(e){this.setProperty("showOverflowSelectList",e,true);this._getIconTabHeader().setShowOverflowSelectList(e);return this};p.prototype.setEnableTabReordering=function(e){this.setProperty("enableTabReordering",e,true);this._getIconTabHeader().setEnableTabReordering(e);return this};p.prototype._rerenderContent=function(e){var t=this.$("content");if(e&&t.length>0){var n=sap.ui.getCore().createRenderManager();for(var r=0;r<e.length;r++){n.renderControl(e[r])}n.flush(t[0]);n.destroy()}};p.prototype._toggleExpandCollapse=function(t){var n=this.$("content");var r=this._getIconTabHeader().oSelectedItem;if(t===undefined){t=!this.getExpanded()}if(r){r.$().toggleClass("sapMITBSelected",t);r.$().attr({"aria-expanded":t});if(t){r.$().attr({"aria-selected":t})}else{r.$().removeAttr("aria-selected")}}this._iAnimationCounter=this._iAnimationCounter===undefined?1:++this._iAnimationCounter;if(t){if(r){if(this.$("content").children().length===0){var a=r.getContent();if(a.length>0){this._rerenderContent(a)}else{this._rerenderContent(this.getContent())}}n.stop(true,true).slideDown("400",e.proxy(this.onTransitionEnded,this,t));this.$("containerContent").toggleClass("sapMITBContentClosed",!t)}}else{this.$("contentArrow").hide();n.stop(true,true).slideUp("400",e.proxy(this.onTransitionEnded,this,t))}if(!t||r){this.setProperty("expanded",t,true)}this.fireExpand({expand:t,collapse:!t});return this};p.prototype.onTransitionEnded=function(e){var t=this.$("content"),n=this.$("containerContent"),r=this.$("contentArrow");if(this._iAnimationCounter===1){n.toggleClass("sapMITBContentClosed",!e);if(e){r.show();t.css("display","block")}else{r.hide();t.css("display","none")}}this._iAnimationCounter=this._iAnimationCounter>0?--this._iAnimationCounter:0;return this};p.prototype._getIconTabHeader=function(){var e=this.getAggregation("_header");if(!e){e=new sap.m.IconTabHeader(this.getId()+"--header",{});this.setAggregation("_header",e,true)}return e};p.prototype.setShowSelection=function(e){this._getIconTabHeader().setShowSelection(e);return this};p.prototype.getShowSelection=function(){return this._getIconTabHeader().getShowSelection()};p.prototype.setSelectedKey=function(e){this._getIconTabHeader().setSelectedKey(e);return this};p.prototype.getSelectedKey=function(){return this._getIconTabHeader().getSelectedKey()};p.prototype.setSelectedItem=function(e,t){return this._getIconTabHeader().setSelectedItem(e,t)};return p});