/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","sap/ui/base/Metadata","./OverflowToolbarButton","./OverflowToolbarToggleButton","./ToggleButton","./Button","sap/m/library"],function(e,t,o,n,r,a,s){"use strict";var l=s.SelectType;var p=s.ButtonType;var i=t.createClass("sap.m._overflowToolbarHelpers.OverflowToolbarAssociativePopoverControls",{constructor:function(){this._mControlsCache={}}});i.prototype._preProcessSapMButton=function(e){var t=e.getType();this._mControlsCache[e.getId()]={buttonType:t};if(t===p.Default){e.setProperty("type",p.Transparent,true)}if(e.getIcon()){e.addStyleClass("sapMOTAPButtonWithIcon")}else{e.addStyleClass("sapMOTAPButtonNoIcon")}e.attachEvent("_change",this._onSapMButtonUpdated,this)};i.prototype._postProcessSapMButton=function(e){var t=this._mControlsCache[e.getId()];if(e.getType()!==t.buttonType){e.setProperty("type",t.buttonType,true)}e.removeStyleClass("sapMOTAPButtonNoIcon");e.removeStyleClass("sapMOTAPButtonWithIcon");e.detachEvent("_change",this._onSapMButtonUpdated,this)};i.prototype._onSapMButtonUpdated=function(e){var t=e.getParameter("name"),o=e.getSource(),n=o.getId();if(typeof this._mControlsCache[n]==="undefined"){return}if(t==="type"){this._mControlsCache[n]["buttonType"]=o.getType()}};i.prototype._preProcessSapMOverflowToolbarButton=function(e){this._preProcessSapMButton(e);e._bInOverflow=true};i.prototype._postProcessSapMOverflowToolbarButton=function(e){delete e._bInOverflow;this._postProcessSapMButton(e)};i.prototype._preProcessSapMToggleButton=function(e){this._preProcessSapMButton(e)};i.prototype._postProcessSapMToggleButton=function(e){this._postProcessSapMButton(e)};i.prototype._preProcessSapMOverflowToolbarToggleButton=function(e){this._preProcessSapMToggleButton(e);e._bInOverflow=true};i.prototype._postProcessSapMOverflowToolbarToggleButton=function(e){delete e._bInOverflow;this._postProcessSapMToggleButton(e)};i.prototype._preProcessSapMSegmentedButton=function(e){e._toSelectMode()};i.prototype._postProcessSapMSegmentedButton=function(e){e._toNormalMode()};i.prototype._preProcessSapMSelect=function(e){this._mControlsCache[e.getId()]={selectType:e.getType()};if(e.getType()!==l.Default){e.setProperty("type",l.Default,true)}};i.prototype._postProcessSapMSelect=function(e){var t=this._mControlsCache[e.getId()];if(e.getType()!==t.selectType){e.setProperty("type",t.selectType,true)}};i._mSupportedControls={"sap.m.Button":{canOverflow:true,listenForEvents:["press"],noInvalidationProps:["enabled","type"]},"sap.m.MenuButton":{canOverflow:true,listenForEvents:["defaultAction","_menuItemSelected"],noInvalidationProps:["enabled","text","icon"]},"sap.m.OverflowToolbarButton":{canOverflow:true,listenForEvents:["press"],noInvalidationProps:["enabled","type"]},"sap.m.OverflowToolbarToggleButton":{canOverflow:true,listenForEvents:["press"],noInvalidationProps:["enabled","type","pressed"]},"sap.m.CheckBox":{canOverflow:true,listenForEvents:["select"],noInvalidationProps:["enabled","selected"]},"sap.m.ToggleButton":{canOverflow:true,listenForEvents:["press"],noInvalidationProps:["enabled","pressed"]},"sap.m.Select":{canOverflow:true,listenForEvents:["change"],noInvalidationProps:["enabled","selectedKey"]},"sap.m.ComboBox":{canOverflow:true,listenForEvents:[],noInvalidationProps:["enabled","value","selectedItemId","selectedKey"]},"sap.m.SearchField":{canOverflow:true,listenForEvents:["search"],noInvalidationProps:["enabled","value","selectOnFocus"]},"sap.m.SegmentedButton":{canOverflow:true,listenForEvents:["select"],noInvalidationProps:["enabled","selectedKey"]},"sap.m.Input":{canOverflow:true,listenForEvents:[],noInvalidationProps:["enabled","value"]},"sap.m.DateTimeInput":{canOverflow:true,listenForEvents:["change"],noInvalidationProps:["enabled","value","dateValue"]},"sap.m.DatePicker":{canOverflow:true,listenForEvents:["change"],noInvalidationProps:["enabled","value","dateValue","displayFormat","valueFormat","displayFormatType","secondaryCalendarType","minDate","maxDate"]},"sap.m.DateTimePicker":{canOverflow:true,listenForEvents:["change"],noInvalidationProps:["enabled","value","dateValue","displayFormat","valueFormat","displayFormatType","secondaryCalendarType","minDate","maxDate"]},"sap.m.TimePicker":{canOverflow:true,listenForEvents:["change"],noInvalidationProps:["enabled","value","dateValue","displayFormat","valueFormat"]},"sap.m.RadioButton":{canOverflow:false,listenForEvents:[],noInvalidationProps:["enabled","selected"]},"sap.m.Slider":{canOverflow:false,listenForEvents:[],noInvalidationProps:["enabled","value"]},"sap.m.IconTabHeader":{canOverflow:false,listenForEvents:[],noInvalidationProps:["selectedKey"]},"sap.ui.comp.smartfield.SmartField":{canOverflow:true,listenForEvents:["change"],noInvalidationProps:["enabled","value","valueState","showValueHelp","contextEditable","clientSideMandatoryCheck","mandatory","name","placeholder","showSuggestion","tooltipLabel"]},"sap.ui.comp.smartfield.SmartLabel":{canOverflow:true,listenForEvents:[],noInvalidationProps:["enabled"]}};i.getControlConfig=function(t){var o;if(t.getMetadata().getInterfaces().indexOf("sap.m.IOverflowToolbarContent")!==-1){if(typeof t.getOverflowToolbarConfig!=="function"){e.sap.log.error("Required method getOverflowToolbarConfig not implemented by: "+t.getMetadata().getName());return}o=t.getOverflowToolbarConfig();if(typeof o!=="object"){e.sap.log.error("Method getOverflowToolbarConfig implemented, but does not return an object in: "+t.getMetadata().getName());return}return{canOverflow:!!o.canOverflow,listenForEvents:Array.isArray(o.autoCloseEvents)?o.autoCloseEvents:[],noInvalidationProps:Array.isArray(o.propsUnrelatedToSize)?o.propsUnrelatedToSize:[],preProcess:o.onBeforeEnterOverflow,postProcess:o.onAfterExitOverflow}}var n=i.getControlClass(t);o=i._mSupportedControls[n];if(o===undefined){return}var r="_preProcess"+n.split(".").map(u).join("");if(typeof i.prototype[r]==="function"){o.preProcess=i.prototype[r]}var a="_postProcess"+n.split(".").map(u).join("");if(typeof i.prototype[a]==="function"){o.postProcess=i.prototype[a]}return o};i.supportsControl=function(e){var t=i.getControlConfig(e);return typeof t!=="undefined"&&t.canOverflow};i.getControlClass=function(e){if(e instanceof o){return"sap.m.OverflowToolbarButton"}else if(e instanceof n){return"sap.m.OverflowToolbarToggleButton"}else if(e instanceof r){return"sap.m.ToggleButton"}else if(e instanceof a){return"sap.m.Button"}return e.getMetadata().getName()};function u(e){return e.substring(0,1).toUpperCase()+e.substr(1)}return i},false);