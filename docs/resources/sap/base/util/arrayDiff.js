/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/util/equal"],function(r){"use strict";var e=function(e,a,t,o){t=t||function(e,a){return r(e,a)};var n=[];var w=[];var f=[];for(var i=0;i<a.length;i++){var l=a[i];var d=0;var v;if(o&&t(e[i],l)){d=1;v=i}else{for(var h=0;h<e.length;h++){if(t(e[h],l)){d++;v=h;if(o||d>1){break}}}}if(d==1){var s={oldIndex:v,newIndex:i};if(f[v]){delete n[v];delete w[f[v].newIndex]}else{w[i]={data:a[i],row:v};n[v]={data:e[v],row:i};f[v]=s}}}for(var i=0;i<a.length-1;i++){if(w[i]&&!w[i+1]&&w[i].row+1<e.length&&!n[w[i].row+1]&&t(e[w[i].row+1],a[i+1])){w[i+1]={data:a[i+1],row:w[i].row+1};n[w[i].row+1]={data:n[w[i].row+1],row:i+1}}}for(var i=a.length-1;i>0;i--){if(w[i]&&!w[i-1]&&w[i].row>0&&!n[w[i].row-1]&&t(e[w[i].row-1],a[i-1])){w[i-1]={data:a[i-1],row:w[i].row-1};n[w[i].row-1]={data:n[w[i].row-1],row:i-1}}}var u=[];if(a.length==0){for(var i=0;i<e.length;i++){u.push({index:0,type:"delete"})}}else{var g=0;if(!n[0]){for(var i=0;i<e.length&&!n[i];i++){u.push({index:0,type:"delete"});g=i+1}}for(var i=0;i<a.length;i++){if(!w[i]||w[i].row>g){u.push({index:i,type:"insert"})}else{g=w[i].row+1;for(var h=w[i].row+1;h<e.length&&(!n[h]||n[h].row<i);h++){u.push({index:i+1,type:"delete"});g=h+1}}}}return u};return e});