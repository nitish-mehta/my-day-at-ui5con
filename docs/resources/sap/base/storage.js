/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./assert"],function(e){"use strict";var t=function(r){var n=!!(r.JSON&&JSON.parse&&JSON.stringify);var s="state.key_";var i=function(t,i){var u="unknown",o=i||s;o+="-";var a=o+"___sapui5TEST___",f;if(!t||typeof t==="string"){u=t||"session";try{f=r[u+"Storage"]}catch(e){f=null}try{if(f){f.setItem(a,"1");f.removeItem(a)}}catch(e){f=null}}else if(typeof t==="object"){u=t.getType?t.getType():"unknown";f=t}var p=!!f;this.isSupported=function(){if(!p){return false}if(typeof f.isSupported=="function"){return f.isSupported()}return true};this.put=function(t,r){e(typeof t==="string"&&t,"sId must be a non-empty string");e(typeof r==="string"||n,"sStateToStore must be string or JSON must be supported");if(this.isSupported()&&t){try{f.setItem(o+t,n?JSON.stringify(r):r);return true}catch(e){return false}}else{return false}};this.get=function(t){e(typeof t==="string"&&t,"sId must be a non-empty string");if(this.isSupported()&&t){try{var r=f.getItem(o+t);return n?JSON.parse(r):r}catch(e){return null}}else{return null}};this.remove=function(t){e(typeof t==="string"&&t,"sId must be a non-empty string");if(this.isSupported()&&t){try{f.removeItem(o+t);return true}catch(e){return false}}else{return false}};this.removeAll=function(e){if(this.isSupported()&&f.length&&typeof f.key==="function"){try{var t=f.length;var r=[];var n,s;var i=o+(e||"");for(s=0;s<t;s++){n=f.key(s);if(n&&n.indexOf(i)==0){r.push(n)}}for(s=0;s<r.length;s++){f.removeItem(r[s])}return true}catch(e){return false}}else{return false}};this.clear=function(){if(this.isSupported()){try{f.clear();return true}catch(e){return false}}else{return false}};this.getType=function(){return u}};var u={};var o={getInstance:function(r,n){if(!r){r=t.Type.session}if(typeof r==="string"&&t.Type[r]){var o=r;if(n&&n!=s){o=r+"_"+n}return u[o]||(u[o]=new i(r,n))}e(r instanceof Object&&r.clear&&r.setItem&&r.getItem&&r.removeItem,"storage: duck typing the storage");return new i(r,n)}};i.apply(o.getInstance);u[t.Type.session]=o.getInstance;return o};t.Type={local:"local",session:"session",global:"global"};return t});