/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","./Event","./Object","./ObjectPool"],function(t,e,n,r){"use strict";var i=n.extend("sap.ui.base.EventProvider",{constructor:function(){n.call(this);this.mEventRegistry={}}});var o="EventHandlerChange";i.M_EVENTS={EventHandlerChange:o};i.prototype.oEventPool=new r(e);i.prototype.attachEvent=function(e,n,r,i){var s=this.mEventRegistry;t.sap.assert(typeof e==="string"&&e,"EventProvider.attachEvent: sEventId must be a non-empty string");if(typeof n==="function"){i=r;r=n;n=undefined}t.sap.assert(typeof r==="function","EventProvider.attachEvent: fnFunction must be a function");t.sap.assert(!i||typeof i==="object","EventProvider.attachEvent: oListener must be empty or an object");var a=s[e];if(!Array.isArray(a)){a=s[e]=[]}a.push({oListener:i,fFunction:r,oData:n});if(s[o]){this.fireEvent(o,{EventId:e,type:"listenerAttached",listener:i,func:r,data:n})}return this};i.prototype.attachEventOnce=function(e,n,r,i){if(typeof n==="function"){i=r;r=n;n=undefined}t.sap.assert(typeof r==="function","EventProvider.attachEventOnce: fnFunction must be a function");function o(){this.detachEvent(e,o);r.apply(i||this,arguments)}this.attachEvent(e,n,o,undefined);return this};i.prototype.detachEvent=function(e,n,r){var i=this.mEventRegistry;t.sap.assert(typeof e==="string"&&e,"EventProvider.detachEvent: sEventId must be a non-empty string");t.sap.assert(typeof n==="function","EventProvider.detachEvent: fnFunction must be a function");t.sap.assert(!r||typeof r==="object","EventProvider.detachEvent: oListener must be empty or an object");var s=i[e];if(!Array.isArray(s)){return this}var r;for(var a=0,v=s.length;a<v;a++){if(s[a].fFunction===n&&s[a].oListener===r){r=s[a];s.splice(a,1);break}}if(s.length==0){delete i[e]}if(r&&i[o]){this.fireEvent(o,{EventId:e,type:"listenerDetached",listener:r.listener,func:r.fFunction,data:r.oData})}return this};i.prototype.fireEvent=function(t,e,n,r){if(typeof e==="boolean"){r=n;n=e}var i=this,o=false,s,a,v,f,u;do{s=i.mEventRegistry[t];if(Array.isArray(s)){s=s.slice();a=a||this.oEventPool.borrowObject(t,this,e);for(v=0,f=s.length;v<f;v++){u=s[v];u.fFunction.call(u.oListener||i,a,u.oData)}r=r&&!a.bCancelBubble}i=i.getEventingParent()}while(r&&i);if(a){o=a.bPreventDefault;this.oEventPool.returnObject(a)}return n?!o:this};i.prototype.hasListeners=function(t){return!!this.mEventRegistry[t]};i.getEventList=function(t){return t.mEventRegistry};i.hasListener=function(e,n,r,i){t.sap.assert(typeof n==="string"&&n,"EventProvider.hasListener: sEventId must be a non-empty string");t.sap.assert(typeof r==="function","EventProvider.hasListener: fnFunction must be a function");t.sap.assert(!i||typeof i==="object","EventProvider.hasListener: oListener must be empty or an object");var o=e&&e.mEventRegistry[n];if(o){for(var s=0,a=o.length;s<a;s++){if(o[s].fFunction===r&&o[s].oListener===i){return true}}}return false};i.prototype.getEventingParent=function(){return null};i.prototype.toString=function(){if(this.getMetadata){return"EventProvider "+this.getMetadata().getName()}else{return"EventProvider"}};i.prototype.destroy=function(){this.mEventRegistry={};n.prototype.destroy.apply(this,arguments)};return i});