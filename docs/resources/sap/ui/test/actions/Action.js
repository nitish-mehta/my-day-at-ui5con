/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","sap/ui/base/ManagedObject","sap/ui/qunit/QUnitUtils","sap/ui/test/Opa5","sap/ui/Device"],function(e,t,s,i,n){"use strict";return t.extend("sap.ui.test.actions.Action",{metadata:{properties:{idSuffix:{type:"string"}},publicMethods:["executeOn"]},executeOn:function(){return true},$:function(t){var s,i=this._getAdapter(t.getMetadata()),n=this.getIdSuffix()||i;if(n){s=t.$(n)}else{s=e(t.getFocusDomRef())}if(!s.length){var o="Control "+t+" has no dom representation idSuffix was "+n;e.sap.log.error(o,this._sLogPrefix);throw new Error(o)}else{e.sap.log.info("Found a domref for the Control "+t+" the action is going to be executed on the dom id"+s[0].id,this._sLogPrefix)}return s},getUtils:function(){return i.getUtils()||s},init:function(){this.controlAdapters={}},_getAdapter:function(e){var t=this.controlAdapters[e.getName()];if(t){return t}var s=e.getParent();if(s){return this._getAdapter(s)}return null},_tryOrSimulateFocusin:function(t,s){var i=t.is(":focus");var o;var r=t[0];if(i||n.browser.msie&&n.browser.version<12){o=true}else{t.focus();var a=t.is(":focus");o=!a}if(o){e.sap.log.debug("Control "+s+" could not be focused - maybe you are debugging?",this._sLogPrefix);this._createAndDispatchFocusEvent("focusin",r);this._createAndDispatchFocusEvent("focus",r);this._createAndDispatchFocusEvent("activate",r)}},_simulateFocusout:function(e){this._createAndDispatchFocusEvent("focusout",e);this._createAndDispatchFocusEvent("blur",e);this._createAndDispatchFocusEvent("deactivate",e)},_createAndDispatchMouseEvent:function(e,t){var s=0;var i;if(n.browser.phantomJS||n.browser.msie&&n.browser.version<12){i=document.createEvent("MouseEvent");i.initMouseEvent(e,true,true,window,0,0,0,0,0,false,false,false,false,s,t)}else{i=new MouseEvent(e,{bubbles:true,cancelable:true,identifier:1,target:t,radiusX:1,radiusY:1,rotationAngle:0,button:s,type:e})}t.dispatchEvent(i)},_createAndDispatchFocusEvent:function(t,s){var i;if(n.browser.phantomJS){i=document.createEvent("FocusEvent");i.initEvent(t,true,false)}else if(n.browser.msie&&n.browser.version<12){i=document.createEvent("FocusEvent");i.initFocusEvent(t,true,false,window,0,s)}else{i=new FocusEvent(t)}s.dispatchEvent(i);e.sap.log.info("Dispatched focus event: '"+t+"'",this._sLogPrefix)},_sLogPrefix:"sap.ui.test.actions"})});