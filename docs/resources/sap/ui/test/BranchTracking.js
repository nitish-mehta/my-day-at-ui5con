/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
(function(){"use strict";var e=[],t=[],n=/\w/;function r(e,n,r,a){if(n>=0){if(r){t[e].branchTracking[n].truthy=true}else{t[e].branchTracking[n].falsy=true}}if(a>=0){o(e,a)}return r}function a(){var e,t=document.getElementsByTagName("script"),n,r;for(n=0,r=t.length;n<r;n+=1){e=t[n];if(/BranchTracking.js$/.test(e.getAttribute("src"))){return e}}}function i(n,r){var a=blanket.options("branchTracking"),i=false,s,c=e.length,o=n.inputFileName,l,f=n.inputFile,p;if(f.indexOf("// sap-ui-cover-browser msie")>=0){i=true;s=sap.ui.require("sap/ui/Device");if(s&&s.browser.msie){s=undefined}}e.push(o);t[c]=_$blanket[o]=[];if(a){_$blanket[o].branchTracking=[]}_$blanket[o].source=f.split("\n");p=""+falafel(f,{attachComment:i,comment:i,loc:true,range:true,source:f},u.bind(null,a,c,s));l=p.split("\n").length;if(l!==_$blanket[o].source.length){jQuery.sap.log.warning("Line length mismatch! "+_$blanket[o].source.length+" vs. "+l,o,"sap.ui.test.BranchTracking")}r(p)}function s(e,t){if(!("$ignored"in t)){if(t.parent&&s(e,t.parent)){t.$ignored=true}else{t.$ignored=t.type==="BlockStatement"&&c(e,t)}}return t.$ignored}function c(e,t){function n(t){return t.type==="Line"&&t.value===" sap-ui-cover-browser msie"&&!(e&&e.browser.msie)}return t.body[0].leadingComments&&t.body[0].leadingComments.some(n)}function o(e,n){t[e][n]+=1}function u(r,a,i,o){var u=t[a],l=u.branchTracking,f=o.loc.start.line,p;function g(){o.update("blanket.$l("+a+", "+f+"); "+o.source());h();return true}function h(){if(f in u){jQuery.sap.log.warning("Duplicate line "+f,e[a],"sap.ui.test.BranchTracking")}u[f]=0}function m(){var e=o.loc.source.slice(o.left.range[1],o.right.range[0]);if(e[0]===")"){e=e.slice(1)}if(e.slice(-1)==="("){e=e.slice(0,-1)}return e}if(i&&s(i,o)){return false}switch(o.type){case"AssignmentExpression":case"ArrayExpression":case"BlockStatement":case"BinaryExpression":case"Block":case"CallExpression":case"CatchClause":case"DebuggerStatement":case"EmptyStatement":case"FunctionExpression":case"Identifier":case"Line":case"Literal":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"Program":case"Property":case"SequenceExpression":case"SwitchCase":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":case"VariableDeclarator":return false;case"ConditionalExpression":if(!r){return false}o.test.update("blanket.$b("+a+", "+l.length+", "+o.test.source()+")");l.push({alternate:o.alternate.loc,consequent:o.consequent.loc});return true;case"ExpressionStatement":if(o.expression.type==="Literal"&&o.expression.value==="use strict"){return false}case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":case"WithStatement":case"BreakStatement":case"ContinueStatement":case"FunctionDeclaration":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":return g(o);case"IfStatement":if(c(undefined,o.consequent)){r=false}o.test.update("blanket.$b("+a+", "+(r?l.length:-1)+", "+o.test.source()+", "+f+")");h();if(r){l.push({alternate:(o.alternate||o.test).loc,consequent:o.consequent.loc})}return true;case"LogicalExpression":if(!r){return false}if(o.operator==="||"||o.operator==="&&"){p="blanket.$b("+a+", "+l.length+", "+o.left.source()+") "+m()+" ("+o.right.source()+")";if(!n.test(o.loc.source[o.range[0]])){p=" "+p}o.update(p);l.push({alternate:o.operator==="&&"?o.left.loc:o.right.loc,consequent:o.operator==="&&"?o.right.loc:o.left.loc})}return true;case"VariableDeclaration":if(o.parent.type==="ForInStatement"||o.parent.type==="ForStatement"){return false}return g(o);case"LabeledStatement":default:throw new Error(o.source())}}function l(){var e={},t=[],n;QUnit.begin(function(t){n=t.modules.length;t.modules.forEach(function(t){e[t.name]=t})});QUnit.moduleStart(function(n){t=t.concat(Object.keys(e).filter(function(t){return e[t].tests===n.tests}))});return function(){return t.length<n?t:undefined}}if(window.blanket){window._$blanket={};blanket.$b=r;blanket.$l=o;blanket.instrument=i;var f=l();sap.ui.require(["sap/ui/test/BlanketReporter"],function(e){blanket.options("reporter",e.bind(null,a(),f))})}var p,g="sap.ui.base.SyncPromise",h,m=0,d={};function b(e){var t,n=Object.keys(d).length,r="Uncaught (in promise): "+n+" times\n",a;if(n){for(t in d){a=d[t];if(a.getResult()&&a.getResult().stack){r+=a.getResult().stack}else{r+=a.getResult()}if(a.$error.stack){r+="\n>>> SyncPromise rejected with above reason...\n"+a.$error.stack.split("\n").slice(2).join("\n")}r+="\n\n"}d={};if(e){e(r)}else if(p){jQuery.sap.log.debug("Clearing "+n+" uncaught promises",r,g)}}}function k(e,t){if(t){delete d[e.$id];if(p){jQuery.sap.log.debug("Promise "+e.$id+" caught",Object.keys(d),g)}return}e.$id=m++;e.$error=new Error;d[e.$id]=e;if(p){jQuery.sap.log.debug("Promise "+e.$id+" rejected with "+e.getResult(),Object.keys(d),g)}}function y(e,t){var n,r;t=t||{};n=t.afterEach||function(){};r=t.beforeEach||function(){};t.afterEach=function(e){var t=b.bind(null,e.ok.bind(e,false));function r(e){t();throw e}function a(e){if(e&&typeof e.then==="function"){return e.then(a,r)}t();return e}try{return a(n.apply(this,arguments))}catch(e){r(e)}};t.beforeEach=function(){b();return r.apply(this,arguments)};h(e,t)}if(QUnit&&QUnit.module!==y){h=QUnit.module.bind(QUnit);QUnit.module=y;sap.ui.require(["sap/ui/base/SyncPromise","jquery.sap.global"],function(e){p=jQuery.sap.log.isLoggable(jQuery.sap.log.Level.DEBUG,g);e.listener=k});QUnit.config.autostart=false;sap.ui.require(["sap/ui/core/Core"],function(e){var t=sap.ui.getCore();t.attachInit(function(){function e(){try{t.detachThemeChanged(e);QUnit.start()}catch(e){}}if(t.isThemeApplied()){e()}else{t.attachThemeChanged(e)}})});QUnit.begin(function(){jQuery("#qunit-modulefilter-dropdown-list").css("max-height","none");jQuery("#qunit-modulefilter-dropdown").click(function(e){if(e.target.tagName==="LABEL"){setTimeout(function(){jQuery("#qunit-modulefilter-actions").children().first().click()})}})})}})();