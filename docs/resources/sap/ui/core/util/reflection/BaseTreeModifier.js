/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/ManagedObject","sap/ui/base/ManagedObjectMetadata","jquery.sap.global","jquery.sap.xml"],function(e,t,n){"use strict";return{bySelector:function(e,t,n){var r=this.getControlIdBySelector(e,t);return this._byId(r,n)},getControlIdBySelector:function(e,t){if(!e){return undefined}if(typeof e==="string"){e={id:e}}var n=e.id;if(e.idIsLocal){if(t){n=t.createId(n)}else{throw new Error("App Component instance needed to get a control's ID from selector")}}else{var r=/^application-[^-]*-[^-]*-component---/gim;var o=!!r.exec(e.id);if(o){n=n.replace(/^application-[^-]*-[^-]*-component---/g,"");if(t){n=t.createId(n)}else{throw new Error("App Component instance needed to get a control's ID from selector")}}}return n},getSelector:function(t,r,o){var i=t;if(t instanceof e){i=t.getId()}else if(!r){throw new Error("App Component instance needed to get a selector from string ID")}if(o&&(o.id||o.idIsLocal)){throw new Error("A selector of control with the ID '"+i+"' was requested, "+"but core properties were overwritten by the additionally passed information.")}var a=this.checkControlId(t,r);if(!a){throw new Error("Generated ID attribute found - to offer flexibility a stable control ID is needed to assign the changes to, but for this control the ID was generated by SAPUI5 "+i)}var s=n.extend(o||{},{id:"",idIsLocal:false},true);if(this.hasLocalIdSuffix(t,r)){var f=r.getLocalId(i);s.id=f;s.idIsLocal=true}else{s.id=i}return s},checkControlId:function(r,o,i){var a=r instanceof e?r.getId():r;var s=t.isGeneratedId(a);if(!s||this.hasLocalIdSuffix(r,o)){return true}else{var f=a.indexOf("--")!==-1;if(!i&&!f&&this._fnCheckElementIsNoClone(r)){n.sap.log.warning("Generated id attribute found, to offer flexibility a stable control id is needed "+"to assign the changes to, but for this control the id was generated by SAPUI5",a)}return false}},hasLocalIdSuffix:function(t,r){var o=t instanceof e?t.getId():t;if(!r){n.sap.log.error("determination of a local id suffix failed due to missing app component for "+o);return false}return!!r.getLocalId(o)},_fnCheckElementIsNoClone:function(e){var t=true;if(e.getBindingContext&&e.getBindingContext()){var n=e.getBindingContext().getPath().split("/");var r=n[n.length-1];t=isNaN(r)}return t},_checkAndPrefixIdsInFragment:function(e,t){var r=n.sap.getParseError(e);if(r.errorCode!==0){throw new Error(e.parseError.reason)}var o=e.documentElement;var i=[],a=[];if(o.localName==="FragmentDefinition"){i=this._getElementNodeChildren(o)}else{i=[o]}a=[].concat(i);function s(e){a.push(e)}for(var f=0,c=i.length;f<c;f++){this._traverseXmlTree(s,i[f])}for(var l=0,d=a.length;l<d;l++){if(a[l].getAttribute("id")){a[l].setAttribute("id",t+"."+a[l].getAttribute("id"))}else{throw new Error("At least one control does not have a stable ID")}}return o},_getElementNodeChildren:function(e){var t=[];var n=e.childNodes;for(var r=0,o=n.length;r<o;r++){if(n[r].nodeType===1){t.push(n[r])}}return t},_isInstanceOf:function(e,t){var r=n.sap.getObject(t);if(typeof r==="function"){return e instanceof r}else{return false}},_hasInterface:function(e,t){var n=e.getMetadata().getInterfaces();return n.indexOf(t)!==-1},_getControlMetadataInXml:function(e){var t=this._getControlTypeInXml(e);n.sap.require(t);var r=n.sap.getObject(t);return r.getMetadata()},_getControlTypeInXml:function(e){var t=e.namespaceURI;t=t?t+".":"";t+=e.localName;return t},_traverseXmlTree:function(e,t){function n(t,r,o){var i;if(!o){var a=this._getControlMetadataInXml(r);i=a.getAllAggregations()}var s=this._getElementNodeChildren(r);s.forEach(function(t){var o=i&&i[t.localName];n.call(this,r,t,o);if(!o){e(t)}}.bind(this))}n.call(this,t,t,false)},setVisible:function(e,t){},getVisible:function(e){},setStashed:function(e,t){},getStashed:function(e){},bindProperty:function(e,t,n){},unbindProperty:function(e,t){},setProperty:function(e,t,n){},getProperty:function(e,t){},isPropertyInitial:function(e,t){},setPropertyBinding:function(e,t,n){},getPropertyBinding:function(e,t){},createControl:function(e,t,n,r,o){},getId:function(e){},getParent:function(e){},getControlType:function(e){},getAllAggregations:function(e){},getAggregation:function(e,t){},insertAggregation:function(e,t,n,r,o){},removeAggregation:function(e,t,n){},removeAllAggregation:function(e,t){},getBindingTemplate:function(e,t){},updateAggregation:function(e,t){},findIndexInParentAggregation:function(e){},getParentAggregationName:function(e,t){},validateType:function(e,t,n,r,o){},instantiateFragment:function(e,t,n){},getChangeHandlerModulePath:function(e){}}});