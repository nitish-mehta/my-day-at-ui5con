/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","sap/ui/base/Object","sap/ui/base/EventProvider"],function(e,t,s){"use strict";var n=t.extend("sap.ui.core.EventBus",{constructor:function(){t.apply(this);this._mChannels={};this._defaultChannel=new s}});n.prototype.subscribe=function(t,s,n,i){if(typeof s==="function"){i=n;n=s;s=t;t=null}e.sap.assert(!t||typeof t==="string","EventBus.subscribe: sChannelId must be empty or a non-empty string");e.sap.assert(typeof s==="string"&&s,"EventBus.subscribe: sEventId must be a non-empty string");e.sap.assert(typeof n==="function","EventBus.subscribe: fnFunction must be a function");e.sap.assert(!i||typeof i==="object","EventBus.subscribe: oListener must be empty or an object");var u=r(this,t);u.attachEvent(s,n,i);return this};n.prototype.subscribeOnce=function(e,t,s,n){if(typeof t==="function"){n=s;s=t;t=e;e=null}function i(){this.unsubscribe(e,t,i,undefined);s.apply(n||this,arguments)}return this.subscribe(e,t,i,undefined)};n.prototype.unsubscribe=function(t,n,r,u){if(typeof n==="function"){u=r;r=n;n=t;t=null}e.sap.assert(!t||typeof t==="string","EventBus.unsubscribe: sChannelId must be empty or a non-empty string");e.sap.assert(typeof n==="string"&&n,"EventBus.unsubscribe: sEventId must be a non-empty string");e.sap.assert(typeof r==="function","EventBus.unsubscribe: fnFunction must be a function");e.sap.assert(!u||typeof u==="object","EventBus.unsubscribe: oListener must be empty or an object");var a=i(this,t);if(!a){return this}a.detachEvent(n,r,u);if(a!=this._defaultChannel){var o=s.getEventList(a);var p=true;for(var l in o){if(a.hasListeners(l)){p=false;break}}if(p){delete this._mChannels[t]}}return this};n.prototype.publish=function(t,n,r){if(arguments.length==1){r=null;n=t;t=null}else if(arguments.length==2){if(typeof n!="string"){r=n;n=t;t=null}}r=r?r:{};e.sap.assert(!t||typeof t==="string","EventBus.publish: sChannelId must be empty or a non-empty string");e.sap.assert(typeof n==="string"&&n,"EventBus.publish: sEventId must be a non-empty string");e.sap.assert(typeof r==="object","EventBus.publish: oData must be an object");var u=i(this,t);if(!u){if(e.sap.log.isLoggable(e.sap.log.Level.DEBUG,"sap.ui.core.EventBus")){e.sap.log.debug("Failed to publish into channel '"+t+"'."+" No such channel.",t,"sap.ui.core.EventBus")}return}var a=s.getEventList(u)[n];if(Array.isArray(a)){a=a.slice();var o;for(var p=0,l=a.length;p<l;p++){o=a[p];this._callListener(o.fFunction,o.oListener||this,t,n,r)}}else if(e.sap.log.isLoggable(e.sap.log.Level.DEBUG,"sap.ui.core.EventBus")){e.sap.log.debug("Failed to publish Event '"+n+"' in '"+t+"'."+" No listeners found.",t+"#"+n,"sap.ui.core.EventBus")}};n.prototype.getInterface=function(){return this};n.prototype._callListener=function(e,t,s,n,i){e.call(t,s,n,i)};n.prototype.destroy=function(){this._defaultChannel.destroy();for(var e in this._mChannels){this._mChannels[e].destroy()}this._mChannels={};t.prototype.destroy.apply(this,arguments)};function i(e,t){if(!t){return e._defaultChannel}return e._mChannels[t]}function r(e,t){var n=i(e,t);if(!n&&t){e._mChannels[t]=new s;n=e._mChannels[t]}return n}return n});