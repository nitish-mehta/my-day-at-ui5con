/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","sap/ui/core/Popup","../Plugin","../Support"],function(t,e,i,o){"use strict";var s=i.extend("sap.ui.core.support.plugins.Selector",{constructor:function(t){i.apply(this,["sapUiSupportSelector","",t]);this._aEventIds=[this.getId()+"Highlight"];this._oPopup=new e}});s.prototype.isToolPlugin=function(){return false};s.prototype.onsapUiSupportSelectorHighlight=function(t){r(t.getParameter("id"),this,t.getParameter("sendInfo"))};s.prototype.init=function(e){i.prototype.init.apply(this,arguments);var o;if(!this._sPopupId){this._sPopupId=this.getId()+"-"+t.sap.uid();var s=sap.ui.getCore().createRenderManager();s.write("<div id='"+this._sPopupId+"' style='border: 2px solid rgb(0, 128, 0); background-color: rgba(0, 128, 0, .55);'></div>");s.flush(sap.ui.getCore().getStaticAreaRef(),false,true);s.destroy();o=t.sap.byId(this._sPopupId);this._oPopup.setContent(o[0])}else{o=t.sap.byId(this._sPopupId)}var n=this;this._fSelectHandler=function(e){if(!e.shiftKey||!e.altKey||!e.ctrlKey){return}var i=t(e.target).closest("[data-sap-ui]").attr("id");if(r(i,n,true)){e.stopPropagation();e.preventDefault()}};this._fCloseHandler=function(t){n._oPopup.close(0)};o.bind("click",this._fCloseHandler);t(document).bind("mousedown",this._fSelectHandler)};s.prototype.exit=function(e){this._oPopup.close(0);if(this._fCloseHandler){t.sap.byId(this._sPopupId).unbind("click",this._fCloseHandler);this._fCloseHandler=null}if(this._fSelectHandler){t(document).unbind("mousedown",this._fSelectHandler);this._fSelectHandler=null}i.prototype.exit.apply(this,arguments)};function r(e,i,s){if(e){var r=sap.ui.getCore().byId(e);if(r){var p=t.sap.byId(i._sPopupId);var u=r.$();if(u.is(":visible")){p.width(u.outerWidth());p.height(u.outerHeight());i._oPopup.open(0,"BeginTop","BeginTop",u[0],"0 0","none");if(s){o.getStub().sendEvent(i.getId()+"Select",n(r,i))}setTimeout(function(){i._oPopup.close(0)},1e3);return true}}}return false}function n(t,e){return{id:t.getId()}}return s});