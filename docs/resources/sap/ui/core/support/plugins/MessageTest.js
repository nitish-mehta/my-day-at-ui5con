/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","../Plugin","../Support"],function(t,e,s){"use strict";var i=e.extend("sap.ui.core.support.plugins.MessageTest",{constructor:function(t){e.apply(this,["sapUiSupportMessageTest","Support Tool Communication Test",t]);this._aEventIds=[this.getId()+"Msg",s.EventType.SETUP,s.EventType.TEAR_DOWN];this._bFirstTime=true}});i.prototype.onsapUiSupportMessageTestMsg=function(t){this.$("Panel").removeClass("sapUiSupportHidden");n(this,this.getId()+"Msg",t.getParameter("message"),true)};i.prototype.init=function(t){e.prototype.init.apply(this,arguments);var i=this;if(this._bFirstTime){this._bFirstTime=false;this.$("Panel").addClass("sapUiSupportHidden")}var p=sap.ui.getCore().createRenderManager();p.write("<div class='sapUiSupportToolbar'>");p.write("<input type='text' id='"+this.getId()+"-input' class='sapUiSupportTxtFld'/>");p.write("<button id='"+this.getId()+"-send' class='sapUiSupportRoundedButton'>Send</button>");p.write("</div><div class='sapUiSupportMessageCntnt'></div>");p.flush(this.$().get(0));p.destroy();this._fSendHandler=function(){var e=i.$("input").val();t.sendEvent(i.getId()+"Msg",{message:e});n(i,i.getId()+"Msg",e,false)};this.$("send").bind("click",this._fSendHandler);n(this,s.EventType.SETUP,"",true)};i.prototype.exit=function(t){n(this,s.EventType.TEAR_DOWN,"",true);if(this._fSendHandler){this.$("send").unbind("click",this._fSendHandler);this._fSendHandler=null}e.prototype.exit.apply(this,arguments)};function n(e,s,i,n){t(".sapUiSupportMessageCntnt",e.$()).append('<b style="color:'+(n?"green":"blue")+";\">Message '"+s+"' "+(n?"received":"send")+(i?":</b> "+t.sap.escapeHTML(i):"</b>")+"<br>")}return i});