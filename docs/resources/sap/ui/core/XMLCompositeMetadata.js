/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","sap/ui/core/ElementMetadata","sap/ui/core/XMLTemplateProcessor"],function(t,e,a){"use strict";var r={Render:true,Template:"template",None:false};var n={};var i=function(a,r){if(!r.hasOwnProperty("renderer")){r.renderer="sap.ui.core.XMLCompositeRenderer"}if(!r.hasOwnProperty("alias")){r.alias="this"}e.apply(this,arguments);var n=this._bAbstract;if(!n){if(!r.fragment&&a!=="sap.ui.core.XMLComposite"){r.fragment=a;r.fragmentUnspecified=true}if(!this._fragment&&r.fragment){try{if(!this._fragment){this._fragment=this._loadFragment(r.fragment,"control")}if(r.aggregationFragments){this._aggregationFragments={};r.aggregationFragments.forEach(function(t){this._aggregationFragments[t]=this._loadFragment(r.fragment+"_"+t,"aggregation")}.bind(this))}}catch(e){if(!r.fragmentUnspecified){throw e}else{t.sap.log.warning("Implicitly inferred fragment xml "+r.fragment+" not found. "+a+" is not abstract!")}}}}this._sCompositeAggregation=r.metadata?r.metadata.compositeAggregation||null:null;this._createPrivateAggregationAccessors();this._applyAggregationSettings()};i.prototype=Object.create(e.prototype);i.uid=e.uid;i.prototype.getCompositeAggregationName=function(){return this._sCompositeAggregation||"_content"};i.prototype.getFragment=function(){if(this._fragment){return this._fragment.cloneNode(true)}};i.prototype._applyAggregationSettings=function(){var t=this.getAllAggregations();for(var e in t){if(t[e].type==="TemplateMetadataContext"){this.getAggregation(e)._doesNotRequireFactory=true}}};i.prototype._createPrivateAggregationAccessors=function(){var t=this.getAllPrivateAggregations(),e=this.getClass().prototype,a=function(t,a){if(!e[t]){e[t]=a}};for(var r in t){t[r].generate(a)}};i.prototype._suppressInvalidate=function(t,e){if(e){return true}if(!t.appData){t.appData={};t.appData.invalidate=r.None}if(t&&t.appData&&t.appData.invalidate===r.Render){return false}return true};i.prototype._requestFragmentRetemplatingCheck=function(t,e,a){if(!t._bIsCreating&&!t._bIsBeingDestroyed&&e&&e.appData&&e.appData.invalidate===r.Template&&!t._requestFragmentRetemplatingPending){if(t.requestFragmentRetemplating){t._requestFragmentRetemplatingPending=true;setTimeout(function(){t.requestFragmentRetemplating(a);t._requestFragmentRetemplatingPending=false},0)}else{throw new Error("Function requestFragmentRetemplating not available although invalidationMode was set to template")}}};i.prototype.getMandatoryAggregations=function(){if(!this._mMandatoryAggregations){var t=this.getAllAggregations(),e={};for(var a in t){if(t[a].type==="TemplateMetadataContext"&&t[a].appData.mandatory){e[a]=t[a]}}this._mMandatoryAggregations=e}return this._mMandatoryAggregations};i.prototype.requireFor=function(e){var a=e.getAttribute("template:require");if(a){t.sap.require.apply(t.sap,a.split(" "))}};i.prototype._loadFragment=function(t,e){if(!n[t]){n[t]=a.loadTemplate(t,e);this.requireFor(n[t])}return n[t]};i.prototype.hasAggregation=function(t){return!!this._mAllAggregations[t]||!!this._mAllPrivateAggregations[t]};return i},true);