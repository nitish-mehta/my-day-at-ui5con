/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","./Control","sap/ui/model/control/ControlModel","sap/ui/base/EventProvider"],function(t,o,e,n){"use strict";var s={};s.mixInto=function(e,n,s){if(arguments.length==2&&typeof n==="object"){s=n;n="ComponentFactory"}t.sap.assert(typeof e==="function"&&e.prototype instanceof o,"CompositeSupport.mixInto: fnClass must be a subclass of Control");t.sap.assert(typeof n==="string"&&n,"CompositeSupport.mixInto: sFactoryName must be a non-empty string");t.sap.assert(typeof s==="object","oMethods must be an object");function r(){var t=e.getMetadata();do{t=t.getParent();if(t&&t.getComponentFactoryClass){return t.getComponentFactoryClass()}}while(t);return i}e[n]=r().subclass(s);e.getMetadata().getComponentFactoryClass=t.sap.getter(e[n]);if(!e.prototype._initCompositeSupport){e.prototype._initCompositeSupport=function(o){var e=new(this.getMetadata().getComponentFactoryClass())(this);if(o.componentFactory){t.sap.assert(t.isPlainObject(o.componentFactory));e.customize(o.componentFactory);delete o.componentFactory}this.getComponentFactory=t.sap.getter(e)}}if(!e.prototype._exitCompositeSupport){e.prototype._exitCompositeSupport=function(){this.getComponentFactory().destroy();delete this.getComponentFactory}}};var i=n.extend("sap.ui.core.ComponentFactory",{constructor:function(t){n.apply(this);this.oComposite=t;return this}});i.prototype.attachChange=function(t,o){this.getModel();this.attachEvent("change",t,o);return this};i.prototype.detachChange=function(t,o){this.getModel();this.detachEvent("change",t,o);return this};i.prototype.getModel=function(){if(!this.oModel){var t=this;this.oModel=new e(this.oComposite);this.oModel._onchange=function(o){t.fireEvent("change",o.getParameters&&o.getParameters())}}return this.oModel};i.prototype.addFacadeComponent=function(t){this.getModel().add(t)};i.prototype.removeFacadeComponent=function(t){this.getModel().remove(t)};(function(){function o(o,e,n){t.each(e,function(t,e){if(t.indexOf("default")!=0){o[t]=e}if(n&&t.indexOf("create")==0){o["defaultC"+t.substring(1)]=o[t]}})}function e(t){return function(n){var s=function(){t.apply(this,arguments)};s.prototype=Object.create(t.prototype);o(s.prototype,n,true);s.customize=function(t){o(s.prototype,t);return this};s.subclass=e(s);return s}}i.subclass=e(i);i.prototype.customize=function(t){o(this,t);if(this.oComposite&&this.oComposite._onComponentFactoryChanged){this.oComposite._onComponentFactoryChanged()}return this}})();return s},true);