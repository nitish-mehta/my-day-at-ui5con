/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","sap/ui/Device","sap/ui/Global","sap/ui/base/BindingParser","sap/ui/base/DataType","sap/ui/base/EventProvider","sap/ui/base/Interface","sap/ui/base/Object","sap/ui/base/ManagedObject","./Component","./Configuration","./Control","./Element","./ElementMetadata","./FocusHandler","./RenderManager","./ResizeHandler","./ThemeCheck","./UIArea","./message/MessageManager","sap/ui/events/EventSimulation","jquery.sap.act","jquery.sap.dom","jquery.sap.events","jquery.sap.mobile","jquery.sap.properties","jquery.sap.resources","jquery.sap.script","jquery.sap.sjax"],function(e,t,i,r,n,o,a,s,p,u,d,l,f,c,h,g,m,y,b,v){"use strict";var E=b._oRenderLog;var C={};var T={};var I;var _=s.extend("sap.ui.core.Core",{constructor:function(){if(sap.ui.getCore&&sap.ui.getCore()){return sap.ui.getCore()}var t=this,i=e.sap.log,n="sap.ui.core.Core";s.call(this);I=new o;["attachEvent","detachEvent","getEventingParent"].forEach(function(e){_.prototype[e]=I[e].bind(I)});this.bBooted=false;this.bInitialized=false;this.bDomReady=false;this.aPlugins=[];this.mLibraries={};this.mResourceBundles={};this.mUIAreas={};this.oModels={};this.oEventBus=null;this.mElements={};this.mObjects={component:{},template:{}};this.oRootComponent=null;this.aInitListeners=[];this.bInitLegacyLib=false;this._sRerenderTimer=this;this.aPrerenderingTasks=[];i.info("Creating Core",null,n);e.sap.measure.start("coreComplete","Core.js - complete");e.sap.measure.start("coreBoot","Core.js - boot");e.sap.measure.start("coreInit","Core.js - init");this.oConfiguration=new d(this);var a=this.oConfiguration["frameOptionsConfig"]||{};a.mode=this.oConfiguration.getFrameOptions();a.whitelistService=this.oConfiguration.getWhitelistService();this.oFrameOptions=new e.sap.FrameOptions(a);if(this.oConfiguration["bindingSyntax"]==="complex"){p.bindingParser=r.complexParser}if(this.oConfiguration["xx-designMode"]==true){r._keepBindingStrings=true}this._grantFriendAccess();var u=this.oConfiguration.modules;if(this.oConfiguration.getDebug()){u.unshift("sap.ui.debug.DebugEnv")}var l=u.indexOf("sap.ui.core.library");if(l!=0){if(l>0){u.splice(l,1)}u.unshift("sap.ui.core.library")}if(this.oConfiguration["xx-lesssupport"]&&u.indexOf("sap.ui.core.plugin.LessSupport")==-1){i.info("Including LessSupport into declared modules");u.push("sap.ui.core.plugin.LessSupport")}var f=this.oConfiguration.preload;if(window["sap-ui-debug"]===true){f=""}if(f==="auto"){f=window["sap-ui-optimized"]?"sync":""}this.oConfiguration.preload=f;var c=f==="async";if(sap.ui.loader.config().async){c=true}this.oConfiguration["xx-libraryPreloadFiles"].forEach(function(e){var t=String(e).trim().split(/\s*:\s*/),i=t[0],r=t[1];if(t.length===1){r=i;i=""}if(/^(?:none|js|json|both)$/.test(r)){L[i]=r}});i.info("Declared modules: "+u,n);this._setupThemes();this._setupContentDirection();var h=e("html");this._setupBrowser(h);this._setupOS(h);this._setupLang(h);this._setupAnimation(h);sap.ui.getCore=e.sap.getter(this.getInterface());this.oRenderManager=new g;var m=e.sap.syncPoint("UI5 Document Ready",function(e,i){t.bDomReady=true;t.init()});var y=m.startTask("document.ready");var b=m.startTask("preload and boot");e(function(){i.trace("document is ready");m.finishTask(y)});var v=e.sap.syncPoint("UI5 Core Preloads and Bootstrap Script",function(r,n){i.trace("Core loaded: open="+r+", failures="+n);t._boot(c,function(){m.finishTask(b);e.sap.measure.end("coreBoot")})});var E=v.startTask("create sp2 tasks task");if(this.oConfiguration["versionedLibCss"]){var C=v.startTask("load version info");var T=function(e){if(e){i.trace('Loaded "sap-ui-version.json".')}else{i.error('Could not load "sap-ui-version.json".')}v.finishTask(C)};var R=sap.ui.getVersionInfo({async:c,failOnError:false});if(R instanceof Promise){R.then(T,function(e){i.error('Unexpected error when loading "sap-ui-version.json": '+e);v.finishTask(C)})}else{T(R)}}var M=this.oConfiguration["xx-bootTask"];if(M){var S=v.startTask("custom boot task");M(function(e){v.finishTask(S,typeof e==="undefined"||e===true)})}this._polyfillFlexbox();var P=v.startTask("bootstrap script");this.boot=function(){if(this.bBooted){return}this.bBooted=true;v.finishTask(P)};if(f==="sync"||f==="async"){var A=u.reduce(function(e,t){var i=t.search(/\.library$/);if(i>=0){e.push(t.slice(0,i))}return e},[]);var j=this.loadLibraries(A,{async:c,preloadOnly:true});if(c){var w=v.startTask("preload bootstrap libraries");j.then(function(){v.finishTask(w)},function(){v.finishTask(w,false)})}}var U=this.oConfiguration.getAppCacheBuster();if(U&&U.length>0){var O=sap.ui.requireSync("sap/ui/core/AppCacheBuster");O.boot(v)}if(this.oConfiguration.getSupportMode()!==null){var x=v.startTask("support info script");var N=function(e){e.initSupportRules(t.oConfiguration.getSupportMode());v.finishTask(x)};var V=function(e){e.initializeSupportMode(t.oConfiguration.getSupportMode(),c);if(c){sap.ui.require(["sap/ui/support/Bootstrap"],N)}else{N(sap.ui.requireSync("sap/ui/support/Bootstrap"))}};if(c){sap.ui.require(["sap/ui/core/support/Support"],V)}else{V(sap.ui.requireSync("sap/ui/core/support/Support"))}}v.finishTask(E)},metadata:{publicMethods:["boot","isInitialized","isThemeApplied","attachInitEvent","attachInit","getRenderManager","createRenderManager","getConfiguration","setRoot","createUIArea","getUIArea","getUIDirty","getElementById","getCurrentFocusedControlId","getControl","getComponent","getTemplate","lock","unlock","isLocked","attachEvent","detachEvent","applyChanges","getEventBus","applyTheme","setThemeRoot","attachThemeChanged","detachThemeChanged","getStaticAreaRef","attachThemeScopingChanged","detachThemeScopingChanged","fireThemeScopingChanged","notifyContentDensityChanged","registerPlugin","unregisterPlugin","getLibraryResourceBundle","byId","getLoadedLibraries","loadLibrary","loadLibraries","initLibrary","includeLibraryTheme","setModel","getModel","hasModel","isMobile","attachControlEvent","detachControlEvent","attachIntervalTimer","detachIntervalTimer","attachParseError","detachParseError","fireParseError","attachValidationError","detachValidationError","fireValidationError","attachFormatError","detachFormatError","fireFormatError","attachValidationSuccess","detachValidationSuccess","fireValidationSuccess","attachLocalizationChanged","detachLocalizationChanged","attachLibraryChanged","detachLibraryChanged","isStaticAreaRef","createComponent","getRootComponent","getApplication","setMessageManager","getMessageManager","byFieldGroupId","addPrerenderingTask"]}});_.M_EVENTS={ControlEvent:"ControlEvent",UIUpdated:"UIUpdated",ThemeChanged:"ThemeChanged",ThemeScopingChanged:"themeScopingChanged",LocalizationChanged:"localizationChanged",LibraryChanged:"libraryChanged",ValidationError:"validationError",ParseError:"parseError",FormatError:"formatError",ValidationSuccess:"validationSuccess"};var R="sap-ui-static";_.prototype._grantFriendAccess=function(){var t=this;c.prototype.register=function(e){t.registerElementClass(e)};f.prototype.register=function(){t.registerElement(this)};f.prototype.deregister=function(){t.deregisterElement(this)};f._updateFocusInfo=function(e){if(t.oFocusHandler){t.oFocusHandler.updateControlFocusInfo(e)}};u.prototype.register=function(){t.registerObject(this)};u.prototype.deregister=function(){var i=this.sId;for(var r in t.mElements){var n=t.mElements[r];if(n._sapui_candidateForDestroy&&n._sOwnerId===i&&!n.getParent()){e.sap.log.debug("destroying dangling template "+n+" when destroying the owner component");n.destroy()}}t.deregisterObject(this)}};_.prototype._setupThemes=function(){var t=e.sap.log,i="sap.ui.core.Core";var r=window["sap-ui-config"];if(this.oConfiguration.themeRoot){r=r||{};r.themeroots=r.themeroots||{};r.themeroots[this.oConfiguration.getTheme()]=this.oConfiguration.themeRoot}if(r){if(r.themeroots){for(var n in r.themeroots){var o=r.themeroots[n];if(typeof o==="string"){this.setThemeRoot(n,o)}else{for(var a in o){if(a.length>0){this.setThemeRoot(n,[a],o[a])}else{this.setThemeRoot(n,o[a])}}}}}}this.sTheme=this.oConfiguration.getTheme();e(document.documentElement).addClass("sapUiTheme-"+this.sTheme);t.info("Declared theme "+this.sTheme,null,i)};_.prototype._setupContentDirection=function(){var t=e.sap.log,i="sap.ui.core.Core",r=this.oConfiguration.getRTL()?"rtl":"ltr";e(document.documentElement).attr("dir",r);t.info("Content direction set to '"+r+"'",null,i)};_.prototype._setupBrowser=function(i){var r=e.sap.log,n="sap.ui.core.Core";i=i||e("html");var o=t.browser;var a=o.name;if(a===o.BROWSER.CHROME){e.browser.safari=false;e.browser.chrome=true}else if(a===o.BROWSER.SAFARI){e.browser.safari=true;e.browser.chrome=false;if(o.mobile){a="m"+a}}if(a){e.browser.fVersion=o.version;e.browser.mobile=o.mobile;a=a+(o.version===-1?"":Math.floor(o.version));i.attr("data-sap-ui-browser",a);r.debug("Browser-Id: "+a,null,n)}};_.prototype._setupOS=function(i){i=i||e("html");i.attr("data-sap-ui-os",t.os.name+t.os.versionStr);var r=null;switch(t.os.name){case t.os.OS.IOS:r="sap-ios";break;case t.os.OS.ANDROID:r="sap-android";break;case t.os.OS.BLACKBERRY:r="sap-bb";break;case t.os.OS.WINDOWS_PHONE:r="sap-winphone";break}if(r){i.addClass(r)}};_.prototype._setupLang=function(t){t=t||e("html");var i=function(){var e=this.oConfiguration.getLocale();if(e){t.attr("lang",e.toString())}else{t.removeAttr("lang")}};i.call(this);this.attachLocalizationChanged(i,this)};_.prototype._setupAnimation=function(t){if(this.oConfiguration){t=t||e("html");var i=this.oConfiguration.getAnimation();t.attr("data-sap-ui-animation",i?"on":"off");e.fx.off=!i;var r=this.oConfiguration.getAnimationMode();t.attr("data-sap-ui-animation-mode",r)}};_.prototype._polyfillFlexbox=function(){var t=new e.sap.Version(this.oConfiguration.getCompatibilityVersion("flexBoxPolyfill"));if(t.compareTo("1.16")>=0){e.support.useFlexBoxPolyfill=false}else if(!e.support.flexBoxLayout&&!e.support.newFlexBoxLayout&&!e.support.ie10FlexBoxLayout){e.support.useFlexBoxPolyfill=true}else{e.support.useFlexBoxPolyfill=false}};_.prototype._boot=function(t,i){var r=this.oConfiguration["preloadLibCss"];if(r&&r.length>0&&!r.appManaged){this.includeLibraryTheme("sap-ui-merged",undefined,"?l="+r.join(","))}if(t){return this._requireModulesAsync().then(function(){i()})}var n=this;this.oConfiguration.modules.forEach(function(t){var i=t.match(/^(.*)\.library$/);if(i){n.loadLibrary(i[1])}else{e.sap.require(t)}});i()};_.prototype._requireModulesAsync=function(){var t=[],i=[];this.oConfiguration.modules.forEach(function(r){var n=r.match(/^(.*)\.library$/);if(n){t.push(n[1])}else{i.push(e.sap.getResourceName(r,""))}});return Promise.all([this.loadLibraries(t),new Promise(function(e){sap.ui.require(i,function(){e(Array.prototype.slice.call(arguments))})})])};_.prototype.applyTheme=function(t,i){e.sap.assert(typeof t==="string","sThemeName must be a string");e.sap.assert(typeof i==="string"||typeof i==="undefined","sThemeBaseUrl must be a string or undefined");t=this.oConfiguration._normalizeTheme(t,i);if(i){this.setThemeRoot(t,i)}if(t&&this.sTheme!=t){var r=this.sTheme;this._updateThemeUrls(t,true);this.sTheme=t;this.oConfiguration._setTheme(t);e(document.documentElement).removeClass("sapUiTheme-"+r).addClass("sapUiTheme-"+t);if(this.oThemeCheck){this.oThemeCheck.fireThemeChangedEvent(false)}}};_.prototype._updateThemeUrl=function(t,i,r){var n=t.id.slice(13),o=t.href.search(/[?#]/),a,s,p="library",u=this.oConfiguration.getRTL()?"-RTL":"",d,l;if(o>-1){a=t.href.substring(0,o);s=t.href.substring(o)}else{a=t.href;s=""}a=a.substring(a.lastIndexOf("/")+1);if((l=n.indexOf("-["))>0){p+=n.slice(l+2,-1);n=n.slice(0,l)}if(a===p+".css"||a===p+"-RTL.css"){a=p+u+".css"}d=this._getThemePath(n,i)+a+s;if(d!=t.href){if(r){t.setAttribute("data-sap-ui-foucmarker",t.id)}e.sap.includeStyleSheet(d,t.id)}};_.prototype._updateThemeUrls=function(t,i){var r=this;e("link[id^=sap-ui-theme-]").each(function(){r._updateThemeUrl(this,t,i)})};_.prototype._ensureThemeRoot=function(t,i){if(this._mThemeRoots){var r=this._mThemeRoots[i+" "+t]||this._mThemeRoots[i];if(r){r=r+t.replace(/\./g,"/")+"/themes/"+i+"/";e.sap.registerModulePath(t+".themes."+i,r)}}};_.prototype._getThemePath=function(t,i){this._ensureThemeRoot(t,i);return e.sap.getModulePath(t+".themes."+i,"/")};_.prototype.setThemeRoot=function(t,i,r){e.sap.assert(typeof t==="string","sThemeName must be a string");e.sap.assert(Array.isArray(i)&&typeof r==="string"||typeof i==="string"&&r===undefined,"either the second parameter must be a string (and the third is undefined), or it must be an array and the third parameter is a string");if(!this._mThemeRoots){this._mThemeRoots={}}if(r===undefined){r=i;i=undefined}r=r+(r.slice(-1)=="/"?"":"/");if(i){for(var n=0;n<i.length;n++){var o=i[n];this._mThemeRoots[t+" "+o]=r}}else{this._mThemeRoots[t]=r}return this};_.prototype.init=function(){if(this.bInitialized){return}var i=e.sap.log,r="sap.ui.core.Core.init()";this.boot();i.info("Initializing",null,r);this.oFocusHandler=new h(document.body,this);this.oRenderManager._setFocusHandler(this.oFocusHandler);this.oResizeHandler=new m(this);this.oThemeCheck=new y(this);i.info("Initialized",null,r);e.sap.measure.end("coreInit");this.bInitialized=true;i.info("Starting Plugins",null,r);this.startPlugins();i.info("Plugins started",null,r);this._createUIAreas();this.oThemeCheck.fireThemeChangedEvent(true);this._executeOnInit();this._setupRootComponent();this._setBodyAccessibilityRole();this._executeInitListeners();if(this.isThemeApplied()||!this.oConfiguration["xx-waitForTheme"]){this.renderPendingUIUpdates("during Core init")}else{E.debug("delay initial rendering until theme has been loaded");I.attachEventOnce(_.M_EVENTS.ThemeChanged,function(){setTimeout(this.renderPendingUIUpdates.bind(this,"after theme has been loaded"),t.browser.safari?50:0)},this)}e.sap.measure.end("coreComplete")};_.prototype._createUIAreas=function(){var e=this.oConfiguration;if(e.areas){for(var t=0,i=e.areas.length;t<i;t++){this.createUIArea(e.areas[t])}e.areas=undefined}};_.prototype._executeOnInit=function(){var t=this.oConfiguration.onInit;if(t){if(typeof t==="function"){t()}else if(typeof t==="string"){var i=/^module\:((?:(?:[_$.\-a-zA-Z][_$.\-a-zA-Z0-9]*)\/?)*)$/.exec(t);if(i&&i[1]){setTimeout(sap.ui.require.bind(sap.ui,[i[1]]),0)}else{var r=e.sap.getObject(t);if(typeof r==="function"){r()}else{e.sap.globalEval(t)}}}this.oConfiguration.onInit=undefined}};_.prototype._setupRootComponent=function(){var t=e.sap.log,i="sap.ui.core.Core.init()",r=this.oConfiguration;var n=r.getRootComponent();if(n){t.info("Loading Root Component: "+n,null,i);var o=sap.ui.component({name:n});this.oRootComponent=o;var a=r["xx-rootComponentNode"];if(a&&o.isA("sap.ui.core.UIComponent")){var p=e.sap.domById(a);if(p){t.info("Creating ComponentContainer for Root Component: "+n,null,i);var u=sap.ui.requireSync("sap/ui/core/ComponentContainer"),d=new u({component:o,propagateModel:true});d.placeAt(p)}}}else{var l=r.getApplication();if(l){t.warning("The configuration 'application' is deprecated. Please use the configuration 'component' instead! Please migrate from sap.ui.app.Application to sap.ui.core.Component.");t.info("Loading Application: "+l,null,i);e.sap.require(l);var f=e.sap.getObject(l);e.sap.assert(f!==undefined,'The specified application "'+l+'" could not be found!');var c=new f;e.sap.assert(s.isA(c,"sap.ui.app.Application"),'The specified application "'+l+'" must be an instance of sap.ui.app.Application!')}}};_.prototype._setBodyAccessibilityRole=function(){var t=this.oConfiguration;var i=e("body");if(t.getAccessibility()&&t.getAutoAriaBodyRole()){var r=i.attr("role");if(!r&&!t.getAvoidAriaApplicationRole()){i.attr("role","application")}else if(r==="application"&&t.getAvoidAriaApplicationRole()){i.removeAttr("role")}}};_.prototype._executeInitListeners=function(){var t=e.sap.log,i="sap.ui.core.Core.init()";var r=this.aInitListeners;this.aInitListeners=undefined;if(r&&r.length>0){t.info("Fire Loaded Event",null,i);r.forEach(function(e){e()})}};_.prototype.isInitialized=function(){return this.bInitialized};_.prototype.isThemeApplied=function(){return y.themeLoaded};_.prototype.attachInitEvent=function(t){e.sap.assert(typeof t==="function","fnFunction must be a function");if(this.aInitListeners){this.aInitListeners.push(t)}};_.prototype.attachInit=function(t){e.sap.assert(typeof t==="function","fnFunction must be a function");if(this.aInitListeners){this.aInitListeners.push(t)}else{t()}};_.prototype.lock=function(){this.bLocked=true};_.prototype.unlock=function(){this.bLocked=false};_.prototype.isLocked=function(){return this.bLocked};_.prototype.getConfiguration=function(){return this.oConfiguration};_.prototype.getRenderManager=function(){return this.createRenderManager()};_.prototype.createRenderManager=function(){e.sap.assert(this.isInitialized(),"A RenderManager should be created only after the Core has been initialized");var t=new g;t._setFocusHandler(this.oFocusHandler);return t.getInterface()};_.prototype.getCurrentFocusedControlId=function(){if(!this.isInitialized()){throw new Error("Core must be initialized")}return this.oFocusHandler.getCurrentFocusedControlId()};var L={};function M(t){e.sap.assert(typeof t==="string"&&t||typeof t==="object"&&typeof t.name==="string"&&t.name&&(t.json==null||typeof t.json==="boolean"),"lib must be a non-empty string or an object with at least a non-empty 'name' property and an optional (boolean) property 'json'");var i="both";if(typeof t==="object"){if(t.json===true){i="json"}else if(t.json===false){i="js"}t=t.name}var r=L[t]||L[""]||"both";if(r==="both"){r=i}else if(r!==i&&i!=="both"){r="none"}return{name:t,fileType:r}}function S(t){var i=this;t=M(t);var r=t.name,n=t.fileType,o=r.replace(/\./g,"/"),a=this.oConfiguration.getDepCache();if(n==="none"||e.sap.isResourceLoaded(o+"/library.js")){return Promise.resolve(true)}var s=T[r]||(T[r]={});if(s.promise){return s.promise}s.pending=true;s.async=true;var p;if(n!=="json"){var u=o+(a?"/library-h2-preload.js":"/library-preload.js");p=e.sap._loadJSResourceAsync(u).then(function(){return A(r)},function(t){if(n!=="js"){e.sap.log.error("failed to load '"+u+"' ("+(t&&t.message||t)+"), falling back to library-preload.json");return j(r)}})}else{p=j(r)}s.promise=p.then(function(t){var n=[],o=P(r);if(t&&t.length){n=t.map(S.bind(i))}if(o&&e.sap.Version(o._version).compareTo("1.9.0")>=0){n.push(i.getLibraryResourceBundle(r,true))}return Promise.all(n).then(function(){s.pending=false})});return s.promise}function P(t){var i=t.replace(/\./g,"/")+"/manifest.json";if(e.sap.isResourceLoaded(i)){return e.sap.loadResource(i,{dataType:"json",async:false,failOnError:false})}}function A(e){var t=P(e);var i=t&&t["sap.ui5"]&&t["sap.ui5"].dependencies&&t["sap.ui5"].dependencies.libs;if(i){return Object.keys(i).reduce(function(e,t){if(!i[t].lazy){e.push(t)}return e},[])}}function j(t){var i=e.sap.getModulePath(t+".library-preload",".json");return Promise.resolve(e.ajax({dataType:"json",url:i})).then(function(t){if(t){t.url=i;e.sap.registerPreloadedModules(t);var r=t.dependencies;if(Array.isArray(r)){r=r.map(function(e){return e.replace(/\.library-preload$/,"")})}return r}},function(t,r,n){e.sap.log.error("failed to load '"+i+"': "+(n||r))})}function w(t){t=M(t);var i=t.name,r=t.fileType,n=i.replace(/\./g,"/");if(r==="none"||e.sap.isResourceLoaded(n+"/library.js")){return}var o=T[i]||(T[i]={});if(o.pending===false){return}if(o.pending){if(o.async){e.sap.log.warning("request to load "+i+" synchronously while async loading is pending; this causes a duplicate request and should be avoided by caller")}else{e.sap.log.warning("request to load "+i+" synchronously while sync loading is pending (cycle, ignored)");return}}o.pending=true;o.async=false;var a;o.promise=new Promise(function(e,t){a=e});var s;if(r!=="json"){var p=n+"/library-preload";try{sap.ui.requireSync(p);s=A(i)}catch(t){e.sap.log.error("failed to load '"+p+"' ("+(t&&t.message||t)+")");if(t&&t.loadError&&r!=="js"){s=U(i)}}}else{s=U(i)}if(s&&s.length){s.forEach(w)}o.pending=false;a()}function U(t){var i=e.sap.getModulePath(t+".library-preload",".json");var r;e.ajax({dataType:"json",async:false,url:i,success:function(t){if(t){t.url=i;e.sap.registerPreloadedModules(t);r=t.dependencies}},error:function(t,r,n){e.sap.log.error("failed to load '"+i+"': "+(n||r))}});if(Array.isArray(r)){r=r.map(function(e){return e.replace(/\.library-preload$/,"")})}return r}_.prototype.loadLibrary=function(t,i){e.sap.assert(typeof t==="string","sLibrary must be a string");e.sap.assert(i===undefined||typeof i==="boolean"||typeof i==="string"||typeof i==="object"&&(i.url==null||i.url==="string")&&(i.async==null||typeof i.async==="boolean"),"vUrl must be empty or a string or an object with an optional property 'url' of type string and an optional boolean property 'async'");if(typeof i==="boolean"){i={async:i}}if(typeof i==="object"){if(i.async){if(i.url&&T[t]==null){e.sap.registerModulePath(t,i.url)}return this.loadLibraries([t])}i=i.url}if(!C[t]){var r=t+".library";if(i){e.sap.registerModulePath(t,i)}if(this.oConfiguration.preload==="sync"||this.oConfiguration.preload==="async"){w(t)}e.sap.require(r);if(!C[t]){e.sap.log.warning("library "+t+" didn't initialize itself");this.initLibrary(t)}if(this.oThemeCheck&&this.isInitialized()){this.oThemeCheck.fireThemeChangedEvent(true)}}return this.mLibraries[t]};_.prototype.loadLibraries=function(t,i){e.sap.assert(Array.isArray(t),"aLibraries must be an array");i=e.extend({async:true,preloadOnly:false},i);var r=this,n=this.oConfiguration.preload==="sync"||this.oConfiguration.preload==="async",o=i.async,a=!i.preloadOnly;function s(){return t.map(function(e){if(typeof e==="object"){e=e.name}return e.replace(/\./g,"/")+"/library"})}function p(){if(r.oThemeCheck&&r.isInitialized()){r.oThemeCheck.fireThemeChangedEvent(true)}}function u(){return new Promise(function(e,t){sap.ui.require(s(),function(){p();e()})})}function d(){s().forEach(sap.ui.requireSync);p()}if(o){var l=n?Promise.all(t.map(S.bind(this))):Promise.resolve(true);return a?l.then(u):l}else{if(n){t.forEach(w)}if(a){d()}}};_.prototype.createComponent=function(e,t,i,r){if(typeof e==="string"){e={name:e,url:t};if(typeof i==="object"){e.settings=i}else{e.id=i;e.settings=r}}if(e.async&&(e.manifest!==undefined||e.manifestFirst===undefined&&e.manifestUrl===undefined)){if(e.manifest===undefined){e.manifest=false}return u.create(e)}return sap.ui.component(e)};_.prototype.getRootComponent=function(){return this.oRootComponent};_.prototype.initLibrary=function(t){e.sap.assert(typeof t==="string"||typeof t==="object","oLibInfo must be a string or object");var i=typeof t==="string";if(i){t={name:t}}var r=t.name,o=e.sap.log,a="sap.ui.core.Core.initLibrary()";if(i){o.error("[Deprecated] library "+r+" uses old fashioned initLibrary() call (rebuild with newest generator)")}if(!r||C[r]){return}o.debug("Analyzing Library "+r,null,a);C[r]=true;function s(t,i){var r,n;for(r in i){n=i[r];if(n!==undefined){if(Array.isArray(t[r])){if(t[r].length===0){t[r]=n}else{t[r]=e.sap.unique(t[r].concat(n))}}else if(t[r]===undefined){t[r]=n}else if(r!="name"){e.sap.log.warning("library info setting ignored: "+r+"="+n)}}}return t}e.sap.getObject(r,0);this.mLibraries[r]=t=s(this.mLibraries[r]||{name:r,dependencies:[],types:[],interfaces:[],controls:[],elements:[]},t);for(var p=0;p<t.dependencies.length;p++){var u=t.dependencies[p];o.debug("resolve Dependencies to "+u,null,a);if(C[u]!==true){o.warning("Dependency from "+r+" to "+u+" has not been resolved by library itself",null,a);this.loadLibrary(u)}}n.registerInterfaceTypes(t.interfaces);for(var p=0;p<t.types.length;p++){if(!/^(any|boolean|float|int|string|object|void)$/.test(t.types[p])){e.sap.declare(t.types[p])}}var d=t.controls.concat(t.elements);for(var p=0;p<d.length;p++){sap.ui.lazyRequire(d[p],"new extend getMetadata")}if(!t.noLibraryCSS){this._ensureThemeRoot(r,this.sTheme);this._ensureThemeRoot(r,"base");if(this.oConfiguration["preloadLibCss"].indexOf(r)<0){var l=this._getLibraryCssQueryParams(t);this.includeLibraryTheme(r,undefined,l)}}t.sName=t.name;t.aControls=t.controls;this.fireLibraryChanged({name:r,stereotype:"library",operation:"add",metadata:t})};_.prototype.includeLibraryTheme=function(t,i,r){e.sap.assert(typeof t==="string","sLibName must be a string");e.sap.assert(i===undefined||typeof i==="string","sVariant must be a string or undefined");if(t!="sap.ui.legacy"&&t!="sap.ui.classic"){if(!i){i=""}var n=this.oConfiguration.getRTL()?"-RTL":"";var o,a=t+(i.length>0?"-["+i+"]":i);if(t&&t.indexOf(":")==-1){o="library"+i+n}else{o=t.substring(t.indexOf(":")+1)+i;t=t.substring(0,t.indexOf(":"))}var s="sap-ui-theme-"+a,p=document.getElementById(s);if(p){p.setAttribute("data-sap-ui-foucmarker",s)}var u=this._getThemePath(t,this.sTheme)+o+".css"+(r?r:"");e.sap.log.info("Including "+u+" -  sap.ui.core.Core.includeLibraryTheme()");e.sap.includeStyleSheet(u,s);var d=sap.ui.require("sap/ui/core/theming/Parameters");if(d){d._addLibraryTheme(a)}}};_.prototype._getLibraryCssQueryParams=function(e){var t;if(this.oConfiguration["versionedLibCss"]&&e){t="?version="+e.version;if(i.versioninfo){t+="&sap-ui-dist-version="+i.versioninfo.version}}return t};_.prototype.getLoadedLibraries=function(){return e.extend({},this.mLibraries)};_.prototype.getLibraryResourceBundle=function(t,i,r){var n,o,a,s;if(typeof t==="boolean"){r=t;t=undefined;i=undefined}if(typeof i==="boolean"){r=i;i=undefined}e.sap.assert(t===undefined&&i===undefined||typeof t==="string","sLibraryName must be a string or there is no argument given at all");e.sap.assert(i===undefined||typeof i==="string","sLocale must be a string or omitted");t=t||"sap.ui.core";i=i||this.getConfiguration().getLanguage();o=t+"/"+i;a=this.mResourceBundles[o];if(!a||!r&&a instanceof Promise){n=P(t);if(n&&e.sap.Version(n._version).compareTo("1.9.0")>=0){s=n["sap.ui5"]&&n["sap.ui5"].library&&n["sap.ui5"].library.i18n}if(s!==false){a=e.sap.resources({url:sap.ui.resource(t,typeof s==="string"?s:"messagebundle.properties"),locale:i,async:r});if(a instanceof Promise){a=a.then(function(e){this.mResourceBundles[o]=e;return e}.bind(this))}this.mResourceBundles[o]=a}}return r?Promise.resolve(a):a};_.prototype.setRoot=function(t,i){e.sap.assert(typeof t==="string"||typeof t==="object","oDomRef must be a string or object");e.sap.assert(i instanceof a||i instanceof l,"oControl must be a Control or Interface");if(i){i.placeAt(t,"only")}};_.prototype.createUIArea=function(t){var i=this;e.sap.assert(typeof t==="string"||typeof t==="object","oDomRef must be a string or object");if(!t){throw new Error("oDomRef must not be null")}if(typeof t==="string"){var r=t;if(r==R){t=this.getStaticAreaRef()}else{t=e.sap.domById(t);if(!t){throw new Error("DOM element with ID '"+r+"' not found in page, but application tries to insert content.")}}}if(!t.id||t.id.length==0){t.id=e.sap.uid()}var n=t.id;if(!this.mUIAreas[n]){this.mUIAreas[n]=new b(this,t);if(!e.isEmptyObject(this.oModels)){var o={oModels:e.extend({},this.oModels),oBindingContexts:{},aPropagationListeners:[]};i.mUIAreas[n]._propagateProperties(true,i.mUIAreas[n],o,true)}}else{this.mUIAreas[n].setRootNode(t)}return this.mUIAreas[n]};_.prototype.getUIArea=function(t){e.sap.assert(typeof t==="string"||typeof t==="object","o must be a string or object");var i="";if(typeof t=="string"){i=t}else{i=t.id}if(i){return this.mUIAreas[i]}return null};_.prototype.addInvalidatedUIArea=function(t){if(!this._sRerenderTimer){E.debug("Registering timer for delayed re-rendering");this._sRerenderTimer=e.sap.delayedCall(0,this,"renderPendingUIUpdates")}};_.MAX_RENDERING_ITERATIONS=20;_.prototype.renderPendingUIUpdates=function(t){E.debug("Render pending UI updates: start ("+(t||"by timer")+")");e.sap.measure.start("renderPendingUIUpdates","Render pending UI updates in all UIAreas");var i=false,r=_.MAX_RENDERING_ITERATIONS>0,n=0;this._bRendering=true;do{if(r){n++;if(n>_.MAX_RENDERING_ITERATIONS){this._bRendering=false;throw new Error("Rendering has been re-started too many times ("+n+"). Add URL parameter sap-ui-xx-debugRendering=true for a detailed analysis.")}if(n>1){E.debug("Render pending UI updates: iteration "+n)}}if(this._sRerenderTimer){if(this._sRerenderTimer!==this){e.sap.clearDelayedCall(this._sRerenderTimer)}this._sRerenderTimer=undefined}this.runPrerenderingTasks();var o=this.mUIAreas;for(var a in o){i=o[a].rerender()||i}}while(r&&this._sRerenderTimer);this._bRendering=false;if(i){this.fireUIUpdated()}E.debug("Render pending UI updates: finished");e.sap.measure.end("renderPendingUIUpdates")};_.prototype.getUIDirty=function(){return!!(this._sRerenderTimer||this._bRendering)};_.prototype.attachUIUpdated=function(e,t){I.attachEvent(_.M_EVENTS.UIUpdated,e,t)};_.prototype.detachUIUpdated=function(e,t){I.detachEvent(_.M_EVENTS.UIUpdated,e,t)};_.prototype.fireUIUpdated=function(e){I.fireEvent(_.M_EVENTS.UIUpdated,e)};_.prototype.notifyContentDensityChanged=function(){this.fireThemeChanged()};_.prototype.attachThemeChanged=function(e,t){I.attachEvent(_.M_EVENTS.ThemeChanged,e,t)};_.prototype.detachThemeChanged=function(e,t){I.detachEvent(_.M_EVENTS.ThemeChanged,e,t)};_.prototype.fireThemeChanged=function(t){e.sap.scrollbarSize(true);var i=sap.ui.require("sap/ui/core/theming/Parameters");if(i){i.reset(true)}t=t||{};if(!t.theme){t.theme=this.getConfiguration().getTheme()}var r=_.M_EVENTS.ThemeChanged;var n=e.Event(r);n.theme=t.theme;e.each(this.mElements,function(e,t){t._handleEvent(n)});e.sap.act.refresh();I.fireEvent(r,t)};_.prototype.attachThemeScopingChanged=function(e,t){I.attachEvent(_.M_EVENTS.ThemeScopingChanged,e,t)};_.prototype.detachThemeScopingChanged=function(e,t){I.detachEvent(_.M_EVENTS.ThemeScopingChanged,e,t)};_.prototype.fireThemeScopingChanged=function(e){I.fireEvent(_.M_EVENTS.ThemeScopingChanged,e)};_.prototype.attachLocalizationChanged=function(e,t){I.attachEvent(_.M_EVENTS.LocalizationChanged,e,t)};_.prototype.detachLocalizationChanged=function(e,t){I.detachEvent(_.M_EVENTS.LocalizationChanged,e,t)};_.prototype.fireLocalizationChanged=function(t){var i=_.M_EVENTS.LocalizationChanged,r=e.Event(i,{changes:t}),n=p._handleLocalizationChange;e.sap.log.info("localization settings changed: "+Object.keys(t).join(","),null,"sap.ui.core.Core");e.each(this.oModels,function(e,t){if(t&&t._handleLocalizationChange){t._handleLocalizationChange()}});function o(t){e.each(this.mUIAreas,function(){n.call(this,t)});e.each(this.mObjects["component"],function(){n.call(this,t)});e.each(this.mElements,function(){n.call(this,t)})}o.call(this,1);o.call(this,2);if(t.rtl!=undefined){e(document.documentElement).attr("dir",t.rtl?"rtl":"ltr");this._updateThemeUrls(this.sTheme);e.each(this.mUIAreas,function(){this.invalidate()});e.sap.log.info("RTL mode "+t.rtl?"activated":"deactivated")}e.each(this.mElements,function(e,t){this._handleEvent(r)});I.fireEvent(i,{changes:t})};_.prototype.attachLibraryChanged=function(e,t){I.attachEvent(_.M_EVENTS.LibraryChanged,e,t)};_.prototype.detachLibraryChanged=function(e,t){I.detachEvent(_.M_EVENTS.LibraryChanged,e,t)};_.prototype.fireLibraryChanged=function(e){I.fireEvent(_.M_EVENTS.LibraryChanged,e)};_.prototype.applyChanges=function(){this.renderPendingUIUpdates("forced by applyChanges")};_.prototype.registerElementClass=function(t){var i=t.getName(),r=t.getLibraryName()||"",n=this.mLibraries[r],o=l.prototype.isPrototypeOf(t.getClass().prototype)?"controls":"elements";if(!n){e.sap.getObject(r,0);n=this.mLibraries[r]={name:r,dependencies:[],types:[],interfaces:[],controls:[],elements:[]}}if(n[o].indexOf(i)<0){n[o].push(i);e.sap.log.debug("Class "+t.getName()+" registered for library "+t.getLibraryName());this.fireLibraryChanged({name:t.getName(),stereotype:t.getStereotype(),operation:"add",metadata:t})}};_.prototype.registerElement=function(t){var i=t.getId(),r=this.mElements[i];if(r&&r!==t){if(r._sapui_candidateForDestroy){e.sap.log.debug("destroying dangling template "+r+" when creating new object with same ID");r.destroy()}else{if(this.oConfiguration.getNoDuplicateIds()){e.sap.log.error("adding element with duplicate id '"+i+"'");throw new Error("Error: adding element with duplicate id '"+i+"'")}else{e.sap.log.warning("adding element with duplicate id '"+i+"'")}}}this.mElements[i]=t};_.prototype.deregisterElement=function(e){delete this.mElements[e.getId()]};_.prototype.registerObject=function(t){var i=t.getId(),r=t.getMetadata().getStereotype(),n=this.getObject(r,i);if(n&&n!==t){e.sap.log.error('adding object "'+r+"\" with duplicate id '"+i+"'");throw new Error('Error: adding object "'+r+"\" with duplicate id '"+i+"'")}this.mObjects[r][i]=t};_.prototype.deregisterObject=function(e){var t=e.getId(),i=e.getMetadata().getStereotype();delete this.mObjects[i][t]};_.prototype.byId=function(t){e.sap.assert(t==null||typeof t==="string","sId must be a string when defined");return t==null?undefined:this.mElements[t]};_.prototype.getControl=_.prototype.byId;_.prototype.getElementById=_.prototype.byId;_.prototype.getObject=function(t,i){e.sap.assert(i==null||typeof i==="string","sId must be a string when defined");e.sap.assert(this.mObjects[t]!==undefined,"sType must be a supported stereotype");return i==null?undefined:this.mObjects[t]&&this.mObjects[t][i]};_.prototype.getComponent=function(e){return this.getObject("component",e)};_.prototype.getTemplate=function(e){var t=sap.ui.requireSync("sap/ui/core/tmpl/Template");return t.byId(e)};_.prototype.getStaticAreaRef=function(){var t=e.sap.domById(R);if(!t){if(!this.bDomReady){throw new Error("DOM is not ready yet. Static UIArea cannot be created.")}var i={id:R};var r=this.getConfiguration();if(e("body").attr("role")!="application"&&!r.getAvoidAriaApplicationRole()){i.role="application"}var n=r.getRTL()?"right":"left";t=e("<DIV/>",i).css({height:"0",width:"0",overflow:"hidden",float:n}).prependTo(document.body)[0];this.createUIArea(t).bInitial=false}return t};_.prototype.isStaticAreaRef=function(e){return e&&e.id===R};_._I_INTERVAL=200;m.prototype.I_INTERVAL=_._I_INTERVAL;_.prototype.attachIntervalTimer=function(e,t){if(!this.oTimedTrigger){var i=sap.ui.requireSync("sap/ui/core/IntervalTrigger");this.oTimedTrigger=new i(_._I_INTERVAL)}this.oTimedTrigger.addListener(e,t)};_.prototype.detachIntervalTimer=function(e,t){if(this.oTimedTrigger){this.oTimedTrigger.removeListener(e,t)}};_.prototype.attachControlEvent=function(e,t){I.attachEvent(_.M_EVENTS.ControlEvent,e,t)};_.prototype.detachControlEvent=function(e,t){I.detachEvent(_.M_EVENTS.ControlEvent,e,t)};_.prototype.fireControlEvent=function(e){I.fireEvent(_.M_EVENTS.ControlEvent,e)};_.prototype._handleControlEvent=function(t,i){var r=e.Event(t.type);e.extend(r,t);r.originalEvent=undefined;this.fireControlEvent({browserEvent:r,uiArea:i})};_.prototype.getApplication=function(){return sap.ui.getApplication&&sap.ui.getApplication()};_.prototype.registerPlugin=function(t){e.sap.assert(typeof t==="object","oPlugin must be an object");if(!t){return}for(var i=0,r=this.aPlugins.length;i<r;i++){if(this.aPlugins[i]===t){return}}this.aPlugins.push(t);if(this.bInitialized&&t&&t.startPlugin){t.startPlugin(this)}};_.prototype.unregisterPlugin=function(t){e.sap.assert(typeof t==="object","oPlugin must be an object");if(!t){return}var i=-1;for(var r=this.aPlugins.length;r--;r>=0){if(this.aPlugins[r]===t){i=r;break}}if(i==-1){return}if(this.bInitialized&&t&&t.stopPlugin){t.stopPlugin(this)}this.aPlugins.splice(i,1)};_.prototype.startPlugins=function(){for(var e=0,t=this.aPlugins.length;e<t;e++){var i=this.aPlugins[e];if(i&&i.startPlugin){i.startPlugin(this,true)}}};_.prototype.stopPlugins=function(){for(var e=0,t=this.aPlugins.length;e<t;e++){var i=this.aPlugins[e];if(i&&i.stopPlugin){i.stopPlugin(this)}}};_.prototype.setModel=function(t,i){e.sap.assert(t==null||s.isA(t,"sap.ui.model.Model"),"oModel must be an instance of sap.ui.model.Model, null or undefined");e.sap.assert(i===undefined||typeof i==="string"&&!/^(undefined|null)?$/.test(i),"sName must be a string or omitted");var r=this,n;if(!t&&this.oModels[i]){delete this.oModels[i];if(e.isEmptyObject(r.oModels)&&e.isEmptyObject(r.oBindingContexts)){n=p._oEmptyPropagatedProperties}else{n={oModels:e.extend({},r.oModels),oBindingContexts:{},aPropagationListeners:[]}}e.each(this.mUIAreas,function(e,r){if(t!=r.getModel(i)){r._propagateProperties(i,r,n,false,i)}})}else if(t&&t!==this.oModels[i]){this.oModels[i]=t;e.each(this.mUIAreas,function(n,o){if(t!=o.getModel(i)){var a={oModels:e.extend({},r.oModels),oBindingContexts:{},aPropagationListeners:[]};o._propagateProperties(i,o,a,false,i)}})}return this};_.prototype.setMessageManager=function(e){this.oMessageManager=e};_.prototype.getMessageManager=function(){if(!this.oMessageManager){this.oMessageManager=new v}return this.oMessageManager};_.prototype.byFieldGroupId=function(e){var t=[];for(var i in this.mElements){var r=this.mElements[i];if(r instanceof l&&r.checkFieldGroupIds(e)){t.push(r)}}return t};_.prototype.getModel=function(t){e.sap.assert(t===undefined||typeof t==="string"&&!/^(undefined|null)?$/.test(t),"sName must be a string or omitted");return this.oModels[t]};_.prototype.hasModel=function(){return!e.isEmptyObject(this.oModels)};_.prototype.getEventBus=function(){if(!this.oEventBus){var e=sap.ui.requireSync("sap/ui/core/EventBus");var t=this.oEventBus=new e;this._preserveHandler=function(e){t.publish("sap.ui","__preserveContent",{domNode:e.domNode})};g.attachPreserveContent(this._preserveHandler)}return this.oEventBus};_.prototype.attachValidationError=function(e,t,i){if(typeof e==="function"){i=t;t=e;e=undefined}I.attachEvent(_.M_EVENTS.ValidationError,e,t,i);return this};_.prototype.detachValidationError=function(e,t){I.detachEvent(_.M_EVENTS.ValidationError,e,t);return this};_.prototype.attachParseError=function(e,t,i){if(typeof e==="function"){i=t;t=e;e=undefined}I.attachEvent(_.M_EVENTS.ParseError,e,t,i);return this};_.prototype.detachParseError=function(e,t){I.detachEvent(_.M_EVENTS.ParseError,e,t);return this};_.prototype.attachFormatError=function(e,t,i){if(typeof e==="function"){i=t;t=e;e=undefined}I.attachEvent(_.M_EVENTS.FormatError,e,t,i);return this};_.prototype.detachFormatError=function(e,t){I.detachEvent(_.M_EVENTS.FormatError,e,t);return this};_.prototype.attachValidationSuccess=function(e,t,i){if(typeof e==="function"){i=t;t=e;e=undefined}I.attachEvent(_.M_EVENTS.ValidationSuccess,e,t,i);return this};_.prototype.detachValidationSuccess=function(e,t){I.detachEvent(_.M_EVENTS.ValidationSuccess,e,t);return this};_.prototype.fireParseError=function(e){I.fireEvent(_.M_EVENTS.ParseError,e);return this};_.prototype.fireValidationError=function(e){I.fireEvent(_.M_EVENTS.ValidationError,e);return this};_.prototype.fireFormatError=function(e){I.fireEvent(_.M_EVENTS.FormatError,e);return this};_.prototype.fireValidationSuccess=function(e){I.fireEvent(_.M_EVENTS.ValidationSuccess,e);return this};_.prototype.isMobile=function(){return t.browser.mobile};_.prototype._getEventProvider=function(){return I};_.prototype.addPrerenderingTask=function(e,t){if(t){this.aPrerenderingTasks.unshift(e)}else{this.aPrerenderingTasks.push(e)}this.addInvalidatedUIArea()};_.prototype.runPrerenderingTasks=function(){var e=this.aPrerenderingTasks.slice();this.aPrerenderingTasks=[];e.forEach(function(e){e()})};_.prototype.destroy=function(){g.detachPreserveContent(this._preserveHandler);this.oFocusHandler.destroy();I.destroy();s.prototype.destroy.call(this)};sap.ui.setRoot=function(t,i){e.sap.assert(typeof t==="string"||typeof t==="object","oDomRef must be a string or object");e.sap.assert(i instanceof a||i instanceof l,"oControl must be a Control or Interface");sap.ui.getCore().setRoot(t,i)};return(new _).getInterface()});