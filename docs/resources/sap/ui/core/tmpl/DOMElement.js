/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","sap/ui/core/Control","sap/ui/core/library","./DOMAttribute","./DOMElementRenderer"],function(t,e,i,r,a){"use strict";var s=e.extend("sap.ui.core.tmpl.DOMElement",{metadata:{library:"sap.ui.core",properties:{text:{type:"string",group:"Appearance",defaultValue:null},tag:{type:"string",group:"Behavior",defaultValue:"span"}},defaultAggregation:"attributes",aggregations:{attributes:{type:"sap.ui.core.tmpl.DOMAttribute",multiple:true,singularName:"attribute"},elements:{type:"sap.ui.core.tmpl.DOMElement",multiple:true,singularName:"element"}}}});s.prototype.applySettings=function(i){var a=this.getMetadata(),s=a.getJSONKeys();if(i){if(!i["attributes"]){var n=i["attributes"]=[];t.each(i,function(t,e){if(t!=="id"&&!s[t]&&typeof e==="string"){n.push(new r({name:t,value:e}));delete i[t]}})}else{t.sap.log.warning("DOMElement#"+this.getId()+": custom attributes in settings will be ignored since attributes are provided!")}}e.prototype.applySettings.apply(this,arguments)};s.prototype.exit=s.prototype.onBeforeRendering=function(){var t=this.getTag().toLowerCase();if(t==="input"||t==="textarea"||t==="select"){this.$().off("change")}};s.prototype.onAfterRendering=function(){var e=this.getTag().toLowerCase();if(e==="input"||e==="textarea"||e==="select"){this.$().on("change",t.proxy(this.oninputchange,this))}};s.prototype.oninputchange=function(e){var i=this.getTag().toLowerCase();if(i==="input"){var r=this.$().val();this.getAttributes().forEach(function(t){if(t.getName().toLowerCase()==="value"){t.setValue(r)}})}else if(i==="textarea"){var a=this.$().val();this.setText(a)}else if(i==="select"){var a="";this.$().find("select option:selected").each(function(){a+=t(this).text()+" "});this.setText(a)}};s.prototype.attr=function(t,e){var i=this.getAttributes(),a;i.forEach(function(e){var i=e.getName();if(i.toLowerCase()===t){a=e;return false}});if(e===undefined){return a&&a.getValue()}else{if(a){if(e===null){this.removeAttribute(a)}else{a.setValue(e)}}else{if(e!==null){this.addAttribute(new r({name:t,value:e}))}}return this}};s.prototype.removeAttr=function(t){this.attr(t,null);return this};s.prototype.setText=function(t){this.setProperty("text",t,true);var e=this.$();if(e.length>0){var i=this.getTag().toLowerCase();if(i==="textarea"){e.val(this.getProperty("text"))}else{e.text(this.getProperty("text"))}}};return s});