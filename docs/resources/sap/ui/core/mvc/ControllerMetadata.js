/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/Metadata","sap/base/util/extend","sap/ui/core/mvc/OverrideExecution"],function(t,e,i){"use strict";var o=function(e,i){t.apply(this,arguments);if(this.isA("sap.ui.core.mvc.ControllerExtension")&&this.getParent().getClass().override){this.getClass().override=this.getParent().getClass().override}};o.prototype=Object.create(t.prototype);o.prototype.applySettings=function(o){if(o.override){this._override=o.override;delete o.override}t.prototype.applySettings.call(this,o);var r=o.metadata;this._defaultLifecycleMethodMetadata={onInit:{public:true,final:false,overrideExecution:i.After},onExit:{public:true,final:false,overrideExecution:i.Before},onBeforeRendering:{public:true,final:false,overrideExecution:i.Before},onAfterRendering:{public:true,final:false,overrideExecution:i.After}};var s=this.isA("sap.ui.core.mvc.ControllerExtension");var a=/^_/;var n=this._oParent.isA("sap.ui.core.mvc.Controller");var h=o.metadata&&o.metadata.methods?true:false;if(!s){if(n&&!h){a=/^_|^on|^init$|^exit$/}if(n&&h){e(r.methods,this._defaultLifecycleMethodMetadata)}}if(s||h){this._aPublicMethods=[]}this._mMethods=r.methods||{};for(var l in o){if(l!=="metadata"&&l!=="constructor"){if(!l.match(a)){if(n&&this._oParent&&this._oParent.isMethodFinal(l)){jQuery.sap.log.error("Method: '"+l+"' of controller '"+this._oParent.getName()+"' is final and cannot be overridden by controller '"+this.getName()+"'");delete this._oClass.prototype[l]}if(!(l in this._mMethods)&&typeof o[l]==="function"){if(!(o[l].getMetadata&&o[l].getMetadata().isA("sap.ui.core.mvc.ControllerExtension"))){this._mMethods[l]={public:true,final:false}}}}}}for(var d in this._mMethods){if(this.isMethodPublic(d)){this._aPublicMethods.push(d)}}};o.prototype.afterApplySettings=function(){t.prototype.afterApplySettings.call(this);var i=this.isA("sap.ui.core.mvc.ControllerExtension");if(this._oParent){var o=this._oParent._mMethods?this._oParent._mMethods:{};for(var r in o){if(this._mMethods[r]&&!i){var s=this._mMethods[r].public;this._mMethods[r]=e({},o[r]);if(s!==undefined){this._mMethods[r].public=s}if(!this.isMethodPublic(r)&&this._mMethods[r].public!==o[r].public){this._aAllPublicMethods.splice(this._aAllPublicMethods.indexOf(r),1)}}else{this._mMethods[r]=o[r]}}}if(this._oParent&&this._oParent.isA("sap.ui.core.mvc.ControllerExtension")){this._bFinal=true}};o.prototype.getNamespace=function(){var t=this._sClassName.indexOf("anonymousExtension~")==0;var e=t?this._oParent._sClassName:this._sClassName;return e.substr(0,e.lastIndexOf("."))};o.prototype.isMethodFinal=function(t){var e=this._mMethods[t];return e&&e.final};o.prototype.isMethodPublic=function(t){var e=this._mMethods[t];return e&&e.public};o.prototype.getAllMethods=function(){return this._mMethods};o.prototype.getOverrideExecution=function(t){var e=this._mMethods[t];var o=i.Instead;if(e){o=e.overrideExecution}return o};o.prototype.getOverrides=function(){return this._override};o.prototype.getStaticOverrides=function(){return this._staticOverride};o.prototype.hasOverrides=function(){return!!this._override||!!this._staticOverride};o.prototype.getLifecycleConfiguration=function(){return this._defaultLifecycleMethodMetadata};return o});