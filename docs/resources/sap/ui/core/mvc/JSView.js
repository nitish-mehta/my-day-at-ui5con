/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","./View","./JSViewRenderer","sap/base/util/extend","sap/ui/base/ManagedObject","sap/ui/core/library"],function(e,i,t,n,r,s){"use strict";var o=i.extend("sap.ui.core.mvc.JSView",{metadata:{library:"sap.ui.core"}});var a={};o.asyncSupport=true;var c=s.mvc.ViewType;o.create=function(t){var r=n(true,{},t);for(var s in r){if(s==="definition"||s==="preprocessors"){delete r[s];e.sap.log.warning("JSView.create does not support the options definition or preprocessor!")}}r.type=c.JS;return i.create(r)};sap.ui.jsview=function(i,t,n){if(t&&t.async){e.sap.log.info("Do not use deprecated factory function 'sap.ui.jsview' for view instance creation. Use 'JSView.create' instead.")}else{e.sap.log.warning("Do not use synchronous view creation! Use the new asynchronous factory 'JSView.create' for view instance creation instead.")}return p.apply(this,arguments)};function p(i,t,n){var r={},s;if(t&&typeof t=="string"){r.viewName=t;if(typeof arguments[2]=="boolean"){r.async=n}else if(typeof arguments[2]=="object"){r.controller=arguments[2];r.async=!!arguments[3]}s=new o(i,r);return s}else if(t&&typeof t=="object"){a[i]=t;e.sap.declare({modName:i,type:"view"},false);e.sap.log.info("For defining views use JSView.extend instead.")}else if(arguments.length==1&&typeof i=="string"||arguments.length==2&&typeof arguments[0]=="string"&&typeof arguments[1]=="boolean"){r.viewName=arguments[0];r.async=!!arguments[1];s=r.id?new o(r.id,r):new o(r);return s}else{throw new Error("Wrong arguments ('"+i+"', '"+t+"')! Either call sap.ui.jsview([sId,] sViewName) to instantiate a View or sap.ui.jsview(sViewName, oViewImpl) to define a View type.")}}o.prototype.initViewSettings=function(i){var t;if(!a[i.viewName]){var n=e.sap.getResourceName(i.viewName,".view");if(i.async){t=new Promise(function(e){sap.ui.require([n],e)})}else{sap.ui.requireSync(n)}}if(i.async){return Promise.resolve(t).then(function(){e.extend(this,a[i.viewName])}.bind(this))}e.extend(this,a[i.viewName])};o.prototype.onControllerConnected=function(e){r.runWithPreprocessors(function(){this.applySettings({content:this.createContent(e)})},{id:this.getAutoPrefixId()?this.createId.bind(this):undefined,settings:this._fnSettingsPreprocessor},this)};o.prototype.getAutoPrefixId=function(){return false};return o});