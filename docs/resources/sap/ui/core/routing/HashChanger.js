/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","sap/ui/base/EventProvider","sap/ui/thirdparty/hasher"],function(e,t,i){"use strict";var n=t.extend("sap.ui.core.routing.HashChanger",{constructor:function(){t.apply(this)}});n.prototype.init=function(){if(this._initialized){e.sap.log.info("this HashChanger instance has already been initialized.");return false}this._initialized=true;i.changed.add(this.fireHashChanged,this);if(!i.isActive()){i.initialized.addOnce(this.fireHashChanged,this);i.init()}else{this.fireHashChanged(i.getHash())}return this._initialized};n.prototype.fireHashChanged=function(e,t){this.fireEvent("hashChanged",{newHash:e,oldHash:t})};n.prototype.setHash=function(e){this.fireEvent("hashSet",{sHash:e});i.setHash(e)};n.prototype.replaceHash=function(e){this.fireEvent("hashReplaced",{sHash:e});i.replaceHash(e)};n.prototype.getHash=function(){return i.getHash()};n.prototype.destroy=function(){i.changed.remove(this.fireHashChanged,this);t.prototype.destroy.apply(this,arguments)};(function(){var t=null;n.getInstance=function(){if(!t){t=new n}return t};function i(e){var i,n,s;for(i in t.mEventRegistry){if(t.mEventRegistry.hasOwnProperty(i)){n=t.mEventRegistry[i];s=e.mEventRegistry[i];if(s){e.mEventRegistry[i]=n.concat(s)}else{e.mEventRegistry[i]=n}}}}n.replaceHashChanger=function(n){if(t&&n){var s=e.sap.getObject("sap.ui.core.routing.History.getInstance"),a;if(s){a=s();a._unRegisterHashChanger()}i(n);t.destroy();if(a){a._setHashChanger(n)}}t=n}})();return n});