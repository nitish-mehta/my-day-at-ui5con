/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","sap/ui/Device"],function(t,e){"use strict";return{_routeMatched:function(i,o,r){var n=this._oRouter,a,s,h,f=null,u=null,_,g,c,l=this;if(!o||o===true){_=true;o=Promise.resolve()}if(this._oParent){o=this._oParent._routeMatched(i,o)}else if(this._oNestingParent){this._oNestingParent._routeMatched(i,o,this)}s=t.extend({},n._oConfig,this._oConfig);g=t.extend({},i);g.routeConfig=s;h={name:s.name,arguments:i,config:s};if(r){h.nestedRoute=r}this.fireBeforeMatched(h);n.fireBeforeRouteMatched(h);if(this._oTarget){a=this._oTarget;a._oOptions=this._convertToTargetOptions(s);o=a._place(o);if(this._oRouter._oTargetHandler&&this._oRouter._oTargetHandler._chainNavigation){c=o;o=this._oRouter._oTargetHandler._chainNavigation(function(){return c})}}else if(e.browser.msie||e.browser.edge){c=o;o=new Promise(function(t,e){setTimeout(function(){var i=n._oTargets._display(l._oConfig.target,g,l._oConfig.titleTarget,c);i.then(t,e)},0)})}else{o=n._oTargets._display(this._oConfig.target,g,this._oConfig.titleTarget,o)}return o.then(function(e){e=e||{};f=e.view;u=e.control;h.view=f;h.targetControl=u;if(s.callback){s.callback(this,i,s,u,f)}this.fireEvent("matched",h);n.fireRouteMatched(h);if(_){t.sap.log.info("The route named '"+s.name+"' did match with its pattern",this);this.fireEvent("patternMatched",h);n.fireRoutePatternMatched(h)}return e}.bind(this))}}});