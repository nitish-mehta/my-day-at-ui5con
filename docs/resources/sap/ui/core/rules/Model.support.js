/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","sap/ui/support/library","sap/ui/support/supportRules/util/StringAnalyzer","sap/ui/model/ListBinding","sap/ui/model/json/JSONModel","sap/ui/model/odata/ODataMetadata","sap/ui/model/CompositeBinding","sap/ui/model/PropertyBinding"],function(e,t,a,i,n,o,d){"use strict";var s=t.Categories;var r=t.Severity;var u=t.Audiences;function c(e,t){var i=-1;var n=false;e.forEach(function(e){var o=a.calculateLevenshteinDistance(t,e);if(i===-1||o<i){i=o;n=e}});return n}var l={id:"bindingPathSyntaxValidation",audiences:[u.Control,u.Application],categories:[s.Bindings],enabled:true,minversion:"1.32",title:"Model: Unresolved binding path",description:"The binding path used in the model could not be resolved",resolution:"Check the binding path for typos",resolutionurls:[{href:"https://sapui5.hana.ondemand.com/#docs/api/symbols/sap.ui.model.Context.html",text:"API Reference: Context"},{href:"https://sapui5.hana.ondemand.com/#docs/guide/e5310932a71f42daa41f3a6143efca9c.html",text:"Documentation: Data Binding"},{href:"https://sapui5.hana.ondemand.com/#docs/guide/97830de2d7314e93b5c1ee3878a17be9.html",text:"Data Binding Tutorial - Step 12: Aggregation Binding Using Templates"},{href:"https://sapui5.hana.ondemand.com/#docs/guide/6c7c5c266b534e7ea9a28f861dc515f5.html",text:"Data Binding Tutorial - Step 13: Element Binding"}],check:function(e,t,a){var s=a.getElements();Object.keys(s).forEach(function(t){var a=s[t],u=a.mBindingInfos;Object.keys(u).forEach(function(t){var s=u[t].binding;if(s&&!(s instanceof d)&&s.getModel&&s.getModel()){var l=s.getModel();if(s.getValue&&s.getValue()===undefined||s instanceof i&&s.getLength()===0){var g=false;if(l instanceof n){var h=l.getObject(s.getPath());if(!h){var f=l.getData();g=c(Object.keys(f),s.getPath())}}else if(l.oMetadata&&l.oMetadata instanceof o){var p=l.oMetadata._getEntityTypeByPath(s.getPath());if(!p){var m=[];l.oMetadata.getServiceMetadata().dataServices.schema.forEach(function(e){if(e.entityContainer){e.entityContainer.forEach(function(e){if(e.entitySet){e.entitySet.forEach(function(e){if(e.name){m.push(e.name)}})}})}});g=c(m,s.getPath())}}if(g){e.addIssue({severity:r.Medium,details:"Element "+a.getId()+" with binding path '"+s.getPath()+"' has unresolved bindings."+" You could try '"+g+"' instead",context:{id:a.getId()}})}}else if(s.getValue&&s.getValue()===s.getPath()){e.addIssue({severity:r.Low,details:"Element "+a.getId()+" with binding path '"+s.getPath()+"' has the same value as the path. Potential Error.",context:{id:a.getId()}})}}})})}};return[l]},true);