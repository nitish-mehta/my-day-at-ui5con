/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global"],function(e){"use strict";sap.ui.extensionpoint=function(n,a,t,o,s){e.sap.log.warning("Do not use deprecated factory function 'sap.ui.extensionpoint'. Use 'sap.ui.core.ExtensionPoint.load' instead");return i._factory(n,a,t,o,s)};var i=sap.ui.extensionpoint;i._factory=function(i,n,a,t,o){var s,r,u;var f=sap.ui.require("sap/ui/core/CustomizingConfiguration"),g=sap.ui.require("sap/ui/core/mvc/View"),c=sap.ui.require("sap/ui/core/Fragment");if(f){if(g&&i instanceof g){s=f.getViewExtension(i.sViewName,n,i);r=i}else if(c&&i instanceof c){s=f.getViewExtension(i.getFragmentName(),n,i);r=i._oContainingView}if(s){if(s.className){e.sap.require(s.className);var m=e.sap.getObject(s.className),p=r&&s.id?r.createId(s.id):s.id;e.sap.log.info("Customizing: View extension found for extension point '"+n+"' in View '"+r.sViewName+"': "+s.className+": "+(s.viewName||s.fragmentName));if(s.className==="sap.ui.core.Fragment"){var l=new m({id:p,type:s.type,fragmentName:s.fragmentName,containingView:r});u=Array.isArray(l)?l:[l]}else if(s.className==="sap.ui.core.mvc.View"){var r=sap.ui.view({type:s.type,viewName:s.viewName,id:p});u=[r]}else{e.sap.log.warning("Customizing: Unknown extension className configured (and ignored) in Component.js for extension point '"+n+"' in View '"+r.sViewName+"': "+s.className)}}else{e.sap.log.warning("Customizing: no extension className configured in Component.js for extension point '"+n+"' in View '"+r.sViewName+"': "+s.className)}}}if(!u&&typeof a==="function"){u=a()}var d=function(i){if(i&&!Array.isArray(i)){i=[i]}if(i&&t){var a=t.getMetadata().getAggregation(o);if(a){for(var s=0,u=i.length;s<u;s++){t[a._sMutator](i[s])}}else{e.sap.log.error("Creating extension point failed - Tried to add extension point with name "+n+" to an aggregation of "+t.getId()+" in view "+r.sViewName+", but sAggregationName was not provided correctly and I could not find a default aggregation")}}return i||[]};if(u&&typeof u.then==="function"){return u.then(d)}else{return d(u)}};i.load=function(e){return Promise.resolve(i._factory(e.container,e.name,e.createDefaultContent))};return i});