/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","sap/ui/core/format/DateFormat","sap/ui/model/FormatException","sap/ui/model/odata/type/ODataType","sap/ui/model/ParseException","sap/ui/model/ValidateException"],function(t,e,n,a,o,i){"use strict";var r=new Date(2014,10,27,13,47,26);function s(t){return t.oConstraints&&t.oConstraints.isDateOnly}function l(t){return sap.ui.getCore().getLibraryResourceBundle().getText(s(t)?"EnterDate":"EnterDateTime",[t.formatValue(r,"string")])}function u(n){var a;if(!n.oFormat){a=t.extend({strictParsing:true},n.oFormatOptions);if(s(n)){a.UTC=true;n.oFormat=e.getDateInstance(a)}else{n.oFormat=e.getDateTimeInstance(a)}}return n.oFormat}function f(e,n){var a,o;e.oConstraints=undefined;if(n){a=n.nullable;if(a===false||a==="false"){e.oConstraints={nullable:false}}else if(a!==undefined&&a!==true&&a!=="true"){t.sap.log.warning("Illegal nullable: "+a,null,e.getName())}if(n.isDateOnly===true){e.oConstraints=e.oConstraints||{};e.oConstraints.isDateOnly=true}o=n.precision;if(o!==undefined){if(o===Math.floor(o)&&o>=1&&o<=12){e.oConstraints=e.oConstraints||{};e.oConstraints.precision=o}else if(o!==0){t.sap.log.warning("Illegal precision: "+o,null,e.getName())}}}e._handleLocalizationChange()}var p=a.extend("sap.ui.model.odata.type.DateTimeBase",{constructor:function(t,e){a.apply(this,arguments);f(this,e);this.oFormat=null;this.oFormatOptions=t},metadata:{abstract:true}});p.prototype.formatValue=function(t,e){if(t===null||t===undefined){return null}switch(this.getPrimitiveType(e)){case"any":return t;case"string":if(!(t instanceof Date)){throw new n("Illegal "+this.getName()+" value: "+t)}return u(this).format(t);default:throw new n("Don't know how to format "+this.getName()+" to "+e)}};p.prototype.parseValue=function(t,e){var n;if(t===null||t===""){return null}switch(this.getPrimitiveType(e)){case"string":n=u(this).parse(t);if(!n){throw new o(l(this))}return n;default:throw new o("Don't know how to parse "+this.getName()+" from "+e)}};p.prototype._handleLocalizationChange=function(){this.oFormat=null};p.prototype.validateValue=function(t){if(t===null){if(this.oConstraints&&this.oConstraints.nullable===false){throw new i(l(this))}return}else if(t instanceof Date){return}throw new i("Illegal "+this.getName()+" value: "+t)};return p});