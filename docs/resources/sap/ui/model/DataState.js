/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","../base/Object"],function(e,t){"use strict";var r=t.extend("sap.ui.model.DataState",{metadata:{},constructor:function(){this.mProperties={modelMessages:[],controlMessages:[],laundering:false,originalValue:undefined,originalInternalValue:undefined,value:undefined,invalidValue:undefined,internalValue:undefined,dirty:false,messages:[]};this.mChangedProperties=e.sap.extend({},this.mProperties)}});r.prototype._sortMessages=function(e){var t={Error:0,Warning:1,Success:2,Info:3};e.sort(function(e,r){return t[e.type]-t[r.type]})};r.prototype.setProperty=function(e,t){this.mChangedProperties[e]=t;return this};r.prototype.calculateChanges=function(){for(var t in this.mChangedProperties){var r=this.mChangedProperties[t].value;if(!e.sap.equal(this.mProperties[t],r)){if(Array.isArray(r)){r=r.slice(0)}this.mProperties[t]=r}}return this};r.prototype.getProperty=function(e){return this.mChangedProperties[e]};r.prototype.getMessages=function(){var e=[];var t=this.mChangedProperties["controlMessages"];var r=this.mChangedProperties["modelMessages"];if(r||t){e=e.concat(r?r:[],t?t:[]);this._sortMessages(e)}return e};r.prototype._getOldMessages=function(){var e=[];var t=this.mProperties["controlMessages"];var r=this.mProperties["modelMessages"];if(r||t){e=e.concat(r?r:[],t?t:[]);this._sortMessages(e)}return e};r.prototype.setModelMessages=function(e){this.mChangedProperties["modelMessages"]=e||[];return this};r.prototype.getModelMessages=function(){return this.getProperty("modelMessages")};r.prototype.setControlMessages=function(e){this.mChangedProperties["controlMessages"]=e||[];return this};r.prototype.getControlMessages=function(){return this.getProperty("controlMessages")};r.prototype.isDirty=function(){var t=this.mChangedProperties["value"];var r=this.mChangedProperties["originalValue"];var s=this.mChangedProperties["invalidValue"]!==undefined;return s||!e.sap.equal(t,r)};r.prototype.isControlDirty=function(){return this.mChangedProperties["invalidValue"]!==undefined};r.prototype.isLaundering=function(){return this.mChangedProperties["laundering"]};r.prototype.setLaundering=function(e){this.mChangedProperties["laundering"]=e;return this};r.prototype.getValue=function(e){return this.getProperty("value")};r.prototype.setValue=function(e){this.mChangedProperties["value"]=e;return this};r.prototype.getInvalidValue=function(){return this.getProperty("invalidValue")};r.prototype.setInvalidValue=function(e){this.mChangedProperties["invalidValue"]=e;return this};r.prototype.getOriginalValue=function(){return this.getProperty("originalValue")};r.prototype.setOriginalValue=function(e){this.mChangedProperties["originalValue"]=e;return this};r.prototype.changed=function(t){if(t===false){this.mProperties=e.sap.extend({},this.mChangedProperties)}return!e.sap.equal(this.mChangedProperties,this.mProperties)};r.prototype.getChanges=function(){var t={};e.each(this.mChangedProperties,function(r,s){if(!e.sap.equal(this.mChangedProperties[r],this.mProperties[r])){t[r]={};t[r].value=this.mChangedProperties[r];t[r].oldValue=this.mProperties[r]}}.bind(this));var r=this.getMessages();var s=this._getOldMessages();if(r.length>0||s.length>0){t["messages"]={};t["messages"].oldValue=s;t["messages"].value=r}return t};return r});