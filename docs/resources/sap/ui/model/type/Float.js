/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","sap/ui/core/format/NumberFormat","sap/ui/model/SimpleType","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/ValidateException"],function(t,o,a,e,i,r){"use strict";var n=a.extend("sap.ui.model.type.Float",{constructor:function(){a.apply(this,arguments);this.sName="Float"}});n.prototype.formatValue=function(t,o){var a=t;if(t==undefined||t==null){return null}if(this.oInputFormat){a=this.oInputFormat.parse(t);if(a==null){throw new e("Cannot format float: "+t+" has the wrong format")}}switch(this.getPrimitiveType(o)){case"string":return this.oOutputFormat.format(a);case"int":return Math.floor(a);case"float":case"any":return a;default:throw new e("Don't know how to format Float to "+o)}};n.prototype.parseValue=function(t,o){var a,e;switch(this.getPrimitiveType(o)){case"string":a=this.oOutputFormat.parse(t);if(isNaN(a)){e=sap.ui.getCore().getLibraryResourceBundle();throw new i(e.getText("Float.Invalid"))}break;case"int":case"float":a=t;break;default:throw new i("Don't know how to parse Float from "+o)}if(this.oInputFormat){a=this.oInputFormat.format(a)}return a};n.prototype.validateValue=function(o){if(this.oConstraints){var a=sap.ui.getCore().getLibraryResourceBundle(),e=[],i=[],n=o;if(this.oInputFormat){n=this.oInputFormat.parse(o)}t.each(this.oConstraints,function(t,o){switch(t){case"minimum":if(n<o){e.push("minimum");i.push(a.getText("Float.Minimum",[o]))}break;case"maximum":if(n>o){e.push("maximum");i.push(a.getText("Float.Maximum",[o]))}}});if(e.length>0){throw new r(this.combineMessages(i),e)}}};n.prototype.setFormatOptions=function(t){this.oFormatOptions=t;this._createFormats()};n.prototype._handleLocalizationChange=function(){this._createFormats()};n.prototype._createFormats=function(){var a=this.oFormatOptions.source;this.oOutputFormat=o.getFloatInstance(this.oFormatOptions);if(a){if(t.isEmptyObject(a)){a={groupingEnabled:false,groupingSeparator:",",decimalSeparator:"."}}this.oInputFormat=o.getFloatInstance(a)}};return n});