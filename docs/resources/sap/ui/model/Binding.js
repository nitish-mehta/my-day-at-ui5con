/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","sap/ui/base/EventProvider","./ChangeReason","./DataState"],function(t,e,a,n){"use strict";var i=e.extend("sap.ui.model.Binding",{constructor:function(a,n,i,s){e.apply(this);this.oModel=a;this.bRelative=!t.sap.startsWith(n,"/");this.sPath=n;this.oContext=i;this.vMessages=undefined;this.mParameters=s;this.bInitial=false;this.bSuspended=false;this.oDataState=null},metadata:{abstract:true,publicMethods:["getPath","getContext","getModel","attachChange","detachChange","refresh","isInitial","attachDataStateChange","detachDataStateChange","attachAggregatedDataStateChange","detachAggregatedDataStateChange","attachDataRequested","detachDataRequested","attachDataReceived","detachDataReceived","suspend","resume","isSuspended"]}});i.prototype.getPath=function(){return this.sPath};i.prototype.getContext=function(){return this.oContext};i.prototype.setContext=function(t){if(this.oContext!=t){sap.ui.getCore().getMessageManager().removeMessages(this.getDataState().getControlMessages(),true);this.oContext=t;this.oDataState=null;this._fireChange({reason:a.Context})}};i.prototype.getMessages=function(){return this.vMessages};i.prototype.getDataState=function(){if(!this.oDataState){this.oDataState=new n}return this.oDataState};i.prototype.getModel=function(){return this.oModel};i.prototype.attachChange=function(t,e){if(!this.hasListeners("change")){this.oModel.addBinding(this)}this.attachEvent("change",t,e)};i.prototype.detachChange=function(t,e){this.detachEvent("change",t,e);if(!this.hasListeners("change")){this.oModel.removeBinding(this)}};i.prototype._fireDataStateChange=function(t){this.fireEvent("DataStateChange",t)};i.prototype.attachDataStateChange=function(t,e){this.attachEvent("DataStateChange",t,e)};i.prototype.detachDataStateChange=function(t,e){this.detachEvent("DataStateChange",t,e)};i.prototype.attachAggregatedDataStateChange=function(t,e){this.attachEvent("AggregatedDataStateChange",t,e)};i.prototype.detachAggregatedDataStateChange=function(t,e){this.detachEvent("AggregatedDataStateChange",t,e)};i.prototype._fireChange=function(t){this.fireEvent("change",t)};i.prototype.attachDataRequested=function(t,e){this.attachEvent("dataRequested",t,e)};i.prototype.detachDataRequested=function(t,e){this.detachEvent("dataRequested",t,e)};i.prototype.fireDataRequested=function(t){this.fireEvent("dataRequested",t)};i.prototype.attachDataReceived=function(t,e){this.attachEvent("dataReceived",t,e)};i.prototype.detachDataReceived=function(t,e){this.detachEvent("dataReceived",t,e)};i.prototype.fireDataReceived=function(t){this.fireEvent("dataReceived",t)};i.prototype.updateRequired=function(t){return t&&this.getModel()===t};i.prototype.hasValidation=function(){return!!this.getType()};i.prototype.checkUpdate=function(t){if(this.bSuspended&&!t){return}this._fireChange({reason:a.Change})};i.prototype.refresh=function(t){if(this.bSuspended&&!t){return}this.checkUpdate(t)};i.prototype.initialize=function(){if(!this.bSuspended){this.checkUpdate(true)}return this};i.prototype._refresh=function(t){this.refresh(t)};i.prototype.isResolved=function(){if(this.bRelative&&!this.oContext){return false}return true};i.prototype.isInitial=function(){return this.bInitial};i.prototype.isRelative=function(){return this.bRelative};i.prototype.attachEvents=function(e){if(!e){return this}var a=this;t.each(e,function(e,n){var i="attach"+e.substring(0,1).toUpperCase()+e.substring(1);if(a[i]){a[i](n)}else{t.sap.log.warning(a.toString()+" has no handler for event '"+e+"'")}});return this};i.prototype.detachEvents=function(e){if(!e){return this}var a=this;t.each(e,function(e,n){var i="detach"+e.substring(0,1).toUpperCase()+e.substring(1);if(a[i]){a[i](n)}else{t.sap.log.warning(a.toString()+" has no handler for event '"+e+"'")}});return this};i.prototype.attachRefresh=function(t,e){this.attachEvent("refresh",t,e)};i.prototype.detachRefresh=function(t,e){this.detachEvent("refresh",t,e)};i.prototype._fireRefresh=function(t){this.fireEvent("refresh",t)};i.prototype.suspend=function(){this.bSuspended=true};i.prototype.isSuspended=function(){return this.bSuspended};i.prototype.resume=function(){this.bSuspended=false;this.checkUpdate()};i.prototype.destroy=function(){this.bIsBeingDestroyed=true;sap.ui.getCore().getMessageManager().removeMessages(this.getDataState().getControlMessages(),true);e.prototype.destroy.apply(this,arguments);this.bIsBeingDestroyed=false};return i});