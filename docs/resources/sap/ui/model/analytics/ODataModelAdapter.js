/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","./AnalyticalBinding","./AnalyticalTreeBindingAdapter","./odata4analytics","./AnalyticalVersionInfo"],function(t,e,a,n,i){"use strict";var o=function(){var e=i.getVersion(this);if(e===i.NONE||this.getAnalyticalExtensions){return}this._mPreadapterFunctions={bindList:this.bindList,bindTree:this.bindTree};for(var a in o.prototype){if(o.prototype.hasOwnProperty(a)){this[a]=o.prototype[a]}}if(e===i.V1&&this.isCountSupported()){t.sap.log.info("ODataModelAdapter: switched ODataModel to use inlinecount (mandatory for the AnalyticalBinding)");this.setCountSupported(false)}};o.prototype.bindList=function(t,n,i,o,s){if(s&&s.analyticalInfo){var r=new e(this,t,n,i,o,s);a.apply(r);return r}else{return this._mPreadapterFunctions.bindList.apply(this,arguments)}};o.prototype.bindTree=function(t,a,n,i){if(i&&i.analyticalInfo){var o=new e(this,t,a,[],n,i);return o}else{return this._mPreadapterFunctions.bindTree.apply(this,arguments)}};o.prototype.getAnalyticalExtensions=function(){if(this.oOData4SAPAnalyticsModel!=undefined&&this.oOData4SAPAnalyticsModel!=null){return this.oOData4SAPAnalyticsModel}var e=i.getVersion(this);if(e===i.V2&&!(this.oMetadata&&this.oMetadata.isLoaded())){throw"Failed to get the analytical extensions. The metadata have not been loaded by the model yet."+"Register for the 'metadataLoaded' event of the ODataModel(v2) to know when the analytical extensions can be retrieved."}var a=null;if(arguments.length==1){var o=arguments[0];var s=t.sap.syncGetText(o);if(s.success){a=s.data}}try{this.oOData4SAPAnalyticsModel=new n.Model(new n.Model.ReferenceByModel(this),{sAnnotationJSONDoc:a})}catch(t){throw"Failed to instantiate analytical extensions for given OData model: "+t.message}return this.oOData4SAPAnalyticsModel};o.prototype.setAnalyticalExtensions=function(t){this.oOData4SAPAnalyticsModel=t};return o},true);