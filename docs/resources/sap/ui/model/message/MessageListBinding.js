/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","sap/ui/model/ChangeReason","sap/ui/model/ClientListBinding"],function(t,e,s){"use strict";var i=s.extend("sap.ui.model.message.MessageListBinding");i.prototype.getContexts=function(e,s){this.iLastStartIndex=e;this.iLastLength=s;if(!e){e=0}if(!s){s=Math.min(this.iLength,this.oModel.iSizeLimit)}var i=this._getContexts(e,s),a={};if(this.bUseExtendedChangeDetection){for(var n=0;n<i.length;n++){a[i[n].getPath()]=i[n].getObject()}if(this.aLastContexts&&e<this.iLastEndIndex){var h=this;var o=t.sap.arrayDiff(this.aLastContexts,i,function(e,s){return t.sap.equal(e&&h.oLastContextData&&h.oLastContextData[e.getPath()],s&&a&&a[s.getPath()])});i.diff=o}this.iLastEndIndex=e+s;this.aLastContexts=i.slice(0);this.oLastContextData=t.extend(true,{},a)}return i};i.prototype.update=function(){var e=this.oModel._getObject(this.sPath,this.oContext);if(Array.isArray(e)){if(this.bUseExtendedChangeDetection){this.oList=t.extend(true,[],e)}else{this.oList=e.slice(0)}this.updateIndices();this.applyFilter();this.applySort();this.iLength=this._getLength()}else{this.oList=[];this.aIndices=[];this.iLength=0}};i.prototype.checkUpdate=function(s){if(this.bSuspended&&!this.bIgnoreSuspend){return}if(!this.bUseExtendedChangeDetection){var i=this.oModel._getObject(this.sPath,this.oContext);if(!t.sap.equal(this.oList,i)||s){this.update();this._fireChange({reason:e.Change})}}else{var a=false;var n=this;var i=this.oModel._getObject(this.sPath,this.oContext);if(!t.sap.equal(this.oList,i)){this.update()}var h=this._getContexts(this.iLastStartIndex,this.iLastLength);if(this.aLastContexts){if(this.aLastContexts.length!=h.length){a=true}else{t.each(this.aLastContexts,function(e,s){if(!t.sap.equal(h[e].getObject(),n.oLastContextData[s.getPath()])){a=true;return false}})}}else{a=true}if(a||s){this._fireChange({reason:e.Change})}}};return i});