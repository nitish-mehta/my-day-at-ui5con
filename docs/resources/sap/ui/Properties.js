/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","sap/ui/Device","sap/base/util/extend"],function(e,r,t){"use strict";var n=function(){this.mProperties={};this.aKeys=null};n.prototype.getProperty=function(e,r){var t=this.mProperties[e];if(typeof t=="string"){return t}else if(r){return r}return null};n.prototype.getKeys=function(){return this.aKeys||(this.aKeys=Object.keys(this.mProperties))};n.prototype.setProperty=function(e,r){if(typeof r!="string"){return}if(typeof this.mProperties[e]!="string"&&this.aKeys){this.aKeys.push(String(e))}this.mProperties[e]=r};n.prototype.clone=function(){var e=new n;e.mProperties=t({},this.mProperties);return e};var i=r.browser.chrome?function(e,r){if(r>2&&40*r>e.length){Number(e)}return e}:function(e){return e};var s=/(?:\r\n|\r|\n|^)[ \t\f]*/;var o=/(\\u[0-9a-fA-F]{0,4})|(\\.)|(\\$)|([ \t\f]*[ \t\f:=][ \t\f]*)/g;var f=/(\\u[0-9a-fA-F]{0,4})|(\\.)|(\\$)/g;var u={"\\f":"\f","\\n":"\n","\\r":"\r","\\t":"\t"};function l(e,r){var t=e.split(s),n,l,a,p,c,h,y,d;function g(e){if(p){p=p+e;d++}else{p=e;d=0}}r.mProperties={};for(c=0;c<t.length;c++){n=t[c];if(n===""||n.charAt(0)==="#"||n.charAt(0)==="!"){continue}l=o;l.lastIndex=y=0;a=null;p="";while((h=l.exec(n))!==null){if(y<h.index){g(n.slice(y,h.index))}y=l.lastIndex;if(h[1]){if(h[1].length!==6){throw new Error("Incomplete Unicode Escape '"+h[1]+"'")}g(String.fromCharCode(parseInt(h[1].slice(2),16)))}else if(h[2]){g(u[h[2]]||h[2].slice(1))}else if(h[3]){n=t[++c];l.lastIndex=y=0}else if(h[4]){a=p;p="";l=f;l.lastIndex=y}}if(y<n.length){g(n.slice(y))}if(a==null){a=p;p=""}r.mProperties[a]=i(p,p?d:0)}}var a=function(r){r=t({url:undefined,headers:{}},r);var i=!!r.async,s=new n,o;function f(e){if(typeof e==="string"){l(e,s);return s}return r.returnNullIfMissing?null:s}if(typeof r.url==="string"){o=e.sap.loadResource({url:r.url,dataType:"text",headers:r.headers,failOnError:false,async:i})}if(i){if(!o){return Promise.resolve(f(null))}return o.then(function(e){return f(e)},function(e){throw e instanceof Error?e:new Error("Problem during loading of property file '"+r.url+"': "+e)})}return f(o)};return a});