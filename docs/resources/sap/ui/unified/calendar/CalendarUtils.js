/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","sap/ui/core/date/UniversalDate","./CalendarDate","sap/ui/core/Locale","sap/ui/core/LocaleData"],function(e,t,a,n,r){"use strict";var i={};i.MAX_MILLISECONDS=864e13;i.HOURS24=1e3*3600*24;i._createLocalDate=function(e,a){var n;if(e){var r;if(e instanceof t){r=e.getJSDate()}else{r=e}n=new Date(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate());if(r.getFullYear()<1e3){n.setFullYear(r.getFullYear())}if(a){n.setHours(r.getUTCHours());n.setMinutes(r.getUTCMinutes());n.setSeconds(r.getUTCSeconds());n.setMilliseconds(r.getUTCMilliseconds())}}return n};i._createUTCDate=function(e,a){var n;if(e){var r;if(e instanceof t){r=e.getJSDate()}else{r=e}n=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate()));if(r.getFullYear()<1e3){n.setUTCFullYear(r.getFullYear())}if(a){n.setUTCHours(r.getHours());n.setUTCMinutes(r.getMinutes());n.setUTCSeconds(r.getSeconds());n.setUTCMilliseconds(r.getMilliseconds())}}return n};i._createUniversalUTCDate=function(e,a,n){var r;if(a){r=t.getInstance(this._createUTCDate(e,n),a)}else{r=new t(this._createUTCDate(e,n).getTime())}return r};i.calculateWeekNumber=function(e,a,r,i){var s=0;var g=0;var u=i.getFirstDayOfWeek();var o=new n(r);if(o&&(o.getLanguage()=="en"&&o.getRegion()=="US")){var c=new t(e.getTime());c.setUTCFullYear(a,0,1);g=c.getUTCDay();var l=new t(e.getTime());l.setUTCDate(l.getUTCDate()-l.getUTCDay()+g);s=Math.round((l.getTime()-c.getTime())/864e5/7)+1}else{var C=new t(e.getTime());C.setUTCDate(C.getUTCDate()-u);g=C.getUTCDay();C.setUTCDate(C.getUTCDate()-g+4);var D=new t(C.getTime());D.setUTCMonth(0,1);g=D.getUTCDay();var T=0;if(g>4){T=7}var f=new t(D.getTime());f.setUTCDate(1-g+4+T);s=Math.round((C.getTime()-f.getTime())/864e5/7)+1}return s};i.getFirstDateOfWeek=function(e){var a=new t(e.getTime()),n,i,s=r.getInstance(sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale()),g=s.getFirstDayOfWeek(),u;u=t.getWeekByDate(a.getCalendarType(),a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate());n=t.getFirstDateOfWeek(a.getCalendarType(),u.year,u.week);i=new t(Date.UTC(n.year,n.month,n.day));while(i.getUTCDay()!==g){i.setUTCDate(i.getUTCDate()-1)}return new t(Date.UTC(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())).getJSDate()};i.getFirstDateOfMonth=function(e){var a=new t(e.getTime());a.setUTCDate(1);return a};i._getNumberOfWeeksForYear=function(e){var t=sap.ui.getCore().getConfiguration().getFormatLocale(),a=r.getInstance(new n(t)),i=new Date(Date.UTC(e,0,1)),s=i.getUTCDay(),g=52;if(a.getFirstDayOfWeek()===0){if(s===5||s===6){g=53}}else{if(s===3||s===4){g=53}}return g};i.monthsDiffer=function(e,t){return e.getMonth()!==t.getMonth()||e.getFullYear()!==t.getFullYear()};i.isDateLastInMonth=function(e){var t=new Date(e.getTime()+24*60*60*1e3);return t.getUTCDate()<e.getUTCDate()};i._updateUTCDate=function(t,a,n,r,i,s,g,u){if(e.isNumeric(a)){t.setUTCFullYear(a)}if(e.isNumeric(n)){t.setUTCMonth(n)}if(e.isNumeric(r)){t.setUTCDate(r)}if(e.isNumeric(i)){t.setUTCHours(i)}if(e.isNumeric(s)){t.setUTCMinutes(s)}if(e.isNumeric(g)){t.setUTCSeconds(g)}if(e.isNumeric(u)){t.setUTCMilliseconds(u)}};i._checkJSDateObject=function(t){if(e.type(t)!=="date"){throw new Error("Date must be a JavaScript date object.")}};i._checkYearInValidRange=function(t){if(!e.isNumeric(t)||(t<1||t>9999)){throw new Error("Year must be in valid range (between year 0001 and year 9999).")}};i._isNextMonth=function(e,t){return e.getMonth()>t.getMonth()&&e.getFullYear()===t.getFullYear()||e.getFullYear()>t.getFullYear()};i._daysInMonth=function(e){this._checkCalendarDate(e);e=new a(e);e.setDate(1);e.setMonth(e.getMonth()+1);e.setDate(0);return e.getDate()};i._isLastDateInMonth=function(e){return e.getDate()===i._daysInMonth(e)};i._getFirstDateOfWeek=function(e){this._checkCalendarDate(e);var t=i.getFirstDateOfWeek(e.toUTCJSDate());t.setFullYear(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate());return a.fromLocalJSDate(t,e.getCalendarType())};i._getFirstDateOfMonth=function(e){this._checkCalendarDate(e);var t=i.getFirstDateOfMonth(e.toUTCJSDate()).getJSDate();t.setFullYear(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate());return a.fromLocalJSDate(t,e.getCalendarType())};i._minDate=function(e){return new a(1,0,1,e)};i._maxDate=function(e){var t=new a(9999,11,1,e);t.setDate(this._daysInMonth(t));return new a(t)};i._isBetween=function(e,t,a,n){this._checkCalendarDate(e);this._checkCalendarDate(t);this._checkCalendarDate(a);if(n){return e.isSameOrAfter(t)&&e.isSameOrBefore(a)}else{return e.isAfter(t)&&e.isBefore(a)}};i._daysBetween=function(e,t){this._checkCalendarDate(e);this._checkCalendarDate(t);return Math.ceil((e.valueOf()-t.valueOf())/this.HOURS24)};i._isOutside=function(e,t,a){return!this._isBetween(e,t,a,true)};i._isSameMonthAndYear=function(e,t){this._checkCalendarDate(e);this._checkCalendarDate(t);return e.getYear()===t.getYear()&&e.getMonth()===t.getMonth()};i._checkCalendarDate=function(e){if(!e||!(e instanceof a)){throw"Invalid calendar date: ["+e+"]. Expected: sap.ui.unified.calendar.CalendarDate"}};i._getWeek=function(e){this._checkCalendarDate(e);return t.getWeekByDate(e.getCalendarType(),e.getYear(),e.getMonth(),e.getDate())};return i},true);