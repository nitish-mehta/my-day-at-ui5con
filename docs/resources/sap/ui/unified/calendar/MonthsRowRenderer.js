/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","sap/ui/unified/calendar/CalendarUtils","sap/ui/unified/calendar/CalendarDate","sap/ui/unified/CalendarLegendRenderer","sap/ui/unified/library"],function(e,t,a,r,i){"use strict";var d=i.CalendarDayType;var n={};n.render=function(e,t){var a=t._getStartDate();var r=t.getTooltip_AsString();var i=t.getId();var d={value:i+"-Descr",append:true};e.write("<div");e.writeControlData(t);e.addClass("sapUiCalMonthsRow");e.addClass("sapUiCalRow");e.writeClasses();if(r){e.writeAttributeEscaped("title",r)}if(t._getShowHeader()){d.value=d.value+" "+i+"-Head"}e.writeAccessibilityState(t,{role:"grid",readonly:"true",multiselectable:!t.getSingleSelection()||t.getIntervalSelection(),labelledby:d});e.write(">");e.write('<span id="'+i+'-Descr" style="display: none;">'+t._rb.getText("CALENDAR_DIALOG")+"</span>");if(t.getIntervalSelection()){e.write('<span id="'+i+'-Start" style="display: none;">'+t._rb.getText("CALENDAR_START_MONTH")+"</span>");e.write('<span id="'+i+'-End" style="display: none;">'+t._rb.getText("CALENDAR_END_MONTH")+"</span>")}this.renderRow(e,t,a);e.write("</div>")};n.renderRow=function(e,t,a){var r=t.getId();this.renderHeader(e,t,a);e.write('<div id="'+r+'-months" class="sapUiCalItems">');this.renderMonths(e,t,a);e.write("</div>")};n.renderHeader=function(e,a,r){t._checkCalendarDate(r);if(a._getShowHeader()){var i=a._getLocaleData();var d=a.getId();e.write('<div id="'+d+'-Head">');this.renderHeaderLine(e,a,i,r);e.write("</div>")}};n.renderHeaderLine=function(e,r,i,d){t._checkCalendarDate(d);var n=r.getId();var s=r.getMonths();var l=new a(d);var o="";var c=0;var g=[];var h=0;for(h=0;h<s;h++){c=l.getYear();if(g.length>0&&g[g.length-1].iYear==c){g[g.length-1].iMonths++}else{g.push({iYear:c,iMonths:1})}l.setMonth(l.getMonth()+1)}for(h=0;h<g.length;h++){var C=g[h];o=100/s*C.iMonths+"%";e.write('<div id="'+n+"-Head"+h+'"class="sapUiCalHeadText" style="width:'+o+'">');e.write(C.iYear);e.write("</div>")}};n.renderMonths=function(e,t,r){var i=this.getHelper(t,r);var d=t.getMonths();var n=100/d+"%";var s=new a(r);s.setDate(1);for(var l=0;l<d;l++){this.renderMonth(e,t,s,i,n);s.setMonth(s.getMonth()+1)}};n.getHelper=function(r,i){t._checkCalendarDate(i);var d={};d.sLocale=r._getLocale();d.oLocaleData=r._getLocaleData();d.oToday=new a;d.sCurrentMonth=r._rb.getText("CALENDAR_CURRENT_MONTH");d.sId=r.getId();d.oFormatLong=r._getFormatLong();if(r._bLongMonth||!r._bNamesLengthChecked){d.aMonthNames=d.oLocaleData.getMonthsStandAlone("wide")}else{d.aMonthNames=d.oLocaleData.getMonthsStandAlone("abbreviated");d.aMonthNamesWide=d.oLocaleData.getMonthsStandAlone("wide")}var n=r.getLegend();if(n){var s=sap.ui.getCore().byId(n);if(s){if(!(s instanceof sap.ui.unified.CalendarLegend)){throw new Error(s+" is not an sap.ui.unified.CalendarLegend. "+r)}d.oLegend=s}else{e.sap.log.warning("CalendarLegend "+n+" does not exist!",r)}}return d};n.renderMonth=function(e,a,i,n,s){t._checkCalendarDate(i);var l={role:"gridcell",selected:false,label:"",describedby:""};if(!a._bLongMonth&&a._bNamesLengthChecked){l["label"]=n.aMonthNamesWide[i.getMonth()]}var o=a._oFormatYyyymm.format(i.toUTCJSDate(),true);var c=a._checkDateSelected(i);var g=a._getDateType(i);var h=a._checkMonthEnabled(i);e.write("<div");e.writeAttribute("id",n.sId+"-"+o);e.addClass("sapUiCalItem");if(s){e.addStyle("width",s)}if(t._isSameMonthAndYear(i,n.oToday)){e.addClass("sapUiCalItemNow");l["label"]=n.sCurrentMonth+" "}if(c>0){e.addClass("sapUiCalItemSel");l["selected"]=true}if(c==2){e.addClass("sapUiCalItemSelStart");l["describedby"]=l["describedby"]+" "+n.sId+"-Start"}else if(c==3){e.addClass("sapUiCalItemSelEnd");l["describedby"]=l["describedby"]+" "+n.sId+"-End"}else if(c==4){e.addClass("sapUiCalItemSelBetween")}else if(c==5){e.addClass("sapUiCalItemSelStart");e.addClass("sapUiCalItemSelEnd");l["describedby"]=l["describedby"]+" "+n.sId+"-Start";l["describedby"]=l["describedby"]+" "+n.sId+"-End"}if(g&&g.type!=d.None){e.addClass("sapUiCalItem"+g.type);if(g.tooltip){e.writeAttributeEscaped("title",g.tooltip)}}if(!h){e.addClass("sapUiCalItemDsbl");l["disabled"]=true}e.writeAttribute("tabindex","-1");e.writeAttribute("data-sap-month",o);l["label"]=l["label"]+n.oFormatLong.format(i.toUTCJSDate(),true);if(g&&g.type!=d.None){r.addCalendarTypeAccInfo(l,g.type,n.oLegend)}e.writeAccessibilityState(null,l);e.writeClasses();e.writeStyles();e.write(">");e.write("<span");e.addClass("sapUiCalItemText");e.writeClasses();e.write(">");e.write(n.aMonthNames[i.getMonth()]);e.write("</span>");e.write("</div>")};return n},true);