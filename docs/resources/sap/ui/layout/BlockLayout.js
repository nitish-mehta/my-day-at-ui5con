/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Control","./library","jquery.sap.global","sap/ui/core/ResizeHandler","./BlockLayoutRenderer"],function(e,t,i,a,r){"use strict";var o=e.extend("sap.ui.layout.BlockLayout",{metadata:{library:"sap.ui.layout",properties:{background:{type:"sap.ui.layout.BlockBackgroundType",group:"Appearance",defaultValue:"Default"},keepFontSize:{type:"boolean",group:"Behavior",defaultValue:false}},defaultAggregation:"content",aggregations:{content:{type:"sap.ui.layout.BlockLayoutRow",multiple:true}},designtime:"sap/ui/layout/designtime/BlockLayout.designtime"}});o.CONSTANTS={SIZES:{S:600,M:1024,L:1440,XL:null}};o.prototype.init=function(){this._currentBreakpoint=null};o.prototype.onBeforeRendering=function(){this._detachResizeHandler()};o.prototype.onAfterRendering=function(){this._onParentResize();this._notifySizeListeners()};o.prototype.setBackground=function(t){var i=this.getBackground(),a=e.prototype.setProperty.apply(this,["background"].concat(Array.prototype.slice.call(arguments)));if(this.hasStyleClass("sapUiBlockLayoutBackground"+i)){this.removeStyleClass("sapUiBlockLayoutBackground"+i,true)}t=t?t:"Default";this.addStyleClass("sapUiBlockLayoutBackground"+t,true);this.invalidate();return a};o.prototype._onParentResize=function(){var e,t=this.getDomRef(),i=t.clientWidth,a=o.CONSTANTS.SIZES;this._detachResizeHandler();if(i>0){this._removeBreakpointClasses();for(e in a){if(a.hasOwnProperty(e)&&(a[e]===null||a[e]>i)){if(this._currentBreakpoint!=e){this._currentBreakpoint=e;this._notifySizeListeners()}this.addStyleClass("sapUiBlockLayoutSize"+e,true);break}}}this._attachResizeHandler()};o.prototype._notifySizeListeners=function(){var e=this;this.getContent().forEach(function(t){t._onParentSizeChange(e._currentBreakpoint)})};o.prototype._removeBreakpointClasses=function(){var e=o.CONSTANTS.SIZES;for(var t in e){if(e.hasOwnProperty(t)){this.removeStyleClass("sapUiBlockLayoutSize"+t,true)}}};o.prototype._attachResizeHandler=function(){if(!this._parentResizeHandler){this._parentResizeHandler=a.register(this,this._onParentResize.bind(this))}};o.prototype._detachResizeHandler=function(){if(this._parentResizeHandler){a.deregister(this._parentResizeHandler);this._parentResizeHandler=null}};o.prototype.exit=function(){this._detachResizeHandler()};return o});