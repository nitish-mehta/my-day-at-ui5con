/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","sap/ui/core/Control","./Form","./FormContainer","./FormElement","./FormLayout","sap/ui/base/ManagedObjectObserver","sap/ui/layout/library","sap/ui/core/ResizeHandler","./SimpleFormRenderer"],function(e,t,a,i,s,r,n,o,l,u){"use strict";var h=o.BackgroundDesign;var g=o.form.SimpleFormLayout;var f;var d;var y;var p;var m;var v;var c;var L=t.extend("sap.ui.layout.form.SimpleForm",{metadata:{library:"sap.ui.layout",properties:{maxContainerCols:{type:"int",group:"Appearance",defaultValue:2},minWidth:{type:"int",group:"Appearance",defaultValue:-1},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},editable:{type:"boolean",group:"Misc",defaultValue:null},labelMinWidth:{type:"int",group:"Misc",defaultValue:192},layout:{type:"sap.ui.layout.form.SimpleFormLayout",group:"Misc",defaultValue:g.ResponsiveLayout},labelSpanXL:{type:"int",group:"Misc",defaultValue:-1},labelSpanL:{type:"int",group:"Misc",defaultValue:4},labelSpanM:{type:"int",group:"Misc",defaultValue:2},labelSpanS:{type:"int",group:"Misc",defaultValue:12},adjustLabelSpan:{type:"boolean",group:"Misc",defaultValue:true},emptySpanXL:{type:"int",group:"Misc",defaultValue:-1},emptySpanL:{type:"int",group:"Misc",defaultValue:0},emptySpanM:{type:"int",group:"Misc",defaultValue:0},emptySpanS:{type:"int",group:"Misc",defaultValue:0},columnsXL:{type:"int",group:"Misc",defaultValue:-1},columnsL:{type:"int",group:"Misc",defaultValue:2},columnsM:{type:"int",group:"Misc",defaultValue:1},singleContainerFullSize:{type:"boolean",group:"Misc",defaultValue:true},breakpointXL:{type:"int",group:"Misc",defaultValue:1440},breakpointL:{type:"int",group:"Misc",defaultValue:1024},breakpointM:{type:"int",group:"Misc",defaultValue:600},backgroundDesign:{type:"sap.ui.layout.BackgroundDesign",group:"Appearance",defaultValue:h.Translucent}},defaultAggregation:"content",aggregations:{content:{type:"sap.ui.core.Element",multiple:true,singularName:"content"},form:{type:"sap.ui.layout.form.Form",multiple:false,visibility:"hidden"},title:{type:"sap.ui.core.Title",altTypes:["string"],multiple:false},toolbar:{type:"sap.ui.core.Toolbar",multiple:false}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},designtime:"sap/ui/layout/designtime/form/SimpleForm.designtime"}});L.prototype.init=function(){this._iMaxWeight=8;this._iLabelWeight=3;this._iCurrentWidth=0;var e=new a(this.getId()+"--Form");e.getTitle=function(){return this.getParent().getTitle()};e._origInvalidate=e.invalidate;e.invalidate=function(e){if(this.bOutput){this._origInvalidate(e)}if(this._bIsBeingDestroyed){return}var t=this.getParent();if(t){t._formInvalidated(e)}};e.getAriaLabelledBy=function(){var e=this.getParent();if(e){return e.getAriaLabelledBy()}else{return null}};e._origOnLayoutDataChange=e.onLayoutDataChange;e.onLayoutDataChange=function(e){this._origOnLayoutDataChange(e);var t=this.getParent();if(t){t._onLayoutDataChange(e)}};this.setAggregation("form",e);this._aElements=null;this._aLayouts=[];this._changedFormContainers=[];this._changedFormElements=[];this._oObserver=new n(H.bind(this))};L.prototype.exit=function(){var e=this.getAggregation("form");e.invalidate=e._origInvalidate;z.call(this);for(var t=0;t<this._aLayouts.length;t++){var a=sap.ui.getCore().byId(this._aLayouts[t]);if(a&&a.destroy){a.destroy()}}this._aLayouts=[];this._aElements=null;this._changedFormContainers=[];this._changedFormElements=[];this._oObserver.disconnect();this._oObserver=undefined};L.prototype.onBeforeRendering=function(){z.call(this);var e=this.getAggregation("form");if(!this._bResponsiveLayoutRequested&&!this._bGridLayoutRequested&&!this._bResponsiveGridLayoutRequested&&!this._bColumnLayoutRequested){var t=true;if(!e.getLayout()){t=b.call(this)}if(t){B.call(this)}}};L.prototype.onAfterRendering=function(){if(this.getLayout()==g.ResponsiveLayout){this._bChangedByMe=true;this.$().css("visibility","hidden");this._applyLinebreaks();this._sResizeListenerId=l.register(this.getDomRef(),e.proxy(this._resize,this));this._bChangedByMe=false}};L.prototype.setEditable=function(e){this._bChangedByMe=true;this.setProperty("editable",e,true);var t=this.getAggregation("form");t.setEditable(e);this._bChangedByMe=false;return this};L.prototype.setToolbar=function(e){this._bChangedByMe=true;var t=this.getAggregation("form");t.setToolbar(e);this._bChangedByMe=false;return this};L.prototype.getToolbar=function(){var e=this.getAggregation("form");return e.getToolbar()};L.prototype.destroyToolbar=function(){this._bChangedByMe=true;var e=this.getAggregation("form");e.destroyToolbar();this._bChangedByMe=false;return this};L.prototype.setLabelMinWidth=function(e){this.setProperty("labelMinWidth",e,true);if(this.getLayout()==g.ResponsiveLayout){this._bLayoutDataChangedByMe=true;var t=this.getContent();for(var a=0;a<t.length;a++){var i=t[a];if(i.isA("sap.ui.core.Label")){var s=k.call(this,i);if(s&&s.isA("sap.ui.layout.ResponsiveFlowLayoutData")&&A.call(this,s)){s.setMinWidth(e)}}}this._bLayoutDataChangedByMe=false}return this};L.prototype.indexOfContent=function(e){var t=this._aElements;if(t){for(var a=0;a<t.length;a++){if(t[a]==e){return a}}}return-1};L.prototype.addContent=function(t){t=this.validateAggregation("content",t,true);if(this.indexOfContent(t)>=0){e.sap.log.warning("SimpleForm.addContent: Content element '"+t+"' already assigned. Please remove before adding!",this);this.removeContent(t)}if(!this._aElements){this._aElements=[]}this._bChangedByMe=true;var a=this._aElements.length;var r;var n=this.getAggregation("form");var o;var l;var u;var h;if(t.isA(["sap.ui.core.Title","sap.ui.core.Toolbar"])){o=I.call(this,t);n.addFormContainer(o);this._changedFormContainers.push(o)}else if(t.isA("sap.ui.core.Label")){if(a>0){r=this._aElements[a-1];u=r.getParent();if(u instanceof s){o=u.getParent()}else if(u instanceof i){o=u}}if(!o){o=I.call(this);n.addFormContainer(o);this._changedFormContainers.push(o)}l=O.call(this,o,t)}else{if(a>0){r=this._aElements[a-1];u=r.getParent();if(u instanceof s){o=u.getParent();l=u;h=k.call(this,t);if(h&&h.isA("sap.ui.layout.ResponsiveFlowLayoutData")&&!A.call(this,h)&&h.getLinebreak()){l=O.call(this,o)}}else if(u instanceof i){o=u;l=O.call(this,o)}}else{o=I.call(this);n.addFormContainer(o);this._changedFormContainers.push(o);l=O.call(this,o)}w.call(this,t,5,false,true);l.addField(t);j(this._changedFormElements,l)}this._aElements.push(t);this._oObserver.observe(t,{properties:["visible"]});this.invalidate();this._bChangedByMe=false;return this};L.prototype.insertContent=function(t,a){t=this.validateAggregation("content",t,true);if(this.indexOfContent(t)>=0){e.sap.log.warning("SimpleForm.insertContent: Content element '"+t+"' already assigned. Please remove before insert!",this);this.removeContent(t)}if(!this._aElements){this._aElements=[]}var i=this._aElements.length;var s;if(a<0){s=0}else if(a>i){s=i}else{s=a}if(s!==a){e.sap.log.warning("SimpleForm.insertContent: index '"+a+"' out of range [0,"+i+"], forced to "+s)}if(s==i){this.addContent(t);return this}this._bChangedByMe=true;var r=this._aElements[s];var n=this.getAggregation("form");var o;var l;var u;var h;var g;var f=0;var d;var y;var p;var m;var v=0;var c;var L;if(t.isA(["sap.ui.core.Title","sap.ui.core.Toolbar"])){if(a==0&&!r.isA(["sap.ui.core.Title","sap.ui.core.Toolbar"])){o=r.getParent().getParent();if(t.isA("sap.ui.core.Title")){o.setTitle(t)}else{o.setToolbar(t)}}else{o=I.call(this,t);if(r.isA(["sap.ui.core.Title","sap.ui.core.Toolbar"])){u=r.getParent();g=n.indexOfFormContainer(u)}else{h=r.getParent();u=h.getParent();g=n.indexOfFormContainer(u)+1;f=u.indexOfFormElement(h);if(!r.isA("sap.ui.core.Label")){d=h.indexOfField(r);if(d>0||h.getLabel()){l=O.call(this,o);this._changedFormElements.push(l);j(this._changedFormElements,h);y=h.getFields();for(v=d;v<y.length;v++){c=y[v];l.addField(c)}f++}}p=u.getFormElements();for(v=f;v<p.length;v++){o.addFormElement(p[v])}}n.insertFormContainer(o,g)}this._changedFormContainers.push(o)}else if(t.isA("sap.ui.core.Label")){if(r.isA(["sap.ui.core.Title","sap.ui.core.Toolbar"])){u=r.getParent();g=n.indexOfFormContainer(u);m=n.getFormContainers();if(g==0){o=I.call(this);n.insertFormContainer(o,g);this._changedFormContainers.push(o)}else{o=m[g-1]}l=O.call(this,o,t)}else if(r.isA("sap.ui.core.Label")){u=r.getParent().getParent();f=u.indexOfFormElement(r.getParent());l=x.call(this,u,t,f)}else{h=r.getParent();u=h.getParent();f=u.indexOfFormElement(h)+1;d=h.indexOfField(r);if(d==0&&!h.getLabel()){l=h;l.setLabel(t);w.call(this,t,this._iLabelWeight,false,true,this.getLabelMinWidth())}else{l=x.call(this,u,t,f);j(this._changedFormElements,h);y=h.getFields();for(v=d;v<y.length;v++){c=y[v];l.addField(c)}}}this._changedFormElements.push(l)}else{L=k.call(this,t);if(r.isA(["sap.ui.core.Title","sap.ui.core.Toolbar"])){u=r.getParent();g=n.indexOfFormContainer(u);if(g==0){o=I.call(this);n.insertFormContainer(o,g);this._changedFormContainers.push(o)}else{m=n.getFormContainers();o=m[g-1]}p=o.getFormElements();if(p.length==0){l=O.call(this,o)}else if(L&&L.isA("sap.ui.layout.ResponsiveFlowLayoutData")&&!A.call(this,L)&&L.getLinebreak()){l=O.call(this,o)}else{l=p[p.length-1]}l.addField(t)}else if(r.isA("sap.ui.core.Label")){h=r.getParent();o=h.getParent();f=o.indexOfFormElement(h);if(f==0){l=x.call(this,o,null,0)}else if(L&&L.isA("sap.ui.layout.ResponsiveFlowLayoutData")&&!A.call(this,L)&&L.getLinebreak()){l=x.call(this,o,null,f)}else{p=o.getFormElements();l=p[f-1]}l.addField(t)}else{l=r.getParent();d=l.indexOfField(r);if(L&&L.isA("sap.ui.layout.ResponsiveFlowLayoutData")&&!A.call(this,L)&&L.getLinebreak()&&d>0){o=l.getParent();f=o.indexOfFormElement(l);j(this._changedFormElements,l);y=l.getFields();l=x.call(this,o,undefined,f+1);l.addField(t);for(v=d;v<y.length;v++){c=y[v];l.addField(c)}}else{l.insertField(t,d)}}j(this._changedFormElements,l);w.call(this,t,5,false,true)}this._aElements.splice(s,0,t);this._oObserver.observe(t,{properties:["visible"]});this.invalidate();this._bChangedByMe=false;return this};L.prototype.removeContent=function(t){var a=null;var i=-1;var s=0;if(this._aElements){if(typeof t=="string"){t=sap.ui.getCore().byId(t)}if(typeof t=="object"){for(s=0;s<this._aElements.length;s++){if(this._aElements[s]==t){t=s;break}}}if(typeof t=="number"){if(t<0||t>=this._aElements.length){e.sap.log.warning("Element.removeAggregation called with invalid index: Items, "+t)}else{i=t;a=this._aElements[i]}}}if(a){this._bChangedByMe=true;var r=this.getAggregation("form");var n;var o;var l;var u;if(a.isA(["sap.ui.core.Title","sap.ui.core.Toolbar"])){n=a.getParent();n.setTitle(null);n.setToolbar(null);if(i>0){l=n.getFormElements();var h=r.indexOfFormContainer(n);var g=r.getFormContainers()[h-1];if(l.length>0&&!l[0].getLabel()){var f=g.getFormElements();var d=f[f.length-1];u=l[0].getFields();for(s=0;s<u.length;s++){d.addField(u[s])}j(this._changedFormElements,d);n.removeFormElement(l[0]);l[0].destroy();l.splice(0,1)}for(s=0;s<l.length;s++){g.addFormElement(l[s])}j(this._changedFormContainers,g);r.removeFormContainer(n);n.destroy()}else if(n.getFormElements().length==0){r.removeFormContainer(n);n.destroy()}}else if(a.isA("sap.ui.core.Label")){o=a.getParent();n=o.getParent();o.setLabel(null);var y=n.indexOfFormElement(o);if(y==0){if(o.getFields().length==0){n.removeFormElement(o);o.destroy();if(n.getFormElements().length==0&&!n.getTitle()&&!n.getToolbar()){r.removeFormContainer(n);n.destroy()}}else{j(this._changedFormElements,o)}}else{l=n.getFormElements();var p=l[y-1];u=o.getFields();for(s=0;s<u.length;s++){p.addField(u[s])}j(this._changedFormElements,p);n.removeFormElement(o);o.destroy()}}else{o=a.getParent();o.removeField(a);if(o.getFields().length==0&&!o.getLabel()){n=o.getParent();n.removeFormElement(o);o.destroy();if(n.getFormElements().length==0&&!n.getTitle()&&!n.getToolbar()){r.removeFormContainer(n);n.destroy()}}else{j(this._changedFormElements,o)}}this._aElements.splice(i,1);a.setParent(null);this._oObserver.unobserve(a);q.call(this,a);this.invalidate();this._bChangedByMe=false;return a}return null};L.prototype.removeAllContent=function(){var e=0;if(this._aElements){this._bChangedByMe=true;var t=this.getAggregation("form");var a=t.getFormContainers();for(e=0;e<a.length;e++){var i=a[e];i.setTitle(null);i.setToolbar(null);var s=i.getFormElements();for(var r=0;r<s.length;r++){var n=s[r];n.setLabel(null);n.removeAllFields()}i.destroyFormElements()}t.destroyFormContainers();for(e=0;e<this._aElements.length;e++){var o=this._aElements[e];q.call(this,o);this._oObserver.unobserve(o)}var l=this._aElements;this._aElements=null;this.invalidate();this._bChangedByMe=false;return l}else{return[]}};L.prototype.destroyContent=function(){var e=this.removeAllContent();if(e){this._bChangedByMe=true;for(var t=0;t<e.length;t++){e[t].destroy()}this.invalidate();this._bChangedByMe=false}return this};L.prototype.getContent=function(){if(!this._aElements){this._aElements=this.getAggregation("content",[])}return this._aElements.slice()};L.prototype.setLayout=function(e){var t=this.getLayout();if(e!=t){D.call(this)}this.setProperty("layout",e);if(e!=t){var a=b.call(this);if(a){R.call(this)}}return this};L.prototype.clone=function(e){this._bChangedByMe=true;var a=t.prototype.clone.apply(this,arguments);var i=this.getContent();for(var s=0;s<i.length;s++){var r=i[s];var n=r.getLayoutData();this._oObserver.unobserve(r);var o=r.clone(e);this._oObserver.observe(r,{properties:["visible"]});if(n){if(n.isA("sap.ui.core.VariantLayoutData")){var l=n.getMultipleLayoutData();for(var u=0;u<l.length;u++){if(A.call(this,l[u])){a._aLayouts.push(o.getLayoutData().getMultipleLayoutData()[u].getId())}}}else if(A.call(this,n)){a._aLayouts.push(o.getLayoutData().getId())}}a.addContent(o)}this._bChangedByMe=false;return a};function b(){var e=this.getAggregation("form");if(e.getLayout()){this._bChangedByMe=true;e.destroyLayout();z.call(this);this._bChangedByMe=false}var t;switch(this.getLayout()){case g.ResponsiveLayout:if((!f||!d)&&!this._bResponsiveLayoutRequested){f=sap.ui.require("sap/ui/layout/form/ResponsiveLayout");d=sap.ui.require("sap/ui/layout/ResponsiveFlowLayoutData");if(!f||!d){sap.ui.require(["sap/ui/layout/form/ResponsiveLayout","sap/ui/layout/ResponsiveFlowLayoutData"],_.bind(this));this._bResponsiveLayoutRequested=true}}if(f&&d){t=new f(this.getId()+"--Layout")}break;case g.GridLayout:if((!p||!m||!v)&&!this._bGridLayoutRequested){p=sap.ui.require("sap/ui/layout/form/GridLayout");m=sap.ui.require("sap/ui/layout/form/GridContainerData");v=sap.ui.require("sap/ui/layout/form/GridElementData");if(!p||!m||!v){sap.ui.require(["sap/ui/layout/form/GridLayout","sap/ui/layout/form/GridContainerData","sap/ui/layout/form/GridElementData"],C.bind(this));this._bGridLayoutRequested=true}}if(p&&m&&v){t=new p(this.getId()+"--Layout")}break;case g.ResponsiveGridLayout:if(!y&&!this._bResponsiveGridLayoutRequested){y=sap.ui.require("sap/ui/layout/form/ResponsiveGridLayout");if(!y){sap.ui.require(["sap/ui/layout/form/ResponsiveGridLayout"],F.bind(this));this._bResponsiveGridLayoutRequested=true}}if(y){t=new y(this.getId()+"--Layout")}break;case g.ColumnLayout:if(!c&&!this._bColumnLayoutRequested){c=sap.ui.require("sap/ui/layout/form/ColumnLayout");if(!c){sap.ui.require(["sap/ui/layout/form/ColumnLayout"],M.bind(this));this._bColumnLayoutRequested=true}}if(c){t=new c(this.getId()+"--Layout")}break}if(t){this._bChangedByMe=true;e.setLayout(t);this._bChangedByMe=false;return true}return false}function _(e,t){f=e;d=t;this._bResponsiveLayoutRequested=false;if(this.getLayout()==g.ResponsiveLayout){E.call(this)}}function C(e,t,a){p=e;m=t;v=a;this._bGridLayoutRequested=false;if(this.getLayout()==g.GridLayout){E.call(this)}}function F(e){y=e;this._bResponsiveGridLayoutRequested=false;if(this.getLayout()==g.ResponsiveGridLayout){E.call(this)}}function M(e){c=e;this._bColumnLayoutRequested=false;if(this.getLayout()==g.ColumnLayout){E.call(this)}}function E(){if(!this._bIsBeingDestroyed){b.call(this);R.call(this);if(this.getDomRef()){B.call(this)}}}function D(){this._bChangedByMe=true;var e=this.getAggregation("form");var t=e.getFormContainers();for(var a=0;a<t.length;a++){var i=t[a];j(this._changedFormContainers,i);if(i.getLayoutData()){i.destroyLayoutData()}var s=i.getFormElements();for(var r=0;r<s.length;r++){var n=s[r];j(this._changedFormElements,n);if(n.getLayoutData()){n.destroyLayoutData()}var o=n.getLabel();if(o){q.call(this,o)}var l=n.getFields();for(var u=0;u<l.length;u++){var h=l[u];q.call(this,h)}}}this._bChangedByMe=false}function R(){this._bChangedByMe=true;var e=this.getAggregation("form");var t=e.getFormContainers();for(var a=0;a<t.length;a++){var i=t[a];j(this._changedFormContainers,i);G.call(this,i);var s=i.getFormElements();for(var r=0;r<s.length;r++){var n=s[r];j(this._changedFormElements,n);P.call(this,n);var o=n.getLabel();if(o){w.call(this,o,this._iLabelWeight,false,true,this.getLabelMinWidth())}var l=n.getFields();for(var u=0;u<l.length;u++){var h=l[u];w.call(this,h,5,false,true)}}}this._bChangedByMe=false}function B(){this._bChangedByMe=true;this._changedFormContainers=[];var e=this.getLayout();var t=this.getAggregation("form").getLayout();t.setBackgroundDesign(this.getBackgroundDesign());switch(e){case g.ResponsiveLayout:this._applyLinebreaks();for(var a=0;a<this._changedFormElements.length;a++){var i=this._changedFormElements[a];W.call(this,i)}break;case g.GridLayout:X.call(this);break;case g.ResponsiveGridLayout:t.setLabelSpanXL(this.getLabelSpanXL());t.setLabelSpanL(this.getLabelSpanL());t.setLabelSpanM(this.getLabelSpanM());t.setLabelSpanS(this.getLabelSpanS());t.setAdjustLabelSpan(this.getAdjustLabelSpan());t.setEmptySpanXL(this.getEmptySpanXL());t.setEmptySpanL(this.getEmptySpanL());t.setEmptySpanM(this.getEmptySpanM());t.setEmptySpanS(this.getEmptySpanS());t.setColumnsXL(this.getColumnsXL());t.setColumnsL(this.getColumnsL());t.setColumnsM(this.getColumnsM());t.setSingleContainerFullSize(this.getSingleContainerFullSize());t.setBreakpointXL(this.getBreakpointXL());t.setBreakpointL(this.getBreakpointL());t.setBreakpointM(this.getBreakpointM());break;case g.ColumnLayout:t.setColumnsXL(this.getColumnsXL()>0?this.getColumnsXL():this.getColumnsL());t.setColumnsL(this.getColumnsL());t.setColumnsM(this.getColumnsM());t.setLabelCellsLarge(this.getLabelSpanL());t.setEmptyCellsLarge(this.getEmptySpanL());break}this._changedFormElements=[];this._bChangedByMe=false}function A(e){var t=e.getId(),a=" "+this._aLayouts.join(" ")+" ";return a.indexOf(" "+t+" ")>-1}function S(e,t,a,i){var s=new d({weight:e,linebreak:t===true,linebreakable:a===true});if(i){s.setMinWidth(i)}this._aLayouts.push(s.getId());return s}function k(e){var t;switch(this.getLayout()){case g.ResponsiveLayout:t=r.prototype.getLayoutDataForElement(e,"sap.ui.layout.ResponsiveFlowLayoutData");break;case g.GridLayout:t=r.prototype.getLayoutDataForElement(e,"sap.ui.layout.form.GridElementData");break;case g.ResponsiveGridLayout:t=r.prototype.getLayoutDataForElement(e,"sap.ui.layout.GridData");break;case g.ColumnLayout:t=r.prototype.getLayoutDataForElement(e,"sap.ui.layout.form.ColumnElementData");break}return t}function T(){if(this._bResponsiveLayoutRequested||this._bGridLayoutRequested||this._bResponsiveGridLayoutRequested||this._bColumnLayoutRequested){return false}if(!this.getAggregation("form").getLayout()){var e=this._bChangedByMe;var t=b.call(this);this._bChangedByMe=e;if(!t){return false}}return true}function w(t,a,i,s,r){if(this.getLayout()!=g.ResponsiveLayout){return}if(!T.call(this)){return}this._bLayoutDataChangedByMe=true;var n=k.call(this,t);if(!n||!A.call(this,n)){n=t.getLayoutData();if(n&&n.isA("sap.ui.core.VariantLayoutData")){n.addMultipleLayoutData(S.call(this,a,i,s,r))}else if(!n){t.setLayoutData(S.call(this,a,i,s,r))}else{e.sap.log.warning("ResponsiveFlowLayoutData can not be set on Field "+t.getId(),"_createFieldLayoutData","SimpleForm")}}this._bLayoutDataChangedByMe=false}function P(e){if(this.getLayout()!=g.ResponsiveLayout){return}if(!T.call(this)){return}this._bLayoutDataChangedByMe=true;e.setLayoutData(new d({linebreak:true,margin:false}));this._bLayoutDataChangedByMe=false}function G(e){var t=this.getLayout();if(t!=g.ResponsiveLayout&&t!=g.GridLayout){return}if(!T.call(this)){return}this._bLayoutDataChangedByMe=true;switch(t){case g.ResponsiveLayout:e.setLayoutData(new d({minWidth:280}));break;case g.GridLayout:if(this.getMaxContainerCols()>1){e.setLayoutData(new m({halfGrid:true}))}else{e.setLayoutData(new m({halfGrid:false}))}break}this._bLayoutDataChangedByMe=false}function q(e){this._bLayoutDataChangedByMe=true;var t=k.call(this,e);if(t){var a=t.getId();for(var i=0;i<this._aLayouts.length;i++){var s=this._aLayouts[i];if(a==s){t.destroy();this._aLayouts.splice(i,1);break}}}this._bLayoutDataChangedByMe=false}function O(e,t){var a=V.call(this,t);e.addFormElement(a);return a}function x(e,t,a){var i=V.call(this,t);e.insertFormElement(i,a);return i}function V(e){var t=new s;P.call(this,t);if(e){e.addStyleClass("sapUiFormLabel-CTX");t.setLabel(e);if(!k.call(this,e)){w.call(this,e,this._iLabelWeight,false,true,this.getLabelMinWidth())}}t.isVisible=function(){var e=this.getFields();var t=false;for(var a=0;a<e.length;a++){var i=e[a];if(i.getVisible()){t=true;break}}return t};return t}function I(e){var t=new i;G.call(this,t);t.getAriaLabelledBy=function(){var e=this.getToolbar();if(e){return e.getAriaLabelledBy()}else{return[]}};if(e){if(e.isA("sap.ui.core.Title")){t.setTitle(e)}else if(e.isA("sap.ui.core.Toolbar")){t.setToolbar(e)}}return t}function W(e){var t=this._iMaxWeight;var a=e.getFields();var i;var s=a.length;var r=e.getLabel();var n;var o=0;this._bLayoutDataChangedByMe=true;if(r&&k.call(this,r)){t=t-k.call(this,r).getWeight()}for(o=0;o<a.length;o++){i=a[o];n=k.call(this,i);if(n&&n.isA("sap.ui.layout.ResponsiveFlowLayoutData")&&!A.call(this,n)){t=t-n.getWeight();s--}}var l=Math.floor(t/s);var u=t%s;for(o=0;o<a.length;o++){i=a[o];n=k.call(this,i);var h=l;if(!n){w.call(this,i,h,false,o==0)}else if(A.call(this,n)&&n.isA("sap.ui.layout.ResponsiveFlowLayoutData")){if(u>0){h++;u--}n.setWeight(h)}}this._bLayoutDataChangedByMe=false}L.prototype._applyLinebreaks=function(){if(!f||this._bResponsiveLayoutRequested){return}this._bLayoutDataChangedByMe=true;var e=this.getAggregation("form"),t=e.getFormContainers();var a=this.getDomRef();var i=this.$();for(var s=1;s<t.length;s++){var r=t[s],n=r.getLayoutData();if(!a||i.outerWidth(true)>this.getMinWidth()){if(s%this.getMaxContainerCols()==0){n.setLinebreak(true)}else{n.setLinebreak(false)}}else{n.setLinebreak(true)}}if(a&&i.css("visibility")=="hidden"){var o=this;setTimeout(function(){if(o.getDomRef()){o.$().css("visibility","")}},10)}this._bLayoutDataChangedByMe=false};function X(){this._bLayoutDataChangedByMe=true;var e=this.getAggregation("form");var t=e.getFormContainers();var a=t.length;for(var i=0;i<a;i++){var s=t[i];if(this.getMaxContainerCols()<=1||i==a-1&&a%2>0){s.getLayoutData().setHalfGrid(false)}else if(!s.getLayoutData().getHalfGrid()){s.getLayoutData().setHalfGrid(true)}}this._bLayoutDataChangedByMe=false}L.prototype._resize=function(e){this._bChangedByMe=true;if(this._iCurrentWidth==e.size.width){return}this._iCurrentWidth=e.size.width;this._applyLinebreaks();this._bChangedByMe=false};function z(){if(this._sResizeListenerId){l.deregister(this._sResizeListenerId);this._sResizeListenerId=null}}function j(e,t){var a=false;for(var i=0;i<e.length;i++){var s=e[i];if(s==t){a=true;break}}if(!a){e.push(t)}}function H(e){if(e.name=="visible"){var t=e.object.getParent();t.invalidate()}}function $(e){var t=[];var a=e.getFormContainers();for(var i=0;i<a.length;i++){var s=a[i];var r=s.getTitle();if(r){t.push(r)}else{var n=s.getToolbar();if(n){t.push(n)}}var o=s.getFormElements();for(var l=0;l<o.length;l++){var u=o[l];var h=u.getLabel();if(h){t.push(h)}var g=u.getFields();for(var f=0;f<g.length;f++){var d=g[f];t.push(d)}}}return t}L.prototype._formInvalidated=function(e){if(!this._bChangedByMe){var t=$(this.getAggregation("form"));var a=0;var i=0;var s=false;if(!this._aElements||t.length<this._aElements.length){s=true}else{for(a=0;a<t.length;a++){var r=t[a];var n=this._aElements[i];if(r===n){i++}else{var o=t[a+1];if(o===n){this.insertContent(r,a);break}o=this._aElements[i+1];if(o===r){s=true;break}break}}}if(s){this.removeAllContent();for(a=0;a<t.length;a++){var l=t[a];this.addContent(l)}}}};L.prototype._onLayoutDataChange=function(e){if(!this._bLayoutDataChangedByMe&&!this._bIsBeingDestroyed){switch(this.getLayout()){case g.ResponsiveLayout:var t=e.srcControl;var a=t.getParent();if(a instanceof s){var i=this.indexOfContent(t);this.removeContent(t);this.insertContent(t,i)}break}}};return L});