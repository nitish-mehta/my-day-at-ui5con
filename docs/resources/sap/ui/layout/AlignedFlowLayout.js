/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","sap/ui/core/Control","./library","sap/ui/core/ResizeHandler","./AlignedFlowLayoutRenderer"],function(e,t,i,o,n){"use strict";var r=t.extend("sap.ui.layout.AlignedFlowLayout",{metadata:{library:"sap.ui.layout",properties:{minItemWidth:{type:"sap.ui.core.AbsoluteCSSSize",defaultValue:"12rem"},maxItemWidth:{type:"sap.ui.core.AbsoluteCSSSize",defaultValue:"24rem"}},defaultAggregation:"content",aggregations:{content:{type:"sap.ui.core.Control",multiple:true},endContent:{type:"sap.ui.core.Control",multiple:true}}}});r.prototype.init=function(){this._iEndItemWidth=-1;this._sResizeListenerId=o.register(this,this._onResize.bind(this))};r.prototype.exit=function(){if(this._sResizeListenerId){o.deregister(this._sResizeListenerId);this._sResizeListenerId=""}};r.prototype._onRenderingOrThemeChanged=function(){var e=this.getDomRef(),t=this.getDomRef("endItem"),i=this.getContent().length&&e&&t;if(i){var o=window.getComputedStyle(e,null),n=o.getPropertyValue("padding-top"),r=t.style;if(sap.ui.getCore().getConfiguration().getRTL()){r.left=o.getPropertyValue("padding-left")}else{r.right=o.getPropertyValue("padding-right")}r.bottom=n}this._onResize(null,e,t);if(i){e.lastElementChild.style.width=this._iEndItemWidth+"px"}};r.prototype.onAfterRendering=r.prototype._onRenderingOrThemeChanged;r.prototype.onThemeChanged=r.prototype._onRenderingOrThemeChanged;r.prototype._onResize=function(e,t,i){if(e&&e.size.width===e.oldSize.width||this.getContent().length===0){return}t=t||this.getDomRef();if(!t){return}var o=this.getRenderer().CSS_CLASS+"OneLine",n=true;i=i||this.getDomRef("endItem");if(i){var r=t.lastElementChild.style;r.height="";r.display="";t.classList.remove(o);var s=this.getLastItemDomRef(),a=i.offsetHeight,f=i.offsetWidth,l=s.offsetLeft,h;if(!t.offsetParent){return}if(sap.ui.getCore().getConfiguration().getRTL()){h=l}else{var p=l+s.offsetWidth;h=t.offsetWidth-p}this._iEndItemWidth=f;n=h>=f;if(n){if(this.checkItemsWrapping(t)){if(i.offsetTop<s.offsetTop){r.height=a+"px";r.display="block"}else{r.height="0";r.display=""}}else{if(i.offsetTop<s.offsetTop){r.height=a+"px"}r.display="block"}}else{r.height=a+"px";r.display="block"}}if(!this.checkItemsWrapping(t)&&n){t.classList.add(o)}else{t.classList.remove(o)}};r.prototype.checkItemsWrapping=function(e){e=e||this.getDomRef();if(!e){return false}var t=e.firstElementChild,i=this.getLastItemDomRef();if(!t||!i){return false}var o=t.offsetTop,n=i.offsetTop,r=t.offsetHeight;if(n>=o+r){return true}i=this.getDomRef("endItem");return!!i&&n>=o+r};r.prototype.getLastItemDomRef=function(){var e=this.getContent(),t=e.length;if(t){var i=e[t-1],o=i.getDomRef();if(o){return o.parentElement}}return null};r.prototype.getLastVisibleDomRef=function(){return this.getDomRef("endItem")||this.getLastItemDomRef()};r.prototype.getNumberOfSpacers=function(){var t=this.getContent().length;if(t===0){return 0}var i=t,o=this.getMinItemWidth(),n;if(o.lastIndexOf("rem")!==-1){n=e.sap.remToPx(o)}else if(o.lastIndexOf("px")!==-1){n=parseFloat(o)}if(n){i=Math.abs(document.documentElement.clientWidth/n)}i=Math.min(i,t-2);i=Math.max(1,i);return Math.floor(i)};return r});