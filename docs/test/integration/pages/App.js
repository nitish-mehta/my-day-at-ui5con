sap.ui.require(["sap/ui/test/Opa5","sap/ui/demo/todo/test/integration/pages/Common","sap/ui/test/matchers/AggregationLengthEquals","sap/ui/test/matchers/PropertyStrictEquals","sap/ui/test/matchers/Properties","sap/ui/test/actions/EnterText","sap/ui/test/actions/Press"],function(e,t,s,n,i,r,a){"use strict";var o="sap.ui.demo.todo.view.App";var c="addTodoItemInput";var u="searchTodoItemsInput";var m="todoList";var h="clearCompleted";var d="itemsLeftLabel";e.createPageObjects({onTheAppPage:{baseClass:t,actions:{iEnterTextForNewItemAndPressEnter:function(e){return this.waitFor({id:c,viewName:o,actions:[new r({text:e})],errorMessage:"The text cannot be entered"})},iEnterTextForSearchAndPressEnter:function(e){return this.waitFor({id:u,viewName:o,actions:[new r({text:e})],errorMessage:"The text cannot be entered"})},iSelectTheLastItem:function(e){return this.waitFor({id:m,viewName:o,actions:[function(t){var s=t.getItems().length;var n=t.getItems()[s-1];this._triggerCheckboxSelection(n,e)}.bind(this)],errorMessage:"Last checkbox cannot be pressed"})},iSelectAllItems:function(e){return this.waitFor({id:m,viewName:o,actions:[function(t){t.getItems().forEach(function(t){this._triggerCheckboxSelection(t,e)}.bind(this))}.bind(this)],errorMessage:"checkbox cannot be pressed"})},_triggerCheckboxSelection:function(e,t){if(e.getSelected()&&!t||!e.getSelected()&&t){var s=new a;s.controlAdapters["sap.m.CustomListItem"]="selectMulti-CB";s.executeOn(e)}},iClearTheCompletedItems:function(){return this.waitFor({id:h,viewName:o,actions:[new a],errorMessage:"checkbox cannot be pressed"})},iFilterForItems:function(e){return this.waitFor({viewName:o,controlType:"sap.m.SegmentedButtonItem",matchers:[new i({key:e})],actions:[new a],errorMessage:"SegmentedButton can not be pressed"})}},assertions:{iShouldSeeTheItemBeingAdded:function(t,i){return this.waitFor({id:m,viewName:o,matchers:[new s({name:"items",length:t}),function(e){var t=e.getItems().length;var s=e.getItems()[t-1].getContent()[0];return new n({name:"value",value:i}).isMatching(s)}],success:function(){e.assert.ok(true,"The table has "+t+" item(s), with '"+i+"' as last item")},errorMessage:"List does not have expected entry '"+i+"'."})},iShouldSeeTheLastItemBeingCompleted:function(t){return this.waitFor({id:m,viewName:o,matchers:[function(e){var s=e.getItems().length;var n=e.getItems()[s-1].getContent()[0];return t&&!n.getEnabled()||!t&&n.getEnabled()}],success:function(){e.assert.ok(true,"The last item is marked as completed")},errorMessage:"The last item is not disabled."})},iShouldSeeAllButOneItemBeingRemoved:function(t){return this.waitFor({id:m,viewName:o,matchers:[new s({name:"items",length:1}),function(e){var s=e.getItems()[0].getContent()[0];return new n({name:"value",value:t}).isMatching(s)}],success:function(){e.assert.ok(true,"The table has 1 item, with '"+t+"' as Last item")},errorMessage:"List does not have expected entry '"+t+"'."})},iShouldSeeItemLeftCount:function(t){return this.waitFor({id:d,viewName:o,matchers:[new n({name:"text",value:t+(t===1?" item left":" items left")})],success:function(){e.assert.ok(true,""+t+" items left")},errorMessage:"Items are not selected."})},iShouldSeeItemCount:function(t){return this.waitFor({id:m,viewName:o,matchers:[new s({name:"items",length:t})],success:function(){e.assert.ok(true,"The table has "+t+" item(s)")},errorMessage:"List does not have expected number of items '"+t+"'."})}}}})});